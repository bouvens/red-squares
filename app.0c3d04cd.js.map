{"version":3,"sources":["webpack:///app.0c3d04cd.js","webpack:///./src/index.js","webpack:///./src/App.js","webpack:///./src/reducers/index.js","webpack:///./src/reducers/game.js","webpack:///./src/constants/actionTypes.js","webpack:///./src/constants/game.js","webpack:///./src/constants/hero.js","webpack:///./src/reducers/hero.js","webpack:///./src/reducers/threats.js","webpack:///./src/components/RedSquares.js","webpack:///./src/actions/index.js","webpack:///./src/actions/game.js","webpack:///./src/game-logic/threats.js","webpack:///./src/utils/InputCatcher.js","webpack:///./src/components/Hero.less","webpack:///./src/components/RedSquares.less","webpack:///./src/components/Field.js","webpack:///./src/utils/funcs.js","webpack:///./src/components/Square.js","webpack:///./src/components/StateControl/index.js","webpack:///./src/components/StateControl/Input.jsx","webpack:///./src/components/StateControl/utils.js","webpack:///./src/components/StateControl/Connector.jsx","webpack:///./src/components/StateControl/SettersBlock.jsx","webpack:///./src/game-logic/hero.js"],"names":["webpackJsonp","lVK7","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_react","_react2","_reactDom","_App","_App2","render","createElement","document","querySelector","0","pnOm","_interopRequireWildcard","newObj","key","Object","prototype","hasOwnProperty","call","_redux","_reduxThunk","_reduxThunk2","_reactRedux","_reducers","reducers","_RedSquares","_RedSquares2","reducer","combineReducers","store","createStore","applyMiddleware","App","Provider","ChGC","_game","defineProperty","enumerable","get","_hero","_threats","9jEl","_extends","assign","target","i","arguments","length","source","state","undefined","initialState","action","type","types","SET_STATUS","status","START_NEW","gameStatus","play","beats","outs","frame","UPDATE_FRAME","hero","heroStates","normal","stop","SET_GAME_STATE","data","_actionTypes","frameLength","defaults","fieldWidth","fieldHeight","sideWidth","4HHy","SET_HERO_STATE","SET_THREATS_STATE","bHK7","_buttonName","heroSize","threatSize","threatLimit","threatAddTimeout","threatRemoveProbability","pause","buttonName","IDS","YhS/","trouble","ZJmM","x","y","size","WNaE","threats","lastTime","index","added","addTimeout","limit","removeProbability","maxSpeed","3VDB","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","writable","configurable","setPrototypeOf","__proto__","_heroStyleMap","_dec","_class","_actions","actions","_InputCatcher","_InputCatcher2","_Hero","_Hero2","_Field","_Field2","_Square","_Square2","_StateControl","_StateControl2","heroStyleMap","heroInTrouble","RedSquares","connect","game","heroStatus","heroPos","dispatch","bindActionCreators","processSpacePress","updateFrame","setState","_React$Component","props","this","_this","tick","inputCatcher","reactToKeys","mousePos","getFieldSize","fieldRect","field","left","offsetLeft","top","offsetTop","right","clientWidth","bottom","clientHeight","getS","name","num","changeHandler","event","initialValue","parseInt"," ","setInterval","_this2","className","wrapper","style","width","refHandler","elem","height","map","threat","id","side","onClick","Connector","onChange","Input","label","Component","BCOr","hB/+","getState","controlled","controlThreats","moveHero","_data","7lKn","speed","beat","oldThreatsNum","filter","isAroundField","isGoingOut","isOut","push","newThreat","processSpeed","_ref","canFlyAway","_ref2","axis","lean","Math","sign","abs","_ref3","random","processThreat","rightBorder","bottomBorder","_ref4","round","ceil","cilB","liqn","_temp","InputCatcher","keymap","saveMousePos","e","pageX","pageY","saveKeyPressed","keyPressed","forEach","onmousemove","window","onkeyup","BCEp","tNBi","7hJZ","_funcs","Field","ref","children","defaultProps","vlrw","noOp","CMFL","Square","t9xF","_Input","_Connector","_SettersBlock","StateControl","SettersBlock","6e+x","_temp2","_utils","_ret","_len","args","Array","_key","apply","concat","inner","multiLine","stateName","htmlFor","control","readOnly","onFocus","JglD","noOperation","WwO4","WS4u","Children","child","cloneElement","tozq","Setter","tabIndex","text","setters","setter","params","tabIndexOffset","iMa0","max","min","getHeroStatus","safeLength","sizeFix","some"],"mappings":"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","file":"app.0c3d04cd.js","sourcesContent":["webpackJsonp([0,2],{\n\n/***/ \"lVK7\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(\"O27J\");\n\t\n\tvar _App = __webpack_require__(\"pnOm\");\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\t__webpack_require__(\"cilB\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t(0, _reactDom.render)(_react2.default.createElement(_App2.default, null), document.querySelector('#app'));\n\n/***/ },\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(\"+prg\");\n\tmodule.exports = __webpack_require__(\"lVK7\");\n\n\n/***/ },\n\n/***/ \"pnOm\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _redux = __webpack_require__(\"c9Fv\");\n\t\n\tvar _reduxThunk = __webpack_require__(\"4ufr\");\n\t\n\tvar _reduxThunk2 = _interopRequireDefault(_reduxThunk);\n\t\n\tvar _reactRedux = __webpack_require__(\"4n+p\");\n\t\n\tvar _reducers = __webpack_require__(\"ChGC\");\n\t\n\tvar reducers = _interopRequireWildcard(_reducers);\n\t\n\tvar _RedSquares = __webpack_require__(\"3VDB\");\n\t\n\tvar _RedSquares2 = _interopRequireDefault(_RedSquares);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar reducer = (0, _redux.combineReducers)(reducers);\n\tvar store = (0, _redux.createStore)(reducer, (0, _redux.applyMiddleware)(_reduxThunk2.default));\n\t\n\tvar App = function App() {\n\t    return _react2.default.createElement(\n\t        _reactRedux.Provider,\n\t        { store: store },\n\t        _react2.default.createElement(_RedSquares2.default, null)\n\t    );\n\t};\n\t\n\texports.default = App;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"ChGC\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _game = __webpack_require__(\"9jEl\");\n\t\n\tObject.defineProperty(exports, 'game', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_game).default;\n\t  }\n\t});\n\t\n\tvar _hero = __webpack_require__(\"ZJmM\");\n\t\n\tObject.defineProperty(exports, 'hero', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_hero).default;\n\t  }\n\t});\n\t\n\tvar _threats = __webpack_require__(\"WNaE\");\n\t\n\tObject.defineProperty(exports, 'threats', {\n\t  enumerable: true,\n\t  get: function get() {\n\t    return _interopRequireDefault(_threats).default;\n\t  }\n\t});\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ },\n\n/***/ \"9jEl\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function () {\n\t    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n\t    var action = arguments[1];\n\t\n\t    switch (action.type) {\n\t        case types.SET_STATUS:\n\t            return _extends({}, state, {\n\t                status: action.status\n\t            });\n\t        case types.START_NEW:\n\t            return _extends({}, state, {\n\t                status: _game.gameStatus.play,\n\t                beats: 0,\n\t                outs: 0,\n\t                frame: 0\n\t            });\n\t        case types.UPDATE_FRAME:\n\t            return _extends({}, state, {\n\t                status: action.hero.status === _hero.heroStates.normal ? _game.gameStatus.play : _game.gameStatus.stop,\n\t                beats: state.beats + action.beats,\n\t                outs: state.outs + action.outs,\n\t                frame: state.frame + 1\n\t            });\n\t        case types.SET_GAME_STATE:\n\t            return _extends({}, state, action.data);\n\t        default:\n\t            return state;\n\t    }\n\t};\n\t\n\tvar _actionTypes = __webpack_require__(\"4HHy\");\n\t\n\tvar types = _interopRequireWildcard(_actionTypes);\n\t\n\tvar _game = __webpack_require__(\"bHK7\");\n\t\n\tvar _hero = __webpack_require__(\"YhS/\");\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar initialState = {\n\t    status: _game.gameStatus.stop,\n\t    beats: 0,\n\t    outs: 0,\n\t    frame: 0,\n\t    frameLength: _game.defaults.frameLength, // TODO move to constants when it will defined\n\t    fieldWidth: _game.defaults.fieldWidth,\n\t    fieldHeight: _game.defaults.fieldHeight,\n\t    sideWidth: _game.defaults.sideWidth\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"4HHy\":\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\tvar SET_STATUS = exports.SET_STATUS = 'SET_STATUS';\n\tvar START_NEW = exports.START_NEW = 'START_NEW';\n\tvar UPDATE_FRAME = exports.UPDATE_FRAME = 'UPDATE_FRAME';\n\tvar SET_GAME_STATE = exports.SET_GAME_STATE = 'SET_GAME_STATE';\n\tvar SET_HERO_STATE = exports.SET_HERO_STATE = 'SET_HERO_STATE';\n\tvar SET_THREATS_STATE = exports.SET_THREATS_STATE = 'SET_THREATS_STATE';\n\n/***/ },\n\n/***/ \"bHK7\":\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _buttonName;\n\t\n\tvar defaults = exports.defaults = {\n\t    frameLength: 20,\n\t    heroSize: 50,\n\t    threatSize: 30,\n\t    threatLimit: 20,\n\t    threatAddTimeout: 1000,\n\t    threatRemoveProbability: 5,\n\t    fieldWidth: 800,\n\t    fieldHeight: 600,\n\t    sideWidth: 200\n\t};\n\t\n\tvar gameStatus = exports.gameStatus = {\n\t    play: 'play',\n\t    pause: 'pause',\n\t    stop: 'stop'\n\t};\n\t\n\tvar buttonName = exports.buttonName = (_buttonName = {}, _buttonName[gameStatus.play] = 'Pause', _buttonName[gameStatus.pause] = 'Resume', _buttonName[gameStatus.stop] = 'Start', _buttonName);\n\t\n\tvar IDS = exports.IDS = {\n\t    frameLength: 'frameLength',\n\t    heroSize: 'heroSize',\n\t    threatSize: 'threatSize',\n\t    threatLimit: 'threatLimit',\n\t    threatAddTimeout: 'threatAddTimeout',\n\t    threatRemoveProbability: 'threatRemoveProbability',\n\t    fieldWidth: 'fieldWidth',\n\t    fieldHeight: 'fieldHeight'\n\t};\n\n/***/ },\n\n/***/ \"YhS/\":\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\tvar heroStates = exports.heroStates = {\n\t    normal: 'normal',\n\t    trouble: 'trouble'\n\t};\n\n/***/ },\n\n/***/ \"ZJmM\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function () {\n\t    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n\t    var action = arguments[1];\n\t\n\t    switch (action.type) {\n\t        case types.UPDATE_FRAME:\n\t            return _extends({}, state, action.hero);\n\t        case types.SET_HERO_STATE:\n\t            return _extends({}, state, action.data);\n\t        default:\n\t            return state;\n\t    }\n\t};\n\t\n\tvar _actionTypes = __webpack_require__(\"4HHy\");\n\t\n\tvar types = _interopRequireWildcard(_actionTypes);\n\t\n\tvar _game = __webpack_require__(\"bHK7\");\n\t\n\tvar _hero = __webpack_require__(\"YhS/\");\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar initialState = {\n\t    x: (_game.defaults.fieldWidth - _game.defaults.heroSize) / 2,\n\t    y: (_game.defaults.fieldHeight - _game.defaults.heroSize) / 2,\n\t    status: _hero.heroStates.normal,\n\t    size: _game.defaults.heroSize\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"WNaE\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = function () {\n\t    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n\t    var action = arguments[1];\n\t\n\t    switch (action.type) {\n\t        case types.START_NEW:\n\t            return _extends({}, state, {\n\t                threats: [],\n\t                lastTime: action.lastTime\n\t            });\n\t        case types.UPDATE_FRAME:\n\t            return _extends({}, state, {\n\t                threats: action.threats,\n\t                index: state.index + action.added,\n\t                lastTime: action.lastTime\n\t            });\n\t        case types.SET_THREATS_STATE:\n\t            return _extends({}, state, action.data);\n\t        default:\n\t            return state;\n\t    }\n\t};\n\t\n\tvar _actionTypes = __webpack_require__(\"4HHy\");\n\t\n\tvar types = _interopRequireWildcard(_actionTypes);\n\t\n\tvar _game = __webpack_require__(\"bHK7\");\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tvar initialState = {\n\t    threats: [],\n\t    size: _game.defaults.threatSize,\n\t    lastTime: 0,\n\t    addTimeout: _game.defaults.threatAddTimeout,\n\t    index: 0,\n\t    limit: _game.defaults.threatLimit,\n\t    removeProbability: _game.defaults.threatRemoveProbability,\n\t    maxSpeed: 4\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"3VDB\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.default = undefined;\n\t\n\tvar _heroStyleMap, _dec, _class;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _redux = __webpack_require__(\"c9Fv\");\n\t\n\tvar _reactRedux = __webpack_require__(\"4n+p\");\n\t\n\tvar _actions = __webpack_require__(\"BCOr\");\n\t\n\tvar actions = _interopRequireWildcard(_actions);\n\t\n\tvar _game = __webpack_require__(\"bHK7\");\n\t\n\tvar _hero = __webpack_require__(\"YhS/\");\n\t\n\tvar _InputCatcher = __webpack_require__(\"liqn\");\n\t\n\tvar _InputCatcher2 = _interopRequireDefault(_InputCatcher);\n\t\n\tvar _Hero = __webpack_require__(\"BCEp\");\n\t\n\tvar _Hero2 = _interopRequireDefault(_Hero);\n\t\n\tvar _RedSquares = __webpack_require__(\"tNBi\");\n\t\n\tvar _RedSquares2 = _interopRequireDefault(_RedSquares);\n\t\n\tvar _Field = __webpack_require__(\"7hJZ\");\n\t\n\tvar _Field2 = _interopRequireDefault(_Field);\n\t\n\tvar _Square = __webpack_require__(\"CMFL\");\n\t\n\tvar _Square2 = _interopRequireDefault(_Square);\n\t\n\tvar _StateControl = __webpack_require__(\"t9xF\");\n\t\n\tvar _StateControl2 = _interopRequireDefault(_StateControl);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar heroStyleMap = (_heroStyleMap = {}, _heroStyleMap[_hero.heroStates.normal] = _Hero2.default.hero, _heroStyleMap[_hero.heroStates.trouble] = _Hero2.default.heroInTrouble, _heroStyleMap);\n\t\n\tvar RedSquares = (_dec = (0, _reactRedux.connect)(function (state) {\n\t    return {\n\t        status: state.game.status,\n\t        frameLength: state.game.frameLength,\n\t        fieldWidth: state.game.fieldWidth,\n\t        fieldHeight: state.game.fieldHeight,\n\t        sideWidth: state.game.sideWidth,\n\t        heroStatus: state.hero.status,\n\t        heroSize: state.hero.size,\n\t        heroPos: {\n\t            x: state.hero.x,\n\t            y: state.hero.y\n\t        },\n\t        threatSize: state.threats.size,\n\t        threats: state.threats.threats,\n\t        beats: state.game.beats,\n\t        outs: state.game.outs,\n\t        threatLimit: state.threats.limit,\n\t        threatAddTimeout: state.threats.addTimeout,\n\t        threatRemoveProbability: state.threats.removeProbability\n\t    };\n\t}, function (dispatch) {\n\t    return (0, _redux.bindActionCreators)({\n\t        processSpacePress: actions.game.processSpacePress,\n\t        updateFrame: actions.game.updateFrame,\n\t        setState: actions.game.setState\n\t    }, dispatch);\n\t}), _dec(_class = function (_React$Component) {\n\t    _inherits(RedSquares, _React$Component);\n\t\n\t    function RedSquares(props) {\n\t        _classCallCheck(this, RedSquares);\n\t\n\t        var _this = _possibleConstructorReturn(this, _React$Component.call(this, props));\n\t\n\t        _this.tick = function () {\n\t            _this.inputCatcher.reactToKeys();\n\t            _this.props.updateFrame(_InputCatcher2.default.mousePos, _this.getFieldSize());\n\t        };\n\t\n\t        _this.getFieldSize = function () {\n\t            var fieldRect = _this.field;\n\t            // TODO check and browsers and rewrite like https://learn.javascript.ru/coordinates-document\n\t            return {\n\t                left: fieldRect.offsetLeft,\n\t                top: fieldRect.offsetTop,\n\t                right: fieldRect.offsetLeft + fieldRect.clientWidth,\n\t                bottom: fieldRect.offsetTop + fieldRect.clientHeight\n\t            };\n\t        };\n\t\n\t        _this.getS = function (name, num) {\n\t            return (num || 'No') + ' ' + name + (num !== 1 ? 's' : '');\n\t        };\n\t\n\t        _this.changeHandler = function (state) {\n\t            return function (event) {\n\t                var initialValue = event.target.value;\n\t                var value = void 0;\n\t\n\t                switch (state) {\n\t                    default:\n\t                        value = parseInt(initialValue, 10) || 1;\n\t                }\n\t                _this.props.setState(state, value);\n\t            };\n\t        };\n\t\n\t        _this.inputCatcher = new _InputCatcher2.default({\n\t            ' ': _this.props.processSpacePress\n\t        });\n\t\n\t        setInterval(_this.tick, _this.props.frameLength);\n\t        return _this;\n\t    }\n\t\n\t    RedSquares.prototype.render = function render() {\n\t        var _this2 = this;\n\t\n\t        return _react2.default.createElement(\n\t            'div',\n\t            { className: _RedSquares2.default.wrapper, style: { width: this.props.fieldWidth + this.props.sideWidth + 'px' } },\n\t            _react2.default.createElement(\n\t                _Field2.default,\n\t                {\n\t                    style: _RedSquares2.default.field,\n\t                    refHandler: function refHandler(elem) {\n\t                        _this2.field = elem;\n\t                    },\n\t                    width: this.props.fieldWidth,\n\t                    height: this.props.fieldHeight\n\t                },\n\t                _react2.default.createElement(_Square2.default, {\n\t                    style: heroStyleMap[this.props.heroStatus],\n\t                    size: this.props.heroSize,\n\t                    left: this.props.heroPos.x,\n\t                    top: this.props.heroPos.y\n\t                }),\n\t                this.props.threats.map(function (threat) {\n\t                    return _react2.default.createElement(_Square2.default, {\n\t                        key: threat.id,\n\t                        style: _RedSquares2.default.threat,\n\t                        size: _this2.props.threatSize,\n\t                        left: threat.x,\n\t                        top: threat.y\n\t                    });\n\t                })\n\t            ),\n\t            _react2.default.createElement(\n\t                'div',\n\t                { className: _RedSquares2.default.side, style: { width: this.props.sideWidth + 'px' } },\n\t                _react2.default.createElement(\n\t                    'button',\n\t                    { onClick: this.props.processSpacePress },\n\t                    _game.buttonName[this.props.status]\n\t                ),\n\t                ' (Press Space)',\n\t                _react2.default.createElement(\n\t                    'h2',\n\t                    null,\n\t                    this.getS('beat', this.props.beats)\n\t                ),\n\t                _react2.default.createElement(\n\t                    'h2',\n\t                    null,\n\t                    this.getS('out', this.props.outs)\n\t                ),\n\t                _react2.default.createElement(\n\t                    'p',\n\t                    null,\n\t                    this.getS('threat', this.props.threats.length),\n\t                    ' on field'\n\t                ),\n\t                _react2.default.createElement(\n\t                    _StateControl2.default.Connector,\n\t                    {\n\t                        state: this.props,\n\t                        onChange: this.changeHandler\n\t                    },\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.frameLength,\n\t                        label: 'Frame length (ms)'\n\t                    }),\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.heroSize,\n\t                        label: 'Hero size (px)'\n\t                    }),\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.threatSize,\n\t                        label: 'Threat size (px)'\n\t                    }),\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.threatLimit,\n\t                        label: 'Threat limit'\n\t                    }),\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.threatAddTimeout,\n\t                        label: 'Threat add timeout (ms)'\n\t                    }),\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.threatRemoveProbability,\n\t                        label: 'Threat remove probability (1/x)'\n\t                    }),\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.fieldWidth,\n\t                        label: 'Field width (px)'\n\t                    }),\n\t                    _react2.default.createElement(_StateControl2.default.Input, {\n\t                        id: _game.IDS.fieldHeight,\n\t                        label: 'Field height (px)'\n\t                    })\n\t                )\n\t            )\n\t        );\n\t    };\n\t\n\t    return RedSquares;\n\t}(_react2.default.Component)) || _class);\n\texports.default = RedSquares;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"BCOr\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.game = undefined;\n\t\n\tvar _game = __webpack_require__(\"hB/+\");\n\t\n\tvar game = _interopRequireWildcard(_game);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\texports.game = game;\n\n/***/ },\n\n/***/ \"hB/+\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.processSpacePress = processSpacePress;\n\texports.updateFrame = updateFrame;\n\texports.setState = setState;\n\t\n\tvar _actionTypes = __webpack_require__(\"4HHy\");\n\t\n\tvar types = _interopRequireWildcard(_actionTypes);\n\t\n\tvar _game = __webpack_require__(\"bHK7\");\n\t\n\tvar _threats = __webpack_require__(\"7lKn\");\n\t\n\tvar _hero = __webpack_require__(\"iMa0\");\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction processSpacePress() {\n\t    return function (dispatch, getState) {\n\t        switch (getState().game.status) {\n\t            case _game.gameStatus.play:\n\t                dispatch({\n\t                    type: types.SET_STATUS,\n\t                    status: _game.gameStatus.pause\n\t                });\n\t                break;\n\t            case _game.gameStatus.pause:\n\t                dispatch({\n\t                    type: types.SET_STATUS,\n\t                    status: _game.gameStatus.play\n\t                });\n\t                break;\n\t            case _game.gameStatus.stop:\n\t            default:\n\t                dispatch({\n\t                    type: types.START_NEW,\n\t                    lastTime: 0 - getState().threats.addTimeout / getState().game.frameLength\n\t                });\n\t        }\n\t    };\n\t}\n\t\n\tfunction updateFrame(mousePos, field) {\n\t    return function (dispatch, getState) {\n\t        var state = getState();\n\t\n\t        if (state.game.status === _game.gameStatus.play) {\n\t            var controlled = (0, _threats.controlThreats)(state.threats.threats, state.threats.removeProbability, state.threats.limit, state.game.frame, state.threats.lastTime, state.threats.addTimeout, state.game.frameLength, state.threats.size, state.threats.index, state.game.fieldWidth, state.game.fieldHeight, state.threats.maxSpeed);\n\t            dispatch(_extends({\n\t                type: types.UPDATE_FRAME\n\t            }, controlled, (0, _hero.moveHero)(mousePos, field, state.hero.size, state.threats.size, controlled.threats)));\n\t        }\n\t    };\n\t}\n\t\n\tfunction setState(name, value) {\n\t    return function (dispatch) {\n\t        var _data;\n\t\n\t        switch (name) {\n\t            case _game.IDS.frameLength:\n\t            case _game.IDS.fieldWidth:\n\t            case _game.IDS.fieldHeight:\n\t                dispatch({\n\t                    type: types.SET_GAME_STATE,\n\t                    data: (_data = {}, _data[name] = value, _data)\n\t                });\n\t                break;\n\t            case _game.IDS.heroSize:\n\t                dispatch({\n\t                    type: types.SET_HERO_STATE,\n\t                    data: {\n\t                        size: value\n\t                    }\n\t                });\n\t                break;\n\t            case _game.IDS.threatSize:\n\t                dispatch({\n\t                    type: types.SET_THREATS_STATE,\n\t                    data: {\n\t                        size: value\n\t                    }\n\t                });\n\t                break;\n\t            case _game.IDS.threatLimit:\n\t                dispatch({\n\t                    type: types.SET_THREATS_STATE,\n\t                    data: {\n\t                        limit: value\n\t                    }\n\t                });\n\t                break;\n\t            case _game.IDS.threatAddTimeout:\n\t                dispatch({\n\t                    type: types.SET_THREATS_STATE,\n\t                    data: {\n\t                        addTimeout: value\n\t                    }\n\t                });\n\t                break;\n\t            case _game.IDS.threatRemoveProbability:\n\t                dispatch({\n\t                    type: types.SET_THREATS_STATE,\n\t                    data: {\n\t                        removeProbability: value\n\t                    }\n\t                });\n\t                break;\n\t            default:\n\t        }\n\t    };\n\t}\n\n/***/ },\n\n/***/ \"7lKn\":\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.controlThreats = controlThreats;\n\tvar processSpeed = function processSpeed(_ref) {\n\t    var newThreat = _ref.newThreat,\n\t        size = _ref.size,\n\t        canFlyAway = _ref.canFlyAway;\n\t    return function (_ref2) {\n\t        var axis = _ref2.axis,\n\t            lean = _ref2.lean;\n\t\n\t        newThreat.isGoingOut = Math.sign(lean) === Math.sign(newThreat.speed[axis]);\n\t\n\t        if (!newThreat.isOut) {\n\t            if (canFlyAway && newThreat.isGoingOut) {\n\t                newThreat.isOut = true;\n\t            } else {\n\t                newThreat.speed[axis] = (newThreat.isGoingOut ? -1 : 1) * (newThreat.speed[axis] || 1);\n\t            }\n\t        }\n\t        if (Math.abs(lean) > size * 2) {\n\t            newThreat.isAroundField = false;\n\t        }\n\t\n\t        return newThreat;\n\t    };\n\t};\n\t\n\tvar beat = function beat(_ref3) {\n\t    var removeProbability = _ref3.removeProbability,\n\t        size = _ref3.size,\n\t        fieldWidth = _ref3.fieldWidth,\n\t        fieldHeight = _ref3.fieldHeight;\n\t    return function (threat) {\n\t        var newThreat = _extends({}, threat);\n\t        var canFlyAway = Math.random() < 1 / removeProbability;\n\t        var processThreat = processSpeed({ newThreat: newThreat, size: size, canFlyAway: canFlyAway });\n\t\n\t        if (newThreat.x < 0) {\n\t            newThreat = processThreat({\n\t                axis: 'x',\n\t                lean: newThreat.x\n\t            });\n\t        }\n\t        var rightBorder = fieldWidth - size;\n\t        if (newThreat.x > rightBorder) {\n\t            newThreat = processThreat({\n\t                axis: 'x',\n\t                lean: newThreat.x - rightBorder\n\t            });\n\t        }\n\t\n\t        if (newThreat.y < 0) {\n\t            newThreat = processThreat({\n\t                axis: 'y',\n\t                lean: newThreat.y\n\t            });\n\t        }\n\t        var bottomBorder = fieldHeight - size;\n\t        if (newThreat.y > bottomBorder) {\n\t            newThreat = processThreat({\n\t                axis: 'y',\n\t                lean: newThreat.y - bottomBorder\n\t            });\n\t        }\n\t\n\t        return newThreat;\n\t    };\n\t};\n\t\n\tvar newThreat = function newThreat(_ref4) {\n\t    var size = _ref4.size,\n\t        index = _ref4.index,\n\t        fieldWidth = _ref4.fieldWidth,\n\t        fieldHeight = _ref4.fieldHeight,\n\t        maxSpeed = _ref4.maxSpeed;\n\t\n\t    var x = Math.round(Math.random() * (fieldWidth - size));\n\t    var y = 0 - size;\n\t    var speed = {\n\t        x: Math.round((Math.random() * 2 - 1) * maxSpeed),\n\t        y: Math.ceil(Math.random() * maxSpeed)\n\t    };\n\t\n\t    if (Math.random() < 0.5) {\n\t        x = 0 - size;\n\t        y = Math.round(Math.random() * (fieldHeight - size));\n\t        speed = {\n\t            x: Math.ceil(Math.random() * maxSpeed),\n\t            y: Math.round((Math.random() * 2 - 1) * maxSpeed)\n\t        };\n\t\n\t        if (Math.random() < 0.5) {\n\t            x = fieldWidth;\n\t            speed.x *= -1;\n\t        }\n\t    } else if (Math.random() < 0.5) {\n\t        y = fieldHeight;\n\t        speed.y *= -1;\n\t    }\n\t    return {\n\t        id: index,\n\t        x: x,\n\t        y: y,\n\t        speed: speed,\n\t        isOut: false,\n\t        isAroundField: true\n\t    };\n\t};\n\t\n\tfunction controlThreats(threats, removeProbability, limit, frame, lastTime, addTimeout, frameLength, size, index, fieldWidth, fieldHeight, maxSpeed) {\n\t    threats = threats.map(function (threat) {\n\t        return _extends({}, threat, {\n\t            x: threat.x + threat.speed.x,\n\t            y: threat.y + threat.speed.y\n\t        });\n\t    }).map(beat({\n\t        removeProbability: removeProbability,\n\t        size: size,\n\t        fieldWidth: fieldWidth,\n\t        fieldHeight: fieldHeight\n\t    }));\n\t    var oldThreatsNum = threats.length;\n\t    threats = threats.filter(function (threat) {\n\t        return threat.isAroundField;\n\t    });\n\t    var outs = oldThreatsNum - threats.length;\n\t\n\t    var beats = 0;\n\t\n\t    threats = threats.map(function (threat) {\n\t        if (threat.isGoingOut && !threat.isOut) {\n\t            beats += 1;\n\t            delete threat.isGoingOut;\n\t        }\n\t\n\t        return threat;\n\t    });\n\t\n\t    var added = 0;\n\t    if (threats.length < limit && frame >= lastTime + addTimeout / frameLength) {\n\t        threats.push(newThreat({ size: size, index: index, fieldWidth: fieldWidth, fieldHeight: fieldHeight, maxSpeed: maxSpeed }));\n\t        added = 1;\n\t        lastTime = frame;\n\t    }\n\t\n\t    return {\n\t        threats: threats,\n\t        beats: beats,\n\t        outs: outs,\n\t        added: added,\n\t        lastTime: lastTime\n\t    };\n\t}\n\n/***/ },\n\n/***/ \"cilB\":\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ \"liqn\":\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _class, _temp;\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar InputCatcher = (_temp = _class = function InputCatcher(keymap) {\n\t    var _this = this;\n\t\n\t    _classCallCheck(this, InputCatcher);\n\t\n\t    this.keymap = [];\n\t\n\t    this.saveMousePos = function (e) {\n\t        InputCatcher.mousePos = {\n\t            x: e.pageX,\n\t            y: e.pageY\n\t        };\n\t    };\n\t\n\t    this.saveKeyPressed = function (_ref) {\n\t        var key = _ref.key;\n\t        return InputCatcher.keyPressed.push(key);\n\t    };\n\t\n\t    this.reactToKeys = function () {\n\t        InputCatcher.keyPressed.forEach(function (key) {\n\t            return _this.keymap[key] && _this.keymap[key]();\n\t        });\n\t        InputCatcher.keyPressed = [];\n\t    };\n\t\n\t    if (InputCatcher.instance) {\n\t        return InputCatcher.instance;\n\t    }\n\t\n\t    this.keymap = keymap;\n\t    InputCatcher.instance = this;\n\t\n\t    document.onmousemove = this.saveMousePos;\n\t    window.document.onkeyup = this.saveKeyPressed;\n\t}, _class.mousePos = {}, _class.keyPressed = [], _temp);\n\texports.default = InputCatcher;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n\n/***/ \"BCEp\":\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\tmodule.exports = {\"hero\":\"Hero__hero__2Sa-c\",\"heroInTrouble\":\"Hero__heroInTrouble__3oF4r\"};\n\n/***/ },\n\n/***/ \"tNBi\":\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\tmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"side\":\"RedSquares__side__1Qama\",\"field\":\"RedSquares__field__3S_U-\",\"threat\":\"RedSquares__threat__3sdY0\"};\n\n/***/ },\n\n/***/ \"7hJZ\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _funcs = __webpack_require__(\"vlrw\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Field = function Field(props) {\n\t    return _react2.default.createElement(\n\t        'div',\n\t        {\n\t            ref: props.refHandler,\n\t            className: props.style,\n\t            style: {\n\t                width: props.width + 'px',\n\t                height: props.height + 'px'\n\t            }\n\t        },\n\t        props.children\n\t    );\n\t};\n\t\n\tField.defaultProps = {\n\t    children: null,\n\t    refHandler: _funcs.noOp,\n\t    width: 640,\n\t    height: 480\n\t};\n\t\n\texports.default = Field;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"vlrw\":\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar noOp = exports.noOp = function noOp() {};\n\n/***/ },\n\n/***/ \"CMFL\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _funcs = __webpack_require__(\"vlrw\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Square = function Square(props) {\n\t    return _react2.default.createElement('div', {\n\t        ref: props.refHandler,\n\t        className: props.style,\n\t        style: {\n\t            width: props.size + 'px',\n\t            height: props.size + 'px',\n\t            top: props.top + 'px',\n\t            left: props.left + 'px'\n\t        }\n\t    });\n\t};\n\t\n\tSquare.defaultProps = {\n\t    refHandler: _funcs.noOp\n\t};\n\t\n\texports.default = Square;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"t9xF\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _Input = __webpack_require__(\"6e+x\");\n\t\n\tvar _Connector = __webpack_require__(\"WS4u\");\n\t\n\tvar _SettersBlock = __webpack_require__(\"tozq\");\n\t\n\tvar StateControl = {\n\t    Input: _Input.Input,\n\t    Connector: _Connector.Connector,\n\t    SettersBlock: _SettersBlock.SettersBlock\n\t};\n\t\n\texports.default = StateControl;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"6e+x\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.Input = undefined;\n\t\n\tvar _class, _temp2;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _utils = __webpack_require__(\"JglD\");\n\t\n\t__webpack_require__(\"WwO4\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar Input = exports.Input = (_temp2 = _class = function (_React$Component) {\n\t    _inherits(Input, _React$Component);\n\t\n\t    function Input() {\n\t        var _temp, _this, _ret;\n\t\n\t        _classCallCheck(this, Input);\n\t\n\t        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t            args[_key] = arguments[_key];\n\t        }\n\t\n\t        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.inner = _this.props.multiLine ? 'textarea' : 'input', _this.id = 'labeled-control-' + _this.props.id, _this.stateName = _this.props.stateName || _this.props.id, _temp), _possibleConstructorReturn(_this, _ret);\n\t    }\n\t\n\t    Input.prototype.render = function render() {\n\t        var _this2 = this;\n\t\n\t        return _react2.default.createElement(\n\t            'div',\n\t            { className: 'labeled-input' },\n\t            _react2.default.createElement(\n\t                'label',\n\t                { htmlFor: this.id },\n\t                this.props.label\n\t            ),\n\t            _react2.default.createElement(this.inner, {\n\t                id: this.id,\n\t                label: this.props.label,\n\t                ref: function ref(control) {\n\t                    _this2.control = control;\n\t                },\n\t                value: this.props.state[this.stateName] || this.props.value,\n\t                readOnly: this.props.readOnly,\n\t                onChange: this.props.onChange(this.stateName),\n\t                onClick: this.props.onClick(this),\n\t                onFocus: this.props.onFocus(this)\n\t            })\n\t        );\n\t    };\n\t\n\t    return Input;\n\t}(_react2.default.Component), _class.defaultProps = {\n\t    value: '',\n\t    onChange: _utils.noOperation,\n\t    onClick: _utils.noOperation,\n\t    onFocus: _utils.noOperation,\n\t    multiLine: false\n\t}, _temp2);\n\n/***/ },\n\n/***/ \"JglD\":\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar noOperation = exports.noOperation = function noOperation() {};\n\n/***/ },\n\n/***/ \"WwO4\":\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ \"WS4u\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.Connector = undefined;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _utils = __webpack_require__(\"JglD\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Connector = exports.Connector = function Connector(props) {\n\t    return _react2.default.createElement(\n\t        'div',\n\t        null,\n\t        _react2.default.Children.map(props.children, function (child) {\n\t            return typeof child.type === 'function' ? _react2.default.cloneElement(child, {\n\t                state: props.state,\n\t                onChange: props.onChange,\n\t                onClick: props.onClick,\n\t                onFocus: props.onFocus\n\t            }) : child;\n\t        })\n\t    );\n\t};\n\t\n\tConnector.defaultProps = {\n\t    state: {},\n\t    onChange: _utils.noOperation,\n\t    onClick: _utils.noOperation,\n\t    onFocus: _utils.noOperation\n\t};\n\n/***/ },\n\n/***/ \"tozq\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\texports.SettersBlock = undefined;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Setter = function Setter(props) {\n\t    return _react2.default.createElement(\n\t        \"div\",\n\t        { className: \"setter\" },\n\t        _react2.default.createElement(\n\t            \"a\",\n\t            { onClick: props.onClick, tabIndex: props.tabIndex },\n\t            props.text\n\t        )\n\t    );\n\t};\n\t\n\tvar SettersBlock = exports.SettersBlock = function SettersBlock(props) {\n\t    return _react2.default.createElement(\n\t        \"div\",\n\t        null,\n\t        props.setters.map(function (setter, index) {\n\t            return _react2.default.createElement(Setter, {\n\t                onClick: function onClick() {\n\t                    return props.setState(setter.params);\n\t                },\n\t                key: index,\n\t                tabIndex: index + props.tabIndexOffset,\n\t                text: setter.text\n\t            });\n\t        })\n\t    );\n\t};\n\t\n\tSettersBlock.defaultProps = {\n\t    tabIndexOffset: 1\n\t};\n\n/***/ },\n\n/***/ \"iMa0\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.moveHero = moveHero;\n\t\n\tvar _hero = __webpack_require__(\"YhS/\");\n\t\n\tvar getHeroStatus = function getHeroStatus(_ref) {\n\t    var x = _ref.x,\n\t        y = _ref.y,\n\t        heroSize = _ref.heroSize,\n\t        threatSize = _ref.threatSize,\n\t        threats = _ref.threats;\n\t\n\t    var safeLength = (heroSize + threatSize) / 2;\n\t    var sizeFix = (threatSize - heroSize) / 2;\n\t\n\t    if (threats.some(function (threat) {\n\t        return Math.abs(threat.x - x + sizeFix) < safeLength && Math.abs(threat.y - y + sizeFix) < safeLength;\n\t    })) {\n\t\n\t        return _hero.heroStates.trouble;\n\t    }\n\t\n\t    return _hero.heroStates.normal;\n\t};\n\t\n\tfunction moveHero(mousePos, field, heroSize, threatSize, threats) {\n\t    var x = Math.max(mousePos.x - heroSize / 2, field.left);\n\t    x = Math.min(x, field.right - heroSize);\n\t    x -= field.left;\n\t    var y = Math.max(mousePos.y - heroSize / 2, field.top);\n\t    y = Math.min(y, field.bottom - heroSize);\n\t    y -= field.top;\n\t\n\t    return {\n\t        hero: {\n\t            x: x,\n\t            y: y,\n\t            status: getHeroStatus({\n\t                x: x,\n\t                y: y,\n\t                heroSize: heroSize,\n\t                threatSize: threatSize,\n\t                threats: threats\n\t            })\n\t        }\n\t    };\n\t}\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// app.0c3d04cd.js","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nrender(<App />, document.querySelector('#app'))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import React from 'react'\r\nimport { combineReducers, applyMiddleware, createStore } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { Provider } from 'react-redux'\r\nimport * as reducers from './reducers'\r\nimport RedSquares from './components/RedSquares'\r\n\r\nconst reducer = combineReducers(reducers)\r\nconst store = createStore(reducer, applyMiddleware(thunk))\r\n\r\nconst App = () => (\r\n    <Provider store={store}>\r\n        <RedSquares />\r\n    </Provider>\r\n)\r\n\r\nexport default App\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","export { default as game } from './game'\r\nexport { default as hero } from './hero'\r\nexport { default as threats } from './threats'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/index.js","import * as types from '../constants/actionTypes'\r\nimport { defaults, gameStatus } from '../constants/game'\r\nimport { heroStates } from '../constants/hero'\r\n\r\nconst initialState = {\r\n    status: gameStatus.stop,\r\n    beats: 0,\r\n    outs: 0,\r\n    frame: 0,\r\n    frameLength: defaults.frameLength, // TODO move to constants when it will defined\r\n    fieldWidth: defaults.fieldWidth,\r\n    fieldHeight: defaults.fieldHeight,\r\n    sideWidth: defaults.sideWidth,\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status,\r\n            }\r\n        case types.START_NEW:\r\n            return {\r\n                ...state,\r\n                status: gameStatus.play,\r\n                beats: 0,\r\n                outs: 0,\r\n                frame: 0,\r\n            }\r\n        case types.UPDATE_FRAME:\r\n            return {\r\n                ...state,\r\n                status: action.hero.status === heroStates.normal ? gameStatus.play : gameStatus.stop,\r\n                beats: state.beats + action.beats,\r\n                outs: state.outs + action.outs,\r\n                frame: state.frame + 1,\r\n            }\r\n        case types.SET_GAME_STATE:\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/game.js","export const SET_STATUS = 'SET_STATUS'\r\nexport const START_NEW = 'START_NEW'\r\nexport const UPDATE_FRAME = 'UPDATE_FRAME'\r\nexport const SET_GAME_STATE = 'SET_GAME_STATE'\r\nexport const SET_HERO_STATE = 'SET_HERO_STATE'\r\nexport const SET_THREATS_STATE = 'SET_THREATS_STATE'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/actionTypes.js","export const defaults = {\r\n    frameLength: 20,\r\n    heroSize: 50,\r\n    threatSize: 30,\r\n    threatLimit: 20,\r\n    threatAddTimeout: 1000,\r\n    threatRemoveProbability: 5,\r\n    fieldWidth: 800,\r\n    fieldHeight: 600,\r\n    sideWidth: 200,\r\n}\r\n\r\nexport const gameStatus = {\r\n    play: 'play',\r\n    pause: 'pause',\r\n    stop: 'stop',\r\n}\r\n\r\nexport const buttonName = {\r\n    [gameStatus.play]: 'Pause',\r\n    [gameStatus.pause]: 'Resume',\r\n    [gameStatus.stop]: 'Start',\r\n}\r\n\r\nexport const IDS = {\r\n    frameLength: 'frameLength',\r\n    heroSize: 'heroSize',\r\n    threatSize: 'threatSize',\r\n    threatLimit: 'threatLimit',\r\n    threatAddTimeout: 'threatAddTimeout',\r\n    threatRemoveProbability: 'threatRemoveProbability',\r\n    fieldWidth: 'fieldWidth',\r\n    fieldHeight: 'fieldHeight',\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/game.js","export const heroStates = {\r\n    normal: 'normal',\r\n    trouble: 'trouble',\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/hero.js","import * as types from '../constants/actionTypes'\r\nimport { defaults } from '../constants/game'\r\nimport { heroStates } from '../constants/hero'\r\n\r\nconst initialState = {\r\n    x: (defaults.fieldWidth - defaults.heroSize) / 2,\r\n    y: (defaults.fieldHeight - defaults.heroSize) / 2,\r\n    status: heroStates.normal,\r\n    size: defaults.heroSize,\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.UPDATE_FRAME:\r\n            return {\r\n                ...state,\r\n                ...action.hero,\r\n            }\r\n        case types.SET_HERO_STATE:\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/hero.js","import * as types from '../constants/actionTypes'\r\nimport { defaults } from '../constants/game'\r\n\r\nconst initialState = {\r\n    threats: [],\r\n    size: defaults.threatSize,\r\n    lastTime: 0,\r\n    addTimeout: defaults.threatAddTimeout,\r\n    index: 0,\r\n    limit: defaults.threatLimit,\r\n    removeProbability: defaults.threatRemoveProbability,\r\n    maxSpeed: 4,\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.START_NEW:\r\n            return {\r\n                ...state,\r\n                threats: [],\r\n                lastTime: action.lastTime,\r\n            }\r\n        case types.UPDATE_FRAME:\r\n            return {\r\n                ...state,\r\n                threats: action.threats,\r\n                index: state.index + action.added,\r\n                lastTime: action.lastTime,\r\n            }\r\n        case types.SET_THREATS_STATE:\r\n            return {\r\n                ...state,\r\n                ...action.data,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/threats.js","import React, { PropTypes } from 'react'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport * as actions from '../actions'\r\nimport { gameStatus, buttonName, IDS } from '../constants/game'\r\nimport { heroStates } from '../constants/hero'\r\nimport InputCatcher from '../utils/InputCatcher'\r\nimport heroStyle from '../components/Hero.less'\r\nimport style from './RedSquares.less'\r\nimport Field from './Field'\r\nimport Square from './Square'\r\nimport StateControl from './StateControl'\r\n\r\nconst heroStyleMap = {\r\n    [heroStates.normal]: heroStyle.hero,\r\n    [heroStates.trouble]: heroStyle.heroInTrouble,\r\n}\r\n\r\n@connect(\r\n    (state) => ({\r\n        status: state.game.status,\r\n        frameLength: state.game.frameLength,\r\n        fieldWidth: state.game.fieldWidth,\r\n        fieldHeight: state.game.fieldHeight,\r\n        sideWidth: state.game.sideWidth,\r\n        heroStatus: state.hero.status,\r\n        heroSize: state.hero.size,\r\n        heroPos: {\r\n            x: state.hero.x,\r\n            y: state.hero.y,\r\n        },\r\n        threatSize: state.threats.size,\r\n        threats: state.threats.threats,\r\n        beats: state.game.beats,\r\n        outs: state.game.outs,\r\n        threatLimit: state.threats.limit,\r\n        threatAddTimeout: state.threats.addTimeout,\r\n        threatRemoveProbability: state.threats.removeProbability,\r\n    }),\r\n    (dispatch) => bindActionCreators({\r\n        processSpacePress: actions.game.processSpacePress,\r\n        updateFrame: actions.game.updateFrame,\r\n        setState: actions.game.setState,\r\n    }, dispatch)\r\n)\r\nexport default class RedSquares extends React.Component {\r\n    static propTypes = {\r\n        status: PropTypes.oneOf(Object.values(gameStatus)),\r\n        frameLength: PropTypes.number,\r\n        processSpacePress: PropTypes.func,\r\n        updateFrame: PropTypes.func,\r\n        setState: PropTypes.func,\r\n        fieldWidth: PropTypes.number,\r\n        fieldHeight: PropTypes.number,\r\n        sideWidth: PropTypes.number,\r\n        heroStatus: PropTypes.oneOf(Object.values(heroStates)),\r\n        heroSize: PropTypes.number,\r\n        heroPos: PropTypes.shape({\r\n            x: PropTypes.number,\r\n            y: PropTypes.number,\r\n        }),\r\n        threatSize: PropTypes.number,\r\n        threats: PropTypes.array,\r\n        beats: PropTypes.number,\r\n        outs: PropTypes.number,\r\n        threatLimit: PropTypes.number,\r\n        threatAddTimeout: PropTypes.number,\r\n        threatRemoveProbability: PropTypes.number,\r\n    }\r\n\r\n    constructor (props) {\r\n        super(props)\r\n        this.inputCatcher = new InputCatcher({\r\n            ' ': this.props.processSpacePress,\r\n        })\r\n\r\n        setInterval(this.tick, this.props.frameLength)\r\n    }\r\n\r\n    tick = () => {\r\n        this.inputCatcher.reactToKeys()\r\n        this.props.updateFrame(InputCatcher.mousePos, this.getFieldSize())\r\n    }\r\n\r\n    getFieldSize = () => {\r\n        const fieldRect = this.field\r\n        // TODO check and browsers and rewrite like https://learn.javascript.ru/coordinates-document\r\n        return {\r\n            left: fieldRect.offsetLeft,\r\n            top: fieldRect.offsetTop,\r\n            right: fieldRect.offsetLeft + fieldRect.clientWidth,\r\n            bottom: fieldRect.offsetTop + fieldRect.clientHeight,\r\n        }\r\n    }\r\n\r\n    getS = (name, num) => (num || 'No') + ' ' + name + (num !== 1 ? 's' : '')\r\n\r\n    changeHandler = (state) => (event) => {\r\n        const initialValue = event.target.value\r\n        let value\r\n\r\n        switch (state) {\r\n            default:\r\n                value = parseInt(initialValue, 10) || 1\r\n        }\r\n        this.props.setState(state, value)\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div className={style.wrapper} style={{ width: `${this.props.fieldWidth + this.props.sideWidth}px` }}>\r\n                <Field\r\n                    style={style.field}\r\n                    refHandler={(elem) => { this.field = elem }}\r\n                    width={this.props.fieldWidth}\r\n                    height={this.props.fieldHeight}\r\n                >\r\n                    <Square\r\n                        style={heroStyleMap[this.props.heroStatus]}\r\n                        size={this.props.heroSize}\r\n                        left={this.props.heroPos.x}\r\n                        top={this.props.heroPos.y}\r\n                    />\r\n                    {this.props.threats.map((threat) => (\r\n                        <Square\r\n                            key={threat.id}\r\n                            style={style.threat}\r\n                            size={this.props.threatSize}\r\n                            left={threat.x}\r\n                            top={threat.y}\r\n                        />\r\n                    ))}\r\n                </Field>\r\n                <div className={style.side} style={{ width: `${this.props.sideWidth}px` }}>\r\n                    <button onClick={this.props.processSpacePress}>{buttonName[this.props.status]}</button>\r\n                    {' (Press Space)'}\r\n                    <h2>{this.getS('beat', this.props.beats)}</h2>\r\n                    <h2>{this.getS('out', this.props.outs)}</h2>\r\n                    <p>{this.getS('threat', this.props.threats.length)} on field</p>\r\n\r\n                    <StateControl.Connector\r\n                        state={this.props}\r\n                        onChange={this.changeHandler}\r\n                    >\r\n                        <StateControl.Input\r\n                            id={IDS.frameLength}\r\n                            label=\"Frame length (ms)\"\r\n                        />\r\n                        <StateControl.Input\r\n                            id={IDS.heroSize}\r\n                            label=\"Hero size (px)\"\r\n                        />\r\n                        <StateControl.Input\r\n                            id={IDS.threatSize}\r\n                            label=\"Threat size (px)\"\r\n                        />\r\n                        <StateControl.Input\r\n                            id={IDS.threatLimit}\r\n                            label=\"Threat limit\"\r\n                        />\r\n                        <StateControl.Input\r\n                            id={IDS.threatAddTimeout}\r\n                            label=\"Threat add timeout (ms)\"\r\n                        />\r\n                        <StateControl.Input\r\n                            id={IDS.threatRemoveProbability}\r\n                            label=\"Threat remove probability (1/x)\"\r\n                        />\r\n                        <StateControl.Input\r\n                            id={IDS.fieldWidth}\r\n                            label=\"Field width (px)\"\r\n                        />\r\n                        <StateControl.Input\r\n                            id={IDS.fieldHeight}\r\n                            label=\"Field height (px)\"\r\n                        />\r\n                    </StateControl.Connector>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RedSquares.js","import * as game from './game'\r\n\r\nexport {\r\n    game,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/index.js","import * as types from '../constants/actionTypes'\r\nimport { gameStatus, IDS } from '../constants/game'\r\nimport { controlThreats } from '../game-logic/threats'\r\nimport { moveHero } from '../game-logic/hero'\r\n\r\nexport function processSpacePress () {\r\n    return (dispatch, getState) => {\r\n        switch (getState().game.status) {\r\n            case gameStatus.play:\r\n                dispatch({\r\n                    type: types.SET_STATUS,\r\n                    status: gameStatus.pause,\r\n                })\r\n                break\r\n            case gameStatus.pause:\r\n                dispatch({\r\n                    type: types.SET_STATUS,\r\n                    status: gameStatus.play,\r\n                })\r\n                break\r\n            case gameStatus.stop:\r\n            default:\r\n                dispatch({\r\n                    type: types.START_NEW,\r\n                    lastTime: 0 - getState().threats.addTimeout / getState().game.frameLength,\r\n                })\r\n        }\r\n    }\r\n}\r\n\r\nexport function updateFrame (mousePos, field) {\r\n    return (dispatch, getState) => {\r\n        const state = getState()\r\n\r\n        if (state.game.status === gameStatus.play) {\r\n            const controlled = controlThreats(\r\n                state.threats.threats,\r\n                state.threats.removeProbability,\r\n                state.threats.limit,\r\n                state.game.frame,\r\n                state.threats.lastTime,\r\n                state.threats.addTimeout,\r\n                state.game.frameLength,\r\n                state.threats.size,\r\n                state.threats.index,\r\n                state.game.fieldWidth,\r\n                state.game.fieldHeight,\r\n                state.threats.maxSpeed,\r\n            )\r\n            dispatch({\r\n                type: types.UPDATE_FRAME,\r\n                ...controlled,\r\n                ...moveHero(\r\n                    mousePos,\r\n                    field,\r\n                    state.hero.size,\r\n                    state.threats.size,\r\n                    controlled.threats,\r\n                ),\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport function setState (name, value) {\r\n    return (dispatch) => {\r\n        switch (name) {\r\n            case IDS.frameLength:\r\n            case IDS.fieldWidth:\r\n            case IDS.fieldHeight:\r\n                dispatch({\r\n                    type: types.SET_GAME_STATE,\r\n                    data: {\r\n                        [name]: value,\r\n                    },\r\n                })\r\n                break\r\n            case IDS.heroSize:\r\n                dispatch({\r\n                    type: types.SET_HERO_STATE,\r\n                    data: {\r\n                        size: value,\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatSize:\r\n                dispatch({\r\n                    type: types.SET_THREATS_STATE,\r\n                    data: {\r\n                        size: value,\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatLimit:\r\n                dispatch({\r\n                    type: types.SET_THREATS_STATE,\r\n                    data: {\r\n                        limit: value,\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatAddTimeout:\r\n                dispatch({\r\n                    type: types.SET_THREATS_STATE,\r\n                    data: {\r\n                        addTimeout: value,\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatRemoveProbability:\r\n                dispatch({\r\n                    type: types.SET_THREATS_STATE,\r\n                    data: {\r\n                        removeProbability: value,\r\n                    },\r\n                })\r\n                break\r\n            default:\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/game.js","const processSpeed = ({ newThreat, size, canFlyAway }) => ({ axis, lean }) => {\r\n    newThreat.isGoingOut = Math.sign(lean) === Math.sign(newThreat.speed[axis])\r\n\r\n    if (!newThreat.isOut) {\r\n        if (canFlyAway && newThreat.isGoingOut) {\r\n            newThreat.isOut = true\r\n        } else {\r\n            newThreat.speed[axis] = (newThreat.isGoingOut ? -1 : 1) * (newThreat.speed[axis] || 1)\r\n        }\r\n    }\r\n    if (Math.abs(lean) > size * 2) {\r\n        newThreat.isAroundField = false\r\n    }\r\n\r\n    return newThreat\r\n}\r\n\r\nconst beat = ({\r\n    removeProbability,\r\n    size,\r\n    fieldWidth,\r\n    fieldHeight,\r\n}) => (threat) => {\r\n    let newThreat = { ...threat }\r\n    const canFlyAway = Math.random() < 1 / removeProbability\r\n    const processThreat = processSpeed({ newThreat, size, canFlyAway })\r\n\r\n    if (newThreat.x < 0) {\r\n        newThreat = processThreat({\r\n            axis: 'x',\r\n            lean: newThreat.x,\r\n        })\r\n    }\r\n    const rightBorder = fieldWidth - size\r\n    if (newThreat.x > rightBorder) {\r\n        newThreat = processThreat({\r\n            axis: 'x',\r\n            lean: newThreat.x - rightBorder,\r\n        })\r\n    }\r\n\r\n    if (newThreat.y < 0) {\r\n        newThreat = processThreat({\r\n            axis: 'y',\r\n            lean: newThreat.y,\r\n        })\r\n    }\r\n    const bottomBorder = fieldHeight - size\r\n    if (newThreat.y > bottomBorder) {\r\n        newThreat = processThreat({\r\n            axis: 'y',\r\n            lean: newThreat.y - bottomBorder,\r\n        })\r\n    }\r\n\r\n    return newThreat\r\n}\r\n\r\nconst newThreat = ({ size, index, fieldWidth, fieldHeight, maxSpeed }) => {\r\n    let x = Math.round(Math.random() * (fieldWidth - size))\r\n    let y = 0 - size\r\n    let speed = {\r\n        x: Math.round((Math.random() * 2 - 1) * maxSpeed),\r\n        y: Math.ceil(Math.random() * maxSpeed),\r\n    }\r\n\r\n    if (Math.random() < 0.5) {\r\n        x = 0 - size\r\n        y = Math.round(Math.random() * (fieldHeight - size))\r\n        speed = {\r\n            x: Math.ceil(Math.random() * maxSpeed),\r\n            y: Math.round((Math.random() * 2 - 1) * maxSpeed),\r\n        }\r\n\r\n        if (Math.random() < 0.5) {\r\n            x = fieldWidth\r\n            speed.x *= -1\r\n        }\r\n    } else if (Math.random() < 0.5) {\r\n        y = fieldHeight\r\n        speed.y *= -1\r\n    }\r\n    return {\r\n        id: index,\r\n        x,\r\n        y,\r\n        speed,\r\n        isOut: false,\r\n        isAroundField: true,\r\n    }\r\n}\r\n\r\nexport function controlThreats (\r\n    threats,\r\n    removeProbability,\r\n    limit,\r\n    frame,\r\n    lastTime,\r\n    addTimeout,\r\n    frameLength,\r\n    size,\r\n    index,\r\n    fieldWidth,\r\n    fieldHeight,\r\n    maxSpeed,\r\n) {\r\n    threats = threats\r\n        .map((threat) => (\r\n            {\r\n                ...threat,\r\n                x: threat.x + threat.speed.x,\r\n                y: threat.y + threat.speed.y,\r\n            }\r\n        ))\r\n        .map(beat({\r\n            removeProbability,\r\n            size,\r\n            fieldWidth,\r\n            fieldHeight,\r\n        }))\r\n    const oldThreatsNum = threats.length\r\n    threats = threats.filter((threat) => threat.isAroundField)\r\n    const outs = oldThreatsNum - threats.length\r\n\r\n    let beats = 0\r\n\r\n    threats = threats.map((threat) => {\r\n        if (threat.isGoingOut && !threat.isOut) {\r\n            beats += 1\r\n            delete threat.isGoingOut\r\n        }\r\n\r\n        return threat\r\n    })\r\n\r\n    let added = 0\r\n    if (threats.length < limit && frame >= lastTime + (addTimeout / frameLength)) {\r\n        threats.push(newThreat({ size, index, fieldWidth, fieldHeight, maxSpeed }))\r\n        added = 1\r\n        lastTime = frame\r\n    }\r\n\r\n    return {\r\n        threats,\r\n        beats,\r\n        outs,\r\n        added,\r\n        lastTime,\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/threats.js","export default class InputCatcher {\r\n    static instance\r\n    static mousePos = {}\r\n    static keyPressed = []\r\n    keymap = []\r\n\r\n    constructor (keymap) {\r\n        if (InputCatcher.instance) {\r\n            return InputCatcher.instance\r\n        }\r\n\r\n        this.keymap = keymap\r\n        InputCatcher.instance = this\r\n\r\n        document.onmousemove = this.saveMousePos\r\n        window.document.onkeyup = this.saveKeyPressed\r\n    }\r\n\r\n    saveMousePos = (e) => {\r\n        InputCatcher.mousePos = {\r\n            x: e.pageX,\r\n            y: e.pageY,\r\n        }\r\n    }\r\n\r\n    saveKeyPressed = ({ key }) => InputCatcher.keyPressed.push(key)\r\n\r\n    reactToKeys = () => {\r\n        InputCatcher.keyPressed.forEach((key) => this.keymap[key] && this.keymap[key]())\r\n        InputCatcher.keyPressed = []\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/InputCatcher.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"hero\":\"Hero__hero__2Sa-c\",\"heroInTrouble\":\"Hero__heroInTrouble__3oF4r\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Hero.less\n// module id = BCEp\n// module chunks = 0","// removed by extract-text-webpack-plugin\nmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"side\":\"RedSquares__side__1Qama\",\"field\":\"RedSquares__field__3S_U-\",\"threat\":\"RedSquares__threat__3sdY0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RedSquares.less\n// module id = tNBi\n// module chunks = 0","import React, { PropTypes } from 'react'\r\nimport { noOp } from '../utils/funcs'\r\n\r\nconst Field = (props) => (\r\n    <div\r\n        ref={props.refHandler}\r\n        className={props.style}\r\n        style={{\r\n            width: `${props.width}px`,\r\n            height: `${props.height}px`,\r\n        }}\r\n    >\r\n        {props.children}\r\n    </div>\r\n)\r\n\r\nField.propTypes = {\r\n    style: PropTypes.string.isRequired,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.array,\r\n    ]),\r\n    refHandler: PropTypes.func,\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n}\r\n\r\nField.defaultProps = {\r\n    children: null,\r\n    refHandler: noOp,\r\n    width: 640,\r\n    height: 480,\r\n}\r\n\r\nexport default Field\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Field.js","export const noOp = () => {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/funcs.js","import React, { PropTypes } from 'react'\r\nimport { noOp } from '../utils/funcs'\r\n\r\nconst Square = (props) => (\r\n    <div\r\n        ref={props.refHandler}\r\n        className={props.style}\r\n        style={{\r\n            width: `${props.size}px`,\r\n            height: `${props.size}px`,\r\n            top: `${props.top}px`,\r\n            left: `${props.left}px`,\r\n        }}\r\n    />\r\n)\r\n\r\nSquare.propTypes = {\r\n    top: PropTypes.number.isRequired,\r\n    left: PropTypes.number.isRequired,\r\n    size: PropTypes.number.isRequired,\r\n    style: PropTypes.string.isRequired,\r\n    refHandler: PropTypes.func,\r\n}\r\n\r\nSquare.defaultProps = {\r\n    refHandler: noOp,\r\n}\r\n\r\nexport default Square\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Square.js","import { Input } from './Input'\r\nimport { Connector } from './Connector'\r\nimport { SettersBlock } from './SettersBlock'\r\n\r\nconst StateControl = {\r\n    Input,\r\n    Connector,\r\n    SettersBlock,\r\n}\r\n\r\nexport default StateControl\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/index.js","import React, { PropTypes } from 'react'\r\nimport { noOperation } from './utils'\r\nimport './Input.css'\r\n\r\nexport class Input extends React.Component {\r\n    static propTypes = {\r\n        id: PropTypes.string.isRequired,\r\n        label: PropTypes.string.isRequired,\r\n        state: PropTypes.object,\r\n        stateName: PropTypes.string,\r\n        value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        readOnly: PropTypes.bool,\r\n        onChange: PropTypes.func,\r\n        onClick: PropTypes.func,\r\n        onFocus: PropTypes.func,\r\n        multiLine: PropTypes.bool,\r\n    }\r\n\r\n    static defaultProps = {\r\n        value: '',\r\n        onChange: noOperation,\r\n        onClick: noOperation,\r\n        onFocus: noOperation,\r\n        multiLine: false,\r\n    }\r\n\r\n    inner = this.props.multiLine ? 'textarea' : 'input'\r\n    id = `labeled-control-${this.props.id}`\r\n    stateName = this.props.stateName || this.props.id\r\n\r\n    render () {\r\n        return (\r\n            <div className=\"labeled-input\">\r\n                <label htmlFor={this.id}>{this.props.label}</label>\r\n                <this.inner\r\n                    id={this.id}\r\n                    label={this.props.label}\r\n                    ref={(control) => { this.control = control }}\r\n                    value={this.props.state[this.stateName] || this.props.value}\r\n                    readOnly={this.props.readOnly}\r\n                    onChange={this.props.onChange(this.stateName)}\r\n                    onClick={this.props.onClick(this)}\r\n                    onFocus={this.props.onFocus(this)}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/Input.jsx","export const noOperation = () => {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/utils.js","import React, { PropTypes } from 'react'\r\nimport { noOperation } from './utils'\r\n\r\nexport const Connector = (props) => (\r\n    <div>\r\n        {React.Children.map(\r\n            props.children,\r\n            (child) => (\r\n                typeof child.type === 'function'\r\n                    ? React.cloneElement(child, {\r\n                        state: props.state,\r\n                        onChange: props.onChange,\r\n                        onClick: props.onClick,\r\n                        onFocus: props.onFocus,\r\n                    })\r\n                    : child\r\n            )\r\n        )}\r\n    </div>\r\n)\r\n\r\nConnector.propTypes = {\r\n    state: PropTypes.object,\r\n    onChange: PropTypes.func,\r\n    onClick: PropTypes.func,\r\n    onFocus: PropTypes.func,\r\n    children: PropTypes.array,\r\n}\r\n\r\nConnector.defaultProps = {\r\n    state: {},\r\n    onChange: noOperation,\r\n    onClick: noOperation,\r\n    onFocus: noOperation,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/Connector.jsx","import React, { PropTypes } from 'react'\r\n\r\nconst Setter = (props) => (\r\n    <div className=\"setter\">\r\n        <a onClick={props.onClick} tabIndex={props.tabIndex}>{props.text}</a>\r\n    </div>\r\n)\r\n\r\nSetter.propTypes = {\r\n    text: PropTypes.string,\r\n    tabIndex: PropTypes.number,\r\n    onClick: PropTypes.func,\r\n}\r\n\r\nexport const SettersBlock = (props) => (\r\n    <div>\r\n        {props.setters.map((setter, index) => (\r\n            <Setter\r\n                onClick={() => props.setState(setter.params)}\r\n                key={index}\r\n                tabIndex={index + props.tabIndexOffset}\r\n                text={setter.text}\r\n            />\r\n        ))}\r\n    </div>\r\n)\r\n\r\nSettersBlock.propTypes = {\r\n    setters: PropTypes.array.isRequired,\r\n    setState: PropTypes.func.isRequired,\r\n    tabIndexOffset: PropTypes.number,\r\n}\r\n\r\nSettersBlock.defaultProps = {\r\n    tabIndexOffset: 1,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/SettersBlock.jsx","import { heroStates } from '../constants/hero'\r\n\r\nconst getHeroStatus = ({\r\n    x,\r\n    y,\r\n    heroSize,\r\n    threatSize,\r\n    threats,\r\n}) => {\r\n    const safeLength = (heroSize + threatSize) / 2\r\n    const sizeFix = (threatSize - heroSize) / 2\r\n\r\n    if (threats.some((threat) =>\r\n            Math.abs(threat.x - x + sizeFix) < safeLength && Math.abs(threat.y - y + sizeFix) < safeLength\r\n        )) {\r\n\r\n        return heroStates.trouble\r\n    }\r\n\r\n    return heroStates.normal\r\n}\r\n\r\nexport function moveHero (\r\n    mousePos,\r\n    field,\r\n    heroSize,\r\n    threatSize,\r\n    threats,\r\n) {\r\n    let x = Math.max(mousePos.x - heroSize / 2, field.left)\r\n    x = Math.min(x, field.right - heroSize)\r\n    x -= field.left\r\n    let y = Math.max(mousePos.y - heroSize / 2, field.top)\r\n    y = Math.min(y, field.bottom - heroSize)\r\n    y -= field.top\r\n\r\n    return {\r\n        hero: {\r\n            x,\r\n            y,\r\n            status: getHeroStatus({\r\n                x,\r\n                y,\r\n                heroSize,\r\n                threatSize,\r\n                threats,\r\n            }),\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/hero.js"],"sourceRoot":""}