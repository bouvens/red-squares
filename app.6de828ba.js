webpackJsonp([1,2],{0:function(e,t,r){r("+prg"),e.exports=r("lVK7")},"1+5B":function(e,t,r){"use strict";function n(e,t,r,n){for(var a=0,i=void 0,s=void 0,u=o(t,r,e),c=e;c<t-e;c+=e)for(var l=e;l<r-e;l+=e){var f=u({x:c,y:l},n);f>a&&(a=f,i=c,s=l)}return{x:i,y:s}}var a=r("hReJ"),o=function(e,t,n){return function(o,i){var s=o.x,u=o.y;return Math.min(r.i(a.a)({x:s,y:u},i).distance,s+n,e+n-s,u+n,t+n-u)}};t.a=function(e){var t=e.game,i=e.hero,s=e.threats,u=s.threats.map(function(e){return{x:e.x+e.speed.x,y:e.y+e.speed.y}}),c=i.size+s.size,l=o(t.fieldWidth,t.fieldHeight,c),f=l(i,u);if(f>r.i(a.b)(i,s))return n(c,t.fieldWidth,t.fieldHeight,u);var h=r.i(a.c)(i).reduce(function(e,t){var r=l(t,u);return r>e.distance?{x:t.x,y:t.y,distance:r}:e},{x:i.x,y:i.y,distance:f});return{x:h.x,y:h.y}}},"2ICE":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,u=r("U7vG"),c=r.n(u),l=r("kQSo"),f=r("qrPN"),h=r("oW9P"),p=(r.n(h),s=i=function(e){function t(){return n(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){return c.a.createElement("div",{className:"labeled-check"},c.a.createElement("input",{id:this.props.id,type:"checkbox",ref:this.props.refHandler(this),checked:this.props.value,readOnly:this.props.readOnly,onChange:this.props.onChange,onClick:this.props.onClick(this),onFocus:this.props.onFocus(this)}),c.a.createElement("label",{htmlFor:this.props.id},this.props.label))},t}(c.a.PureComponent),i.defaultProps={id:"",value:!1,label:"",readOnly:!1,onChange:f.a,onClick:f.a,onFocus:f.a,multiLine:!1,refHandler:f.a},s);t.a=r.i(l.a)(p)},"2RiJ":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,u=r("U7vG"),c=r.n(u),l=r("kQSo"),f=r("qrPN"),h=r("oSbc"),p=(r.n(h),s=i=function(e){function t(){return n(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this.props.multiLine?"textarea":"input";return c.a.createElement("div",{className:"labeled-input"},c.a.createElement("label",{htmlFor:this.props.id},this.props.label),c.a.createElement(e,{id:this.props.id,ref:this.props.refHandler(this),value:this.props.value,readOnly:this.props.readOnly,onChange:this.props.onChange,onClick:this.props.onClick(this),onFocus:this.props.onFocus(this)}))},t}(c.a.PureComponent),i.defaultProps={id:"",value:"",label:"",readOnly:!1,onChange:f.a,onClick:f.a,onFocus:f.a,multiLine:!1,refHandler:f.a},s);t.a=r.i(l.a)(p)},"4HHy":function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"a",function(){return a});var n="INIT",a="SET_STATE"},"7lKn":function(e,t,r){"use strict";function n(e){var t=e.threats,r=e.game,n=r.frame,a=r.fieldWidth,i=r.fieldHeight,c=s.a.frameLength,h=t.threats.map(function(e){return u({},e,{x:e.x+e.speed.x,y:e.y+e.speed.y})}).map(l(t.removeProbability,t.size,a,i)),p=h.length;h=h.filter(function(e){return e.isAroundField});var d=p-h.length,m=0;h=h.map(function(e){return e.isGoingOut&&!e.isOut&&(m+=1,delete e.isGoingOut),e},0);var y=0;h.length<t.limit&&n>=t.lastTime+t.addTimeout/c&&(h.push(f(t.size,t.index,a,i,t.maxSpeed)),y=1);var v=o.a.merge({},e,{game:{beats:e.game.beats+m,outs:e.game.outs+d},threats:{lastTime:y?n:t.lastTime,index:t.index+y}});return v.threats.threats=h,v}var a=r("M4fF"),o=r.n(a),i=r("vlrw"),s=r("bHK7");t.a=n;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(e,t,n){return function(a,o){return e.isGoingOut=r.i(i.b)(o)===r.i(i.b)(e.speed[a]),e.isOut||(n&&e.isGoingOut?e.isOut=!0:e.speed[a]=(e.isGoingOut?-1:1)*(e.speed[a]||1)),Math.abs(o)>3*t&&(e.isAroundField=!1),e}},l=function(e,t,r,n){return function(a){var o=u({},a),i=Math.random()<1/e,s=c(o,t,i),l=t;o.x<l&&(o=s("x",o.x-l));var f=r-t;o.x>f&&(o=s("x",o.x-f));var h=t;o.y<h&&(o=s("y",o.y-h));var p=n-t;return o.y>p&&(o=s("y",o.y-p)),o}},f=function(e,t,r,n,a){var o=2*e,i=Math.round(Math.random()*(r-o)),s=0-o,u={x:Math.round((2*Math.random()-1)*a),y:Math.ceil(Math.random()*a)};return Math.random()<.5?(i=0-o,s=Math.round(Math.random()*(n-o)),u={x:Math.ceil(Math.random()*a),y:Math.round((2*Math.random()-1)*a)},Math.random()<.5&&(i=r,u.x*=-1)):Math.random()<.5&&(s=n,u.y*=-1),{id:t,x:i,y:s,speed:u,isOut:!1,isAroundField:!0}}},"9IwA":function(e,t){},"9jEl":function(e,t,r){"use strict";var n=r("M4fF"),a=r.n(n),o=r("4HHy"),i=r("ZB46"),s=r("bHK7"),u={redSquares:null,inputController:null,manager:a.a.findKey(i,function(e){return e===i.Stable}),status:s.d.stop,autoRestart:!0,beats:0,highestBeats:0,outs:0,frame:0,frameTime:0,normalSpeed:!1,fieldWidth:s.a.fieldWidth,fieldHeight:s.a.fieldHeight,error:""};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case o.b:return a.a.extend({},e,t.data);case o.a:return a.a.extend({},e,t.data.game);default:return e}}},Aaru:function(e,t,r){"use strict";var n=r("U7vG"),a=r.n(n),o=r("qrPN"),i=function(e){var t=e.text,r=e.tabIndex,n=e.onClick;return a.a.createElement("div",{className:"setter"},a.a.createElement("a",{onClick:n,tabIndex:r},t))};i.defaultProps={text:"",tabIndex:-1,onClick:o.a},function(e){var t=e.setters,r=e.setState,n=e.tabIndexOffset,o=0;return a.a.createElement("div",{className:"setters-block"},t.map(function(e){return o+=1,a.a.createElement(i,{onClick:function(){return r(e.params)},key:o,tabIndex:o+n,text:e.text})}))}.defaultProps={tabIndexOffset:1}},BCOr:function(e,t,r){"use strict";var n=r("hB/+"),a=r("ZvXP");r.d(t,"a",function(){return n}),r.d(t,"b",function(){return a})},CfS3:function(e,t,r){"use strict";var n=r("M4fF"),a=r.n(n),o=r("vlrw"),i=r("hReJ");t.a=function(e){var t=e.game,n=e.hero,s=e.threats,u=r.i(i.d)(n,2*s.size,t.fieldWidth,t.fieldHeight),c=s.threats.map(function(e){return{x:e.x+e.speed.x,y:e.y+e.speed.y}}),l=a.a.extend(u,c),f=r.i(i.a)(n,l);if(!f.threat||f.distance>r.i(i.b)(n,s))return o.a;var h=r.i(i.c)(n).reduce(function(e,t){var n=r.i(i.a)(t,l),a=n.distance;return a>e.distance?{x:t.x,y:t.y,distance:a}:e},{x:n.x,y:n.y,distance:f.distance});return{x:h.x,y:h.y}}},ChGC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("9jEl");r.d(t,"game",function(){return n.a});var a=r("ZJmM");r.d(t,"hero",function(){return a.a});var o=r("WNaE");r.d(t,"threats",function(){return o.a})},DBoO:function(e,t,r){"use strict";var n=r("M4fF"),a=r.n(n),o=r("vlrw"),i=r("hReJ");t.a=function(e){var t=e.game,n=e.hero,s=e.threats,u=r.i(i.d)(n,2*s.size,t.fieldWidth,t.fieldHeight),c=r.i(i.a)(n,a.a.extend(u,s.threats));if(!c.threat||c.distance>2*r.i(i.b)(n,s))return o.a;var l={x:n.x-c.threat.x,y:n.y-c.threat.y};return{x:n.x+l.x,y:n.y+l.y}}},EACi:function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var a=r("U7vG"),o=r.n(a);r.d(t,"a",function(){return s});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(e){var t=e.children,r=n(e,["children"]);return o.a.createElement("div",{className:"controlled-connector"},o.a.Children.map(t,function(e){return"function"==typeof e.type?o.a.createElement(e.type,i({},r,e.props)):e}))}},EBfR:function(e,t,r){"use strict";function n(e){switch(e.game.status){case l.d.play:return m(e,l.d.pause);case l.d.pause:return m(e,l.d.play);case l.d.stop:default:return d({},e,{game:d({},e.game,{status:l.d.play,beats:0,outs:0,frame:0,error:""}),hero:d({},e.hero,f.a),threats:d({},e.threats,{threats:[],lastTime:0-e.threats.addTimeout/l.a.frameLength})})}}function a(e){var t=d({},e);if(t.game.autoRestart&&t.game.status===l.d.stop)t=n(t);else{var r;t.game.inputController.reactToKeys((r={},r[l.f.space]=function(){t=n(t)},r))}return t}function o(e){var t=d({},e,{target:c[e.game.manager](e)});return(isNaN(t.target.x)||isNaN(t.target.y))&&(t.game.error="Bad target",t.target={x:t.hero.x,y:t.hero.y}),t}function i(e){var t=a(e);return t.game.status===l.d.play&&(t=y(t),t.game.frame+=1),t}var s=r("M4fF"),u=r.n(s),c=r("ZB46"),l=r("bHK7"),f=r("vlrw"),h=r("iMa0"),p=r("7lKn");t.a=n,t.b=i;var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m=function(e,t){return u.a.merge({},e,{game:{status:t}})},y=r.i(f.c)(o,p.a,h.a)},J2UN:function(e,t,r){"use strict";var n=r("EBfR");r.d(t,"a",function(){return n.a}),r.d(t,"b",function(){return n.b});r("iMa0"),r("7lKn")},QCNp:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r("U7vG"),s=r.n(i),u=r("RH2O"),c=r("2KeS"),l=r("M4fF"),f=r.n(l),h=r("BCOr"),p=r("ZB46"),d=r("bHK7"),m=r("t9xF"),y=r("tNBi"),v=r.n(y);r.d(t,"a",function(){return x});var b,g,x=(b=r.i(u.b)(function(e){return f.a.extend({status:e.game.status,beats:e.game.beats,highestBeats:e.game.highestBeats,outs:e.game.outs,threatsLength:e.threats.threats.length,manager:e.game.manager},f.a.mapValues(d.b,function(t){return f.a.get(e,t)}))},function(e){return r.i(c.e)({processSpacePress:h.a.processSpacePress,setState:h.b.setState,clearHighest:h.a.clearHighest},e)}))(g=function(e){function t(){var r,o,i;n(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return r=o=a(this,e.call.apply(e,[this].concat(u))),o.getS=function(e,t){return(t||"No")+" "+e+(1!==t?"s":"")},o.changeHandler=o.props.setState,i=r,a(o,i)}return o(t,e),t.prototype.render=function(){var e=this;return s.a.createElement("div",{className:v.a.side,style:{width:d.a.sideWidth+"px"}},s.a.createElement("button",{onClick:this.props.processSpacePress},d.c[this.props.status])," (Press Space)",s.a.createElement("h2",null,this.getS("beat",this.props.beats)),s.a.createElement("p",null,"Highest beats: ",this.props.highestBeats),s.a.createElement("p",null,this.getS("out",this.props.outs)),s.a.createElement("p",null,this.getS("threat",this.props.threatsLength)," on field"),s.a.createElement(m.a,{state:f.a.mapValues(f.a.invert(d.b),function(t){return e.props[t]}),onChange:this.changeHandler,defaultNum:1},s.a.createElement(m.b,{id:d.b.autoRestart,label:"Auto restart"}),s.a.createElement(m.b,{id:d.b.normalSpeed,label:"Normal speed"}),"Control",s.a.createElement(m.c,{id:d.b.manager,values:f.a.keys(p)}),s.a.createElement(m.d,{id:d.b.heroSize,label:"Hero size (px)"}),s.a.createElement(m.d,{id:d.b.heroSpeed,label:"Hero max speed (px/s)"}),s.a.createElement(m.d,{id:d.b.threatSize,label:"Threat size (px)"}),s.a.createElement(m.d,{id:d.b.threatSpeed,label:"Threat max speed (px/s)"}),s.a.createElement(m.d,{id:d.b.threatLimit,label:"Threat limit"}),s.a.createElement(m.d,{id:d.b.threatAddTimeout,label:"Threat add timeout (ms)"}),s.a.createElement(m.d,{id:d.b.threatRemoveProbability,label:"Threat remove probability (1/x)"})),s.a.createElement("button",{onClick:this.props.clearHighest},"Clear highest"))},t}(s.a.Component))||g},WNaE:function(e,t,r){"use strict";var n=r("M4fF"),a=r.n(n),o=r("4HHy"),i=r("bHK7"),s={threats:[],size:i.a.threatSize,maxSpeed:i.a.threatSpeed,lastTime:0,addTimeout:i.a.threatAddTimeout,index:0,limit:i.a.threatLimit,removeProbability:i.a.threatRemoveProbability};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1];switch(t.type){case o.a:return a.a.extend({},e,t.data.threats);default:return e}}},"YhS/":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={normal:"normal",trouble:"trouble"}},Z3B0:function(e,t,r){"use strict";t.a=function(e){return e.hero?{x:e.hero.x,y:e.hero.y}:{x:0,y:0}}},ZB46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("mfQ3");r.d(t,"Mouse",function(){return n.a});var a=r("Z3B0");r.d(t,"Still",function(){return a.a});var o=r("svHd");r.d(t,"Random",function(){return o.a});var i=r("DBoO");r.d(t,"Scared",function(){return i.a});var s=r("CfS3");r.d(t,"Stable",function(){return s.a});var u=r("1+5B");r.d(t,"Traveller",function(){return u.a})},ZJmM:function(e,t,r){"use strict";var n=r("M4fF"),a=r.n(n),o=r("4HHy"),i=r("bHK7"),s=r("YhS/"),u=r("vlrw"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=c({},u.a,{maxSpeed:i.a.heroSpeed,status:s.a.normal,size:i.a.heroSize,shadowPeriod:i.a.shadowPeriod,shadowQuantity:i.a.shadowQuantity,shadows:[]});t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case o.a:return a.a.extend({},e,t.data.hero);default:return e}}},ZvXP:function(e,t,r){"use strict";function n(e,t){return function(r){r({type:i.a,data:o.a.set({},e,t)})}}Object.defineProperty(t,"__esModule",{value:!0});var a=r("M4fF"),o=r.n(a),i=r("4HHy");t.setState=n},bHK7:function(e,t,r){"use strict";r.d(t,"e",function(){return a}),r.d(t,"a",function(){return o}),r.d(t,"d",function(){return i}),r.d(t,"c",function(){return s}),r.d(t,"b",function(){return u}),r.d(t,"f",function(){return c});var n,a="highestBeats",o={frameLength:20,heroSize:25,heroSpeed:10,threatSize:15,threatSpeed:4,threatLimit:20,threatAddTimeout:1e3,threatRemoveProbability:5,fieldWidth:800,fieldHeight:600,sideWidth:200,shadowPeriod:1,shadowQuantity:50},i={play:"play",pause:"pause",stop:"stop"},s=(n={},n[i.play]="Pause",n[i.pause]="Resume",n[i.stop]="Start",n),u={autoRestart:"game.autoRestart",normalSpeed:"game.normalSpeed",manager:"game.manager",heroSize:"hero.size",heroSpeed:"hero.maxSpeed",threatSize:"threats.size",threatSpeed:"threats.maxSpeed",threatLimit:"threats.limit",threatAddTimeout:"threats.addTimeout",threatRemoveProbability:"threats.removeProbability"},c={space:32}},cilB:function(e,t){},gIL8:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r("U7vG"),s=r.n(i),u=r("2KeS"),c=r("RH2O"),l=r("BCOr"),f=r("bHK7"),h=r("tNBi"),p=r.n(h),d=r("qaGz"),m=r("QCNp");r.d(t,"a",function(){return b});var y,v,b=(y=r.i(c.b)(function(e){return{fieldWidth:e.game.fieldWidth}},function(e){return r.i(u.e)({init:l.a.init},e)}))(v=function(e){function t(){var r,o,i;n(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return r=o=a(this,e.call.apply(e,[this].concat(u))),o.getFieldSize=function(){var e=o.field;return{left:e.offsetLeft,top:e.offsetTop,right:e.offsetLeft+e.clientWidth,bottom:e.offsetTop+e.clientHeight}},o.handleRefField=function(e){o.field=e},i=r,a(o,i)}return o(t,e),t.prototype.componentDidMount=function(){this.props.init(this)},t.prototype.render=function(){return s.a.createElement("div",{className:p.a.wrapper,style:{width:this.props.fieldWidth+f.a.sideWidth+"px"}},s.a.createElement(d.a,{refHandler:this.handleRefField}),s.a.createElement(m.a,null))},t}(s.a.Component))||v},"hB/+":function(e,t,r){"use strict";function n(){return function(e,t){e({type:s.a,data:r.i(l.a)(t())})}}function a(e,t){return function(){var n=t(),o=r.i(l.b)(n),i=n.game.status===u.d.play;o.game.status===u.d.stop&&i&&localStorage.setItem(u.e,o.game.highestBeats=Math.max(o.game.beats,o.game.highestBeats)),(o.game.status===u.d.play||i)&&e({type:s.a,data:o}),o.game.normalSpeed?(o.game.frameTime=performance.now(),setTimeout(a(e,t),f(o))):setTimeout(a(e,t),0)}}function o(){return function(e){localStorage.removeItem(u.e),e({type:s.b,data:{highestBeats:0}})}}function i(e){return function(t,r){t({type:s.b,data:{redSquares:e,inputController:new c.a,highestBeats:localStorage[u.e]?parseInt(localStorage[u.e],10):0}}),a(t,r)()}}Object.defineProperty(t,"__esModule",{value:!0});var s=r("4HHy"),u=r("bHK7"),c=r("liqn"),l=r("J2UN");t.processSpacePress=n,t.clearHighest=o,t.init=i;var f=function(e){return Math.max(e.game.frameTime+u.a.frameLength-performance.now(),0)}},hReJ:function(e,t,r){"use strict";function n(e,t,r,n){var a=[],o=e.x,i=e.y;return a.push({x:o,y:1.1*-t}),a.push({x:o,y:n+1.1*t}),a.push({x:1.1*-t,y:i}),a.push({x:r+1.1*t,y:i}),a}function a(e){for(var t=[],r=0;r<2*Math.PI;r+=2*Math.PI/i)t.push({x:e.x+Math.cos(r)*e.maxSpeed,y:e.y+Math.sin(r)*e.maxSpeed});return t}r.d(t,"a",function(){return u}),r.d(t,"b",function(){return c}),t.d=n,t.c=a;var o=4/3,i=24,s=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},u=function(e,t){var r=e.x,n=e.y;return t.reduce(function(e,t){var a=s({x:r,y:n},t);return!e.threat||e.distance>a?{threat:t,distance:a}:e},{threat:null,distance:1/0})},c=function(e,t){return(e.size+t.size+e.maxSpeed+t.maxSpeed)*o}},iMa0:function(e,t,r){"use strict";function n(e,t){var r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));if(a<=e.maxSpeed)return{xMove:r,yMove:n};var o=a/e.maxSpeed;return{xMove:r/o,yMove:n/o}}function a(e){var t=e.game,r=e.hero,n=r.shadows,a=0;return t.frame%r.shadowPeriod||(n.length===r.shadowQuantity&&n.pop(),n.length&&(a=n[0].id+1),n.unshift({x:r.x,y:r.y,id:a})),n}function o(e){var t=e.game,r=e.hero,o=e.target,i=e.threats.threats,f=e.threats.size,h=n(r,o),p=h.xMove,d=h.yMove,m=r.x+p;m=Math.max(m,r.size),m=Math.min(m,t.fieldWidth-r.size);var y=r.y+d;y=Math.max(y,r.size),y=Math.min(y,t.fieldHeight-r.size);var v=l(m,y,r.size,f,i);return c({},e,{game:c({},e.game,{status:v===u.a.normal?s.d.play:s.d.stop}),hero:c({},e.hero,{x:m,y:y,status:v,shadows:a(e)})})}var i=r("M4fF"),s=(r.n(i),r("bHK7")),u=r("YhS/");r("vlrw");t.a=o;var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(e,t,r,n,a){var o=r+n;return a.some(function(r){return Math.abs(r.x-e)<o&&Math.abs(r.y-t)<o})?u.a.trouble:u.a.normal}},kQSo:function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=r("U7vG"),u=r.n(s),c=r("qrPN"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h=function(e){return function(t){function r(){var e,n,i;a(this,r);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return e=n=o(this,t.call.apply(t,[this].concat(u))),n.defaultProps={children:null,state:{},path:"",value:"",values:[],readOnly:!1,label:"",defaultNum:0,onChange:c.a,onClick:c.a,onFocus:c.a,multiLine:!1},i=e,o(n,i)}return i(r,t),r.prototype.render=function(){var t=this.props,r=t.id,a=t.state,o=t.path,i=t.value,s=t.defaultNum,c=t.onChange,h=n(t,["id","state","path","value","defaultNum","onChange"]),p=function(){return"labeled-control-"+r},d=function(){return o||r},m=function(){return i||a&&a[d()]},y=function(e){var t=e.target.value,r=e.target.checked;switch(f(m())){case"number":t=parseInt(t,10)||s;break;case"boolean":t=r;break;case"string":default:t=t||""}c(d(),t)},v=function(e){return function(t){e.control=t}};return u.a.createElement(e,l({},h,{id:p(),value:m(),onChange:y,refHandler:v}))},r}(u.a.Component)};t.a=h},lVK7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("U7vG"),a=r.n(n),o=r("O27J"),i=(r.n(o),r("sMfP")),s=r("cilB");r.n(s);r.i(o.render)(a.a.createElement(i.a,null),document.querySelector("#app"))},liqn:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return s});var a,o,i,s=(o=a=function e(t){if(n(this,e),i.call(this),this.initialKeymap=t,e.instance)return e.instance;e.instance=this,document.onmousemove=this.saveMousePos,window.document.onkeydown=this.process},a.mousePos={},a.keyPressed=[],i=function(){var e=this;this.initialKeymap={},this.saveMousePos=function(e){s.mousePos={x:e.pageX,y:e.pageY}},this.process=function(t){32===t.keyCode&&t.preventDefault(),e.saveKeyPressed(t)},this.saveKeyPressed=function(e){var t=e.keyCode;return s.keyPressed.push(t)},this.reactToKeys=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.initialKeymap;s.keyPressed.forEach(function(e){return t[e]&&t[e]()}),s.keyPressed=[]}},o)},mfQ3:function(e,t,r){"use strict";var n=r("liqn");t.a=function(e){var t=e.game.redSquares.getFieldSize();return{x:n.a.mousePos.x-t.left,y:n.a.mousePos.y-t.top}}},oSbc:function(e,t){},oW9P:function(e,t){},"q8+6":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,s,u=r("U7vG"),c=r.n(u),l=r("kQSo"),f=r("qrPN"),h=r("9IwA"),p=(r.n(h),s=i=function(e){function t(){return n(this,t),a(this,e.apply(this,arguments))}return o(t,e),t.prototype.render=function(){var e=this;return c.a.createElement("div",{className:"group",id:this.props.id},this.props.values.map(function(t){var r=t.id||t;return c.a.createElement("div",{key:r},c.a.createElement("input",{id:r,name:e.props.id,type:"radio",ref:e.props.refHandler(e),value:r,checked:e.props.value===r,readOnly:e.props.readOnly,onChange:e.props.onChange,onClick:e.props.onClick(e),onFocus:e.props.onFocus(e)}),c.a.createElement("label",{htmlFor:r},t.label||t))}))},t}(c.a.PureComponent),i.defaultProps={id:"",value:"",values:[],readOnly:!1,onChange:f.a,onClick:f.a,onFocus:f.a,refHandler:f.a},s);t.a=r.i(l.a)(p)},qaGz:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=r("U7vG"),s=r.n(i),u=r("RH2O"),c=r("M4fF"),l=(r.n(c),r("YhS/")),f=r("tNBi"),h=r.n(f);r.d(t,"a",function(){return v});var p,d,m,y=(p={},p[l.a.normal]="rgb(50, 205, 50)",p[l.a.trouble]="rgb(237, 20, 61)",p),v=(d=r.i(u.b)(function(e){return{fieldWidth:e.game.fieldWidth,fieldHeight:e.game.fieldHeight,heroStatus:e.hero.status,heroSize:e.hero.size,heroPos:{x:e.hero.x,y:e.hero.y},threatSize:e.threats.size,threats:e.threats.threats,shadows:e.hero.shadows,error:e.game.error}}))(m=function(e){function t(){var r,o,i;n(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return r=o=a(this,e.call.apply(e,[this].concat(u))),o.canvas=null,o.handleRefCanvas=function(e){o.canvas=e,o.props.refHandler(e)},i=r,a(o,i)}return o(t,e),t.drawSquare=function(e){var t=e.ctx,r=e.pos,n=e.size,a=e.color;t.fillStyle=a,t.fillRect(Math.round(r.x-n),Math.round(r.y-n),2*n,2*n)},t.prototype.paint=function(){var e=this;if(this.canvas){var r=this.canvas.getContext("2d");r.clearRect(0,0,this.props.fieldWidth,this.props.fieldHeight),this.props.shadows.forEach(function(n,a){return t.drawSquare({ctx:r,pos:e.props.shadows[a],size:e.props.heroSize,color:"rgba(237, 20, 61, "+(e.props.shadows.length-a-1)/e.props.shadows.length*.3+")"})}),t.drawSquare({ctx:r,pos:this.props.heroPos,size:this.props.heroSize,color:y[this.props.heroStatus]}),this.props.threats.forEach(function(n){return t.drawSquare({ctx:r,pos:n,size:e.props.threatSize,color:"rgb(100, 149, 237)"})})}},t.prototype.render=function(){return this.paint(),s.a.createElement("div",{className:h.a.fieldWrapper},s.a.createElement("canvas",{className:h.a.field,ref:this.handleRefCanvas,width:this.props.fieldWidth,height:this.props.fieldHeight},"You are using an outdated browser."),s.a.createElement("div",{className:h.a.error},this.props.error))},t}(s.a.Component))||m},qrPN:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){}},sMfP:function(e,t,r){"use strict";var n=r("U7vG"),a=r.n(n),o=r("2KeS"),i=r("4ufr"),s=r.n(i),u=r("RH2O"),c=r("ChGC"),l=r("gIL8"),f=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.a,h=r.i(o.b)(r.i(o.c)(c),f(r.i(o.d)(s.a))),p=function(){return a.a.createElement(u.a,{store:h},a.a.createElement(l.a,null))};t.a=p},svHd:function(e,t,r){"use strict";function n(e,t){return Math.random()*(e-2*t)+t}var a=void 0;t.a=function(e){return(!a||e.hero.x===a.x&&e.hero.y===a.y)&&(a={x:n(e.game.fieldWidth,e.hero.size),y:n(e.game.fieldHeight,e.hero.size)}),a}},t9xF:function(e,t,r){"use strict";var n=(r("Aaru"),r("EACi"));r.d(t,"a",function(){return n.a});var a=r("2RiJ");r.d(t,"d",function(){return a.a});var o=r("q8+6");r.d(t,"c",function(){return o.a});var i=r("2ICE");r.d(t,"b",function(){return i.a})},tNBi:function(e,t){e.exports={wrapper:"RedSquares__wrapper__n469N",fieldWrapper:"RedSquares__fieldWrapper__3xRFe",field:"RedSquares__field__3S_U-",error:"RedSquares__error__32Ynw",side:"RedSquares__side__1Qama"}},vlrw:function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}}function a(e){return 0===e||isNaN(e)?e:e>0?1:-1}var o=r("bHK7");t.c=n,t.b=a,r.d(t,"a",function(){return i});var i={x:(o.a.fieldWidth-o.a.heroSize)/2,y:(o.a.fieldHeight-o.a.heroSize)/2}}},[0]);
//# sourceMappingURL=app.6de828ba.js.map