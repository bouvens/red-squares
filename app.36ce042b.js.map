{"version":3,"sources":["webpack:///app.36ce042b.js","webpack:///./src/App.js","webpack:///./src/components/Field.js","webpack:///./src/components/RedSquares.js","webpack:///./src/components/RedSquares.less","webpack:///./src/components/Square.js","webpack:///./src/index.js","webpack:///./src/utils.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","Ue/Q","pnOm","_interopRequireDefault","obj","__esModule","default","_react","_react2","_RedSquares","_RedSquares2","SETTINGS","frameLength","heroSize","threatSize","threatLimit","threatAddTimeout","threatRemoveProbability","App","createElement","7hJZ","_utils","Field","props","ref","refHandler","className","style","children","defaultProps","3VDB","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","undefined","_class","_temp2","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","_Field","_Field2","_Square","_Square2","heroStates","normal","id","hero","trouble","heroInTrouble","STATUS","play","pause","stop","RedSquares","_Component","_temp","_this","_ret","this","_len","args","Array","_key","apply","concat","state","status","x","y","threats","beats","keyPressed","saveMousePos","e","mousePos","pageX","pageY","saveKeyPressed","_ref","push","buttonPressProceed","setState","frame","lastTreatTime","clearInterval","interval","startInterval","getButtonName","keymap"," ","reactToKeys","forEach","threatsIndex","setInterval","updateFrame","moveThreats","controlThreats","moveHero","saveFieldSize","fieldRect","field","left","offsetLeft","top","offsetTop","right","clientWidth","bottom","clientHeight","width","height","map","threat","speed","processSpeed","oldThreat","size","canFlyAway","options","axis","lean","isGoingOut","Math","sign","isOut","isAroundField","abs","beat","newThreat","random","processThreat","bind","rightBorder","bottomBorder","addThreat","round","ceil","filter","getHeroStatus","_this$props","safeLength","sizeFix","some","fieldPos","max","min","getS","num","componentDidMount","_this2","document","onmousemove","window","onresize","setTimeout","onkeyup","render","_this3","wrapper","elem","side","onClick","Component","tNBi","CMFL","Square","cilB","lVK7","_reactDom","_App","_App2","querySelector","L/hj","noOp"],"mappings":"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","file":"app.36ce042b.js","sourcesContent":["webpackJsonp([0,2],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(\"+prg\");\n\tmodule.exports = __webpack_require__(\"lVK7\");\n\n\n/***/ },\n\n/***/ \"Ue/Q\":\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ \"pnOm\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\t__webpack_require__(\"Ue/Q\");\n\t\n\tvar _RedSquares = __webpack_require__(\"3VDB\");\n\t\n\tvar _RedSquares2 = _interopRequireDefault(_RedSquares);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar SETTINGS = {\n\t    frameLength: 20,\n\t    heroSize: 50,\n\t    threatSize: 30,\n\t    threatLimit: 10,\n\t    threatAddTimeout: 1500,\n\t    threatRemoveProbability: 20\n\t};\n\t\n\tvar App = function App() {\n\t    return _react2.default.createElement(_RedSquares2.default, SETTINGS);\n\t};\n\t\n\texports.default = App;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"7hJZ\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _utils = __webpack_require__(\"L/hj\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Field = function Field(props) {\n\t    return _react2.default.createElement(\n\t        'div',\n\t        {\n\t            ref: props.refHandler,\n\t            className: props.style\n\t        },\n\t        props.children\n\t    );\n\t};\n\t\n\tField.defaultProps = {\n\t    children: null,\n\t    refHandler: _utils.noOp\n\t};\n\t\n\texports.default = Field;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"3VDB\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.default = undefined;\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _class, _temp2;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _RedSquares = __webpack_require__(\"tNBi\");\n\t\n\tvar _RedSquares2 = _interopRequireDefault(_RedSquares);\n\t\n\tvar _Field = __webpack_require__(\"7hJZ\");\n\t\n\tvar _Field2 = _interopRequireDefault(_Field);\n\t\n\tvar _Square = __webpack_require__(\"CMFL\");\n\t\n\tvar _Square2 = _interopRequireDefault(_Square);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar heroStates = {\n\t    normal: {\n\t        id: 'normal',\n\t        style: _RedSquares2.default.hero\n\t    },\n\t    trouble: {\n\t        id: 'trouble',\n\t        style: _RedSquares2.default.heroInTrouble\n\t    }\n\t};\n\t\n\tvar STATUS = {\n\t    play: 'play',\n\t    pause: 'pause',\n\t    stop: 'stop'\n\t};\n\t\n\tvar RedSquares = (_temp2 = _class = function (_Component) {\n\t    _inherits(RedSquares, _Component);\n\t\n\t    function RedSquares() {\n\t        var _temp, _this, _ret;\n\t\n\t        _classCallCheck(this, RedSquares);\n\t\n\t        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t            args[_key] = arguments[_key];\n\t        }\n\t\n\t        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n\t            status: STATUS.stop,\n\t            hero: {\n\t                x: 0,\n\t                y: 0,\n\t                status: heroStates.normal\n\t            },\n\t            threats: [],\n\t            beats: 0\n\t        }, _this.keyPressed = [], _this.saveMousePos = function (e) {\n\t            RedSquares.mousePos = {\n\t                x: e.pageX,\n\t                y: e.pageY\n\t            };\n\t        }, _this.saveKeyPressed = function (_ref) {\n\t            var key = _ref.key;\n\t            return _this.keyPressed.push(key);\n\t        }, _this.buttonPressProceed = function () {\n\t            switch (_this.state.status) {\n\t                case STATUS.play:\n\t                    _this.setState({\n\t                        status: STATUS.pause\n\t                    });\n\t                    break;\n\t                case STATUS.pause:\n\t                    _this.setState({\n\t                        status: STATUS.play\n\t                    });\n\t                    break;\n\t                case STATUS.stop:\n\t                default:\n\t                    _this.setState({\n\t                        status: STATUS.play\n\t                    });\n\t                    _this.frame = 0;\n\t                    _this.lastTreatTime = 0 - _this.props.threatAddTimeout / _this.props.frameLength;\n\t                    clearInterval(_this.interval);\n\t                    _this.startInterval();\n\t                    _this.setState({\n\t                        threats: [],\n\t                        beats: 0\n\t                    });\n\t            }\n\t        }, _this.getButtonName = function () {\n\t            switch (_this.state.status) {\n\t                case STATUS.play:\n\t                    return 'Pause';\n\t                case STATUS.pause:\n\t                    return 'Resume';\n\t                case STATUS.stop:\n\t                    return 'Start';\n\t                default:\n\t                    return 'WAT';\n\t            }\n\t        }, _this.keymap = {\n\t            ' ': _this.buttonPressProceed\n\t        }, _this.reactToKeys = function () {\n\t            _this.keyPressed.forEach(function (key) {\n\t                return _this.keymap[key] && _this.keymap[key]();\n\t            });\n\t            _this.keyPressed = [];\n\t        }, _this.threatsIndex = 0, _this.startInterval = function () {\n\t            _this.interval = setInterval(_this.updateFrame, _this.props.frameLength);\n\t        }, _this.updateFrame = function () {\n\t            _this.reactToKeys();\n\t\n\t            if (_this.state.status === STATUS.play) {\n\t                _this.moveThreats();\n\t                _this.controlThreats();\n\t                _this.moveHero();\n\t                _this.frame += 1;\n\t            }\n\t        }, _this.saveFieldSize = function () {\n\t            var fieldRect = _this.field;\n\t            // TODO check and browsers and rewrite like https://learn.javascript.ru/coordinates-document\n\t            _this.setState({\n\t                field: {\n\t                    left: fieldRect.offsetLeft,\n\t                    top: fieldRect.offsetTop,\n\t                    right: fieldRect.offsetLeft + fieldRect.clientWidth,\n\t                    bottom: fieldRect.offsetTop + fieldRect.clientHeight,\n\t                    width: fieldRect.clientWidth,\n\t                    height: fieldRect.clientHeight\n\t                }\n\t            });\n\t        }, _this.moveThreats = function () {\n\t            _this.setState({\n\t                threats: _this.state.threats.map(function (threat) {\n\t                    return _extends({}, threat, {\n\t                        x: threat.x + threat.speed.x,\n\t                        y: threat.y + threat.speed.y\n\t                    });\n\t                })\n\t            });\n\t        }, _this.processSpeed = function (oldThreat, size, canFlyAway, options) {\n\t            var axis = options.axis,\n\t                lean = options.lean;\n\t\n\t            var threat = _extends({}, oldThreat);\n\t            var isGoingOut = Math.sign(lean) === Math.sign(threat.speed[axis]);\n\t\n\t            if (!threat.isOut) {\n\t                if (canFlyAway && isGoingOut) {\n\t                    threat.isOut = true;\n\t                } else {\n\t                    if (isGoingOut) {\n\t                        _this.setState({\n\t                            beats: _this.state.beats + 1\n\t                        });\n\t                    }\n\t\n\t                    threat.speed[axis] = (isGoingOut ? -1 : 1) * (threat.speed[axis] || 1);\n\t                }\n\t            }\n\t            threat.isAroundField = Math.abs(lean) <= size * 3;\n\t\n\t            return threat;\n\t        }, _this.beat = function (field) {\n\t            return function (threat) {\n\t                var newThreat = _extends({}, threat);\n\t                var canFlyAway = Math.random() < 1 / _this.props.threatRemoveProbability;\n\t                var processThreat = _this.processSpeed.bind(null, newThreat, _this.props.threatSize, canFlyAway);\n\t\n\t                if (newThreat.x < 0) {\n\t                    newThreat = processThreat({\n\t                        axis: 'x',\n\t                        lean: newThreat.x\n\t                    });\n\t                }\n\t                var rightBorder = field.width - _this.props.threatSize;\n\t                if (newThreat.x > rightBorder) {\n\t                    newThreat = processThreat({\n\t                        axis: 'x',\n\t                        lean: newThreat.x - rightBorder\n\t                    });\n\t                }\n\t\n\t                if (newThreat.y < 0) {\n\t                    newThreat = processThreat({\n\t                        axis: 'y',\n\t                        lean: newThreat.y\n\t                    });\n\t                }\n\t                var bottomBorder = field.height - _this.props.threatSize;\n\t                if (newThreat.y > bottomBorder) {\n\t                    newThreat = processThreat({\n\t                        axis: 'y',\n\t                        lean: newThreat.y - bottomBorder\n\t                    });\n\t                }\n\t\n\t                return newThreat;\n\t            };\n\t        }, _this.addThreat = function (field, threats) {\n\t            var size = _this.props.threatSize;\n\t            var x = Math.round(Math.random() * (field.width - size));\n\t            var y = 0 - size;\n\t            var speed = {\n\t                x: Math.round(Math.random() * 8 - 4),\n\t                y: Math.ceil(Math.random() * 4)\n\t            };\n\t\n\t            if (Math.random() < 0.5) {\n\t                x = 0 - size;\n\t                y = Math.round(Math.random() * (field.height - size));\n\t                speed = {\n\t                    x: Math.ceil(Math.random() * 4),\n\t                    y: Math.round(Math.random() * 8 - 4)\n\t                };\n\t\n\t                if (Math.random() < 0.5) {\n\t                    x = field.width;\n\t                    speed.x = -speed.x;\n\t                }\n\t            } else if (Math.random() < 0.5) {\n\t                y = field.height;\n\t                speed.y = -speed.y;\n\t            }\n\t            threats.push({\n\t                id: _this.threatsIndex += 1,\n\t                x: x,\n\t                y: y,\n\t                speed: speed,\n\t                isOut: false,\n\t                isAroundField: true\n\t            });\n\t\n\t            _this.lastTreatTime = _this.frame;\n\t            _this.setState({\n\t                threats: threats\n\t            });\n\t        }, _this.controlThreats = function () {\n\t            var field = _this.state.field;\n\t            var threats = _this.state.threats.map(_this.beat(field));\n\t            threats = threats.filter(function (threat) {\n\t                return threat.isAroundField;\n\t            });\n\t\n\t            if (threats.length < _this.props.threatLimit && _this.frame >= _this.lastTreatTime + _this.props.threatAddTimeout / _this.props.frameLength) {\n\t                _this.addThreat(field, threats);\n\t            }\n\t\n\t            _this.setState({\n\t                threats: threats\n\t            });\n\t        }, _this.getHeroStatus = function (x, y) {\n\t            var _this$props = _this.props,\n\t                heroSize = _this$props.heroSize,\n\t                threatSize = _this$props.threatSize;\n\t\n\t            var safeLength = (heroSize + threatSize) / 2;\n\t            var sizeFix = (threatSize - heroSize) / 2;\n\t\n\t            if (_this.state.threats.some(function (threat) {\n\t                return Math.abs(threat.x - x + sizeFix) < safeLength && Math.abs(threat.y - y + sizeFix) < safeLength;\n\t            })) {\n\t                _this.setState({\n\t                    status: STATUS.stop\n\t                });\n\t\n\t                return heroStates.trouble;\n\t            }\n\t\n\t            return heroStates.normal;\n\t        }, _this.moveHero = function () {\n\t            var fieldPos = _this.state.field;\n\t            var x = Math.max(RedSquares.mousePos.x - _this.props.heroSize / 2, fieldPos.left);\n\t            x = Math.min(x, fieldPos.right - _this.props.heroSize);\n\t            x -= fieldPos.left;\n\t            var y = Math.max(RedSquares.mousePos.y - _this.props.heroSize / 2, fieldPos.top);\n\t            y = Math.min(y, fieldPos.bottom - _this.props.heroSize);\n\t            y -= fieldPos.top;\n\t\n\t            _this.setState({\n\t                hero: {\n\t                    x: x,\n\t                    y: y,\n\t                    status: _this.getHeroStatus(x, y)\n\t                }\n\t            });\n\t        }, _this.getS = function (num) {\n\t            return num !== 1 ? 's' : '';\n\t        }, _temp), _possibleConstructorReturn(_this, _ret);\n\t    }\n\t\n\t    RedSquares.prototype.componentDidMount = function componentDidMount() {\n\t        var _this2 = this;\n\t\n\t        document.onmousemove = this.saveMousePos;\n\t\n\t        this.saveFieldSize();\n\t        window.onresize = this.saveFieldSize;\n\t        setTimeout(function () {\n\t            return _this2.setState({\n\t                hero: _extends({}, _this2.state.hero, {\n\t                    x: (_this2.field.clientWidth - _this2.props.heroSize) / 2,\n\t                    y: (_this2.field.clientHeight - _this2.props.heroSize) / 2\n\t                })\n\t            });\n\t        }, 0);\n\t        window.document.onkeyup = this.saveKeyPressed;\n\t\n\t        this.startInterval();\n\t    };\n\t\n\t    RedSquares.prototype.render = function render() {\n\t        var _this3 = this;\n\t\n\t        return _react2.default.createElement(\n\t            'div',\n\t            { className: _RedSquares2.default.wrapper },\n\t            _react2.default.createElement(\n\t                _Field2.default,\n\t                {\n\t                    style: _RedSquares2.default.field,\n\t                    refHandler: function refHandler(elem) {\n\t                        _this3.field = elem;\n\t                    }\n\t                },\n\t                _react2.default.createElement(_Square2.default, {\n\t                    style: this.state.hero.status.style,\n\t                    refHandler: function refHandler(elem) {\n\t                        _this3.hero = elem;\n\t                    },\n\t                    size: this.props.heroSize,\n\t                    left: this.state.hero.x,\n\t                    top: this.state.hero.y\n\t                }),\n\t                this.state.threats.map(function (threat) {\n\t                    return _react2.default.createElement(_Square2.default, {\n\t                        key: threat.id,\n\t                        style: _RedSquares2.default.threat,\n\t                        size: _this3.props.threatSize,\n\t                        left: threat.x,\n\t                        top: threat.y\n\t                    });\n\t                })\n\t            ),\n\t            _react2.default.createElement(\n\t                'div',\n\t                { className: _RedSquares2.default.side },\n\t                _react2.default.createElement(\n\t                    'button',\n\t                    { onClick: this.buttonPressProceed },\n\t                    this.getButtonName()\n\t                ),\n\t                ' (Press Space)',\n\t                _react2.default.createElement(\n\t                    'h2',\n\t                    null,\n\t                    this.state.beats || 'No',\n\t                    ' beat',\n\t                    this.getS(this.state.beats)\n\t                ),\n\t                _react2.default.createElement(\n\t                    'p',\n\t                    null,\n\t                    this.state.threats.length || 'No',\n\t                    ' threat',\n\t                    this.getS(this.state.threats.length),\n\t                    ' on field'\n\t                )\n\t            )\n\t        );\n\t    };\n\t\n\t    return RedSquares;\n\t}(_react.Component), _class.mousePos = {\n\t    x: 0,\n\t    y: 0\n\t}, _temp2);\n\texports.default = RedSquares;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"tNBi\":\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\tmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"side\":\"RedSquares__side__1Qama\",\"field\":\"RedSquares__field__3S_U-\",\"hero\":\"RedSquares__hero__3dJES\",\"heroInTrouble\":\"RedSquares__heroInTrouble__3OuzF\",\"threat\":\"RedSquares__threat__3sdY0\"};\n\n/***/ },\n\n/***/ \"CMFL\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _utils = __webpack_require__(\"L/hj\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Square = function Square(props) {\n\t    return _react2.default.createElement('div', {\n\t        ref: props.refHandler,\n\t        className: props.style,\n\t        style: {\n\t            width: props.size + 'px',\n\t            height: props.size + 'px',\n\t            top: props.top + 'px',\n\t            left: props.left + 'px'\n\t        }\n\t    });\n\t};\n\t\n\tSquare.defaultProps = {\n\t    refHandler: _utils.noOp\n\t};\n\t\n\texports.default = Square;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ \"cilB\":\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ \"lVK7\":\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _react = __webpack_require__(\"U7vG\");\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(\"O27J\");\n\t\n\tvar _App = __webpack_require__(\"pnOm\");\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\t__webpack_require__(\"cilB\");\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t(0, _reactDom.render)(_react2.default.createElement(_App2.default, null), document.querySelector('#app'));\n\n/***/ },\n\n/***/ \"L/hj\":\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\tvar noOp = exports.noOp = function noOp() {};\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// app.36ce042b.js","import React from 'react'\r\nimport './App.css'\r\nimport RedSquares from './components/RedSquares'\r\n\r\nconst SETTINGS = {\r\n    frameLength: 20,\r\n    heroSize: 50,\r\n    threatSize: 30,\r\n    threatLimit: 10,\r\n    threatAddTimeout: 1500,\r\n    threatRemoveProbability: 20,\r\n}\r\n\r\nconst App = () => (\r\n    <RedSquares {...SETTINGS} />\r\n)\r\n\r\nexport default App\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.js","import React, { PropTypes } from 'react'\r\nimport { noOp } from '../utils'\r\n\r\nconst Field = (props) => (\r\n    <div\r\n        ref={props.refHandler}\r\n        className={props.style}\r\n    >\r\n        {props.children}\r\n    </div>\r\n)\r\n\r\nField.propTypes = {\r\n    style: PropTypes.string.isRequired,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.array,\r\n    ]),\r\n    refHandler: PropTypes.func,\r\n}\r\n\r\nField.defaultProps = {\r\n    children: null,\r\n    refHandler: noOp,\r\n}\r\n\r\nexport default Field\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Field.js","import React, { Component, PropTypes } from 'react'\r\nimport style from './RedSquares.less'\r\nimport Field from './Field'\r\nimport Square from './Square'\r\n\r\nconst heroStates = {\r\n    normal: {\r\n        id: 'normal',\r\n        style: style.hero,\r\n    },\r\n    trouble: {\r\n        id: 'trouble',\r\n        style: style.heroInTrouble,\r\n    },\r\n}\r\n\r\nconst STATUS = {\r\n    play: 'play',\r\n    pause: 'pause',\r\n    stop: 'stop',\r\n}\r\n\r\nexport default class RedSquares extends Component {\r\n    static propTypes = {\r\n        frameLength: PropTypes.number.isRequired,\r\n        heroSize: PropTypes.number.isRequired,\r\n        threatSize: PropTypes.number.isRequired,\r\n        threatLimit: PropTypes.number.isRequired,\r\n        threatAddTimeout: PropTypes.number.isRequired,\r\n        threatRemoveProbability: PropTypes.number.isRequired,\r\n    }\r\n\r\n    state = {\r\n        status: STATUS.stop,\r\n        hero: {\r\n            x: 0,\r\n            y: 0,\r\n            status: heroStates.normal,\r\n        },\r\n        threats: [],\r\n        beats: 0,\r\n    }\r\n\r\n    componentDidMount () {\r\n        document.onmousemove = this.saveMousePos\r\n\r\n        this.saveFieldSize()\r\n        window.onresize = this.saveFieldSize\r\n        setTimeout(() => this.setState({\r\n            hero: {\r\n                ...this.state.hero,\r\n                x: (this.field.clientWidth - this.props.heroSize) / 2,\r\n                y: (this.field.clientHeight - this.props.heroSize) / 2,\r\n            }\r\n        }), 0)\r\n        window.document.onkeyup = this.saveKeyPressed\r\n\r\n        this.startInterval()\r\n    }\r\n\r\n    static mousePos = {\r\n        x: 0,\r\n        y: 0,\r\n    }\r\n\r\n    keyPressed = []\r\n\r\n    saveMousePos = (e) => {\r\n        RedSquares.mousePos = {\r\n            x: e.pageX,\r\n            y: e.pageY,\r\n        }\r\n    }\r\n\r\n    saveKeyPressed = ({ key }) => this.keyPressed.push(key)\r\n\r\n    buttonPressProceed = () => {\r\n        switch (this.state.status) {\r\n            case STATUS.play:\r\n                this.setState({\r\n                    status: STATUS.pause,\r\n                })\r\n                break\r\n            case STATUS.pause:\r\n                this.setState({\r\n                    status: STATUS.play,\r\n                })\r\n                break\r\n            case STATUS.stop:\r\n            default:\r\n                this.setState({\r\n                    status: STATUS.play,\r\n                })\r\n                this.frame = 0\r\n                this.lastTreatTime = 0 - (this.props.threatAddTimeout / this.props.frameLength)\r\n                clearInterval(this.interval)\r\n                this.startInterval()\r\n                this.setState({\r\n                    threats: [],\r\n                    beats: 0,\r\n                })\r\n        }\r\n    }\r\n\r\n    getButtonName = () => {\r\n        switch (this.state.status) {\r\n            case STATUS.play:\r\n                return 'Pause'\r\n            case STATUS.pause:\r\n                return 'Resume'\r\n            case STATUS.stop:\r\n                return 'Start'\r\n            default:\r\n                return 'WAT'\r\n        }\r\n    }\r\n\r\n    keymap = {\r\n        ' ': this.buttonPressProceed,\r\n    }\r\n\r\n    reactToKeys = () => {\r\n        this.keyPressed.forEach((key) => this.keymap[key] && this.keymap[key]())\r\n        this.keyPressed = []\r\n    }\r\n\r\n    threatsIndex = 0\r\n\r\n    startInterval = () => {\r\n        this.interval = setInterval(this.updateFrame, this.props.frameLength)\r\n    }\r\n\r\n    updateFrame = () => {\r\n        this.reactToKeys()\r\n\r\n        if (this.state.status === STATUS.play) {\r\n            this.moveThreats()\r\n            this.controlThreats()\r\n            this.moveHero()\r\n            this.frame += 1\r\n        }\r\n    }\r\n\r\n    saveFieldSize = () => {\r\n        const fieldRect = this.field\r\n        // TODO check and browsers and rewrite like https://learn.javascript.ru/coordinates-document\r\n        this.setState({\r\n            field: {\r\n                left: fieldRect.offsetLeft,\r\n                top: fieldRect.offsetTop,\r\n                right: fieldRect.offsetLeft + fieldRect.clientWidth,\r\n                bottom: fieldRect.offsetTop + fieldRect.clientHeight,\r\n                width: fieldRect.clientWidth,\r\n                height: fieldRect.clientHeight,\r\n            }\r\n        })\r\n    }\r\n\r\n    moveThreats = () => {\r\n        this.setState({\r\n            threats: this.state.threats.map((threat) => (\r\n                {\r\n                    ...threat,\r\n                    x: threat.x + threat.speed.x,\r\n                    y: threat.y + threat.speed.y,\r\n                }\r\n            ))\r\n        })\r\n    }\r\n\r\n    processSpeed = (oldThreat, size, canFlyAway, options) => {\r\n        const { axis, lean } = options\r\n        const threat = { ...oldThreat }\r\n        const isGoingOut = Math.sign(lean) === Math.sign(threat.speed[axis])\r\n\r\n        if (!threat.isOut) {\r\n            if (canFlyAway && isGoingOut) {\r\n                threat.isOut = true\r\n            } else {\r\n                if (isGoingOut) {\r\n                    this.setState({\r\n                        beats: this.state.beats + 1,\r\n                    })\r\n                }\r\n\r\n                threat.speed[axis] = (isGoingOut ? -1 : 1) * (threat.speed[axis] || 1)\r\n            }\r\n        }\r\n        threat.isAroundField = Math.abs(lean) <= size * 3\r\n\r\n        return threat\r\n    }\r\n\r\n    beat = (field) => (threat) => {\r\n        let newThreat = { ...threat }\r\n        const canFlyAway = Math.random() < 1 / this.props.threatRemoveProbability\r\n        const processThreat = this.processSpeed.bind(null, newThreat, this.props.threatSize, canFlyAway)\r\n\r\n        if (newThreat.x < 0) {\r\n            newThreat = processThreat({\r\n                axis: 'x',\r\n                lean: newThreat.x,\r\n            })\r\n        }\r\n        const rightBorder = field.width - this.props.threatSize\r\n        if (newThreat.x > rightBorder) {\r\n            newThreat = processThreat({\r\n                axis: 'x',\r\n                lean: newThreat.x - rightBorder,\r\n            })\r\n        }\r\n\r\n        if (newThreat.y < 0) {\r\n            newThreat = processThreat({\r\n                axis: 'y',\r\n                lean: newThreat.y,\r\n            })\r\n        }\r\n        const bottomBorder = field.height - this.props.threatSize\r\n        if (newThreat.y > bottomBorder) {\r\n            newThreat = processThreat({\r\n                axis: 'y',\r\n                lean: newThreat.y - bottomBorder,\r\n            })\r\n        }\r\n\r\n        return newThreat\r\n    }\r\n\r\n    addThreat = (field, threats) => {\r\n        const size = this.props.threatSize\r\n        let x = Math.round(Math.random() * (field.width - size))\r\n        let y = 0 - size\r\n        let speed = {\r\n            x: Math.round(Math.random() * 8 - 4),\r\n            y: Math.ceil(Math.random() * 4),\r\n        }\r\n\r\n        if (Math.random() < 0.5) {\r\n            x = 0 - size\r\n            y = Math.round(Math.random() * (field.height - size))\r\n            speed = {\r\n                x: Math.ceil(Math.random() * 4),\r\n                y: Math.round(Math.random() * 8 - 4),\r\n            }\r\n\r\n            if (Math.random() < 0.5) {\r\n                x = field.width\r\n                speed.x = -speed.x\r\n            }\r\n        } else if (Math.random() < 0.5) {\r\n            y = field.height\r\n            speed.y = -speed.y\r\n        }\r\n        threats.push({\r\n            id: this.threatsIndex += 1,\r\n            x,\r\n            y,\r\n            speed,\r\n            isOut: false,\r\n            isAroundField: true,\r\n        })\r\n\r\n        this.lastTreatTime = this.frame\r\n        this.setState({\r\n            threats,\r\n        })\r\n    }\r\n\r\n    controlThreats = () => {\r\n        const field = this.state.field\r\n        let threats = this.state.threats.map(this.beat(field))\r\n        threats = threats.filter((threat) => threat.isAroundField)\r\n\r\n        if (threats.length < this.props.threatLimit\r\n            && this.frame >= this.lastTreatTime + (this.props.threatAddTimeout / this.props.frameLength)) {\r\n            this.addThreat(field, threats)\r\n        }\r\n\r\n        this.setState({\r\n            threats\r\n        })\r\n    }\r\n\r\n    getHeroStatus = (x, y) => {\r\n        const { heroSize, threatSize } = this.props\r\n        const safeLength = (heroSize + threatSize) / 2\r\n        const sizeFix = (threatSize - heroSize) / 2\r\n\r\n        if (this.state.threats.some((threat) =>\r\n                Math.abs(threat.x - x + sizeFix) < safeLength && Math.abs(threat.y - y + sizeFix) < safeLength\r\n            )) {\r\n            this.setState({\r\n                status: STATUS.stop,\r\n            })\r\n\r\n            return heroStates.trouble\r\n        }\r\n\r\n        return heroStates.normal\r\n    }\r\n\r\n    moveHero = () => {\r\n        const fieldPos = this.state.field\r\n        let x = Math.max(RedSquares.mousePos.x - this.props.heroSize / 2, fieldPos.left)\r\n        x = Math.min(x, fieldPos.right - this.props.heroSize)\r\n        x -= fieldPos.left\r\n        let y = Math.max(RedSquares.mousePos.y - this.props.heroSize / 2, fieldPos.top)\r\n        y = Math.min(y, fieldPos.bottom - this.props.heroSize)\r\n        y -= fieldPos.top\r\n\r\n        this.setState({\r\n            hero: {\r\n                x,\r\n                y,\r\n                status: this.getHeroStatus(x, y),\r\n            }\r\n        })\r\n    }\r\n\r\n    getS = (num) => num !== 1 ? 's' : ''\r\n\r\n    render () {\r\n        return (\r\n            <div className={style.wrapper}>\r\n                <Field\r\n                    style={style.field}\r\n                    refHandler={(elem) => { this.field = elem }}\r\n                >\r\n                    <Square\r\n                        style={this.state.hero.status.style}\r\n                        refHandler={(elem) => { this.hero = elem }}\r\n                        size={this.props.heroSize}\r\n                        left={this.state.hero.x}\r\n                        top={this.state.hero.y}\r\n                    />\r\n                    {this.state.threats.map((threat) => (\r\n                        <Square\r\n                            key={threat.id}\r\n                            style={style.threat}\r\n                            size={this.props.threatSize}\r\n                            left={threat.x}\r\n                            top={threat.y}\r\n                        />\r\n                    ))}\r\n                </Field>\r\n                <div className={style.side}>\r\n                    <button onClick={this.buttonPressProceed}>{this.getButtonName()}</button>\r\n                    {' (Press Space)'}\r\n                    <h2>{this.state.beats || 'No'} beat{this.getS(this.state.beats)}</h2>\r\n                    <p>{this.state.threats.length || 'No'} threat{this.getS(this.state.threats.length)} on field</p>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RedSquares.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"side\":\"RedSquares__side__1Qama\",\"field\":\"RedSquares__field__3S_U-\",\"hero\":\"RedSquares__hero__3dJES\",\"heroInTrouble\":\"RedSquares__heroInTrouble__3OuzF\",\"threat\":\"RedSquares__threat__3sdY0\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RedSquares.less\n// module id = tNBi\n// module chunks = 0","import React, { PropTypes } from 'react'\r\nimport { noOp } from '../utils'\r\n\r\nconst Square = (props) => (\r\n    <div\r\n        ref={props.refHandler}\r\n        className={props.style}\r\n        style={{\r\n            width: `${props.size}px`,\r\n            height: `${props.size}px`,\r\n            top: `${props.top}px`,\r\n            left: `${props.left}px`,\r\n        }}\r\n    />\r\n)\r\n\r\nSquare.propTypes = {\r\n    top: PropTypes.number.isRequired,\r\n    left: PropTypes.number.isRequired,\r\n    size: PropTypes.number.isRequired,\r\n    style: PropTypes.string.isRequired,\r\n    refHandler: PropTypes.func,\r\n}\r\n\r\nSquare.defaultProps = {\r\n    refHandler: noOp,\r\n}\r\n\r\nexport default Square\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Square.js","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nrender(<App />, document.querySelector('#app'))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export const noOp = () => {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js"],"sourceRoot":""}