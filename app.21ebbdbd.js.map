{"version":3,"sources":["webpack:///app.21ebbdbd.js","webpack:///./src/constants/actionTypes.js","webpack:///./src/components/StateControl/Input.jsx","webpack:///./src/game-logic/threats.js","webpack:///./src/reducers/game.js","webpack:///./src/components/Hero.less","webpack:///./src/game-logic/game.js","webpack:///./src/components/StateControl/utils.js","webpack:///./src/components/Sidebar.jsx","webpack:///./src/reducers/threats.js","webpack:///./src/components/StateControl/Connector.jsx","webpack:///./src/constants/hero.js","webpack:///./src/reducers/hero.js","webpack:///./src/constants/game.js","webpack:///./src/components/RedSquares.jsx","webpack:///./src/actions/game.js","webpack:///./src/game-logic/hero.js","webpack:///./src/index.js","webpack:///./src/utils/InputCatcher.js","webpack:///./src/App.jsx","webpack:///./src/components/RedSquares.less","webpack:///./src/components/StateControl/SettersBlock.jsx","webpack:///./src/utils/funcs.js","webpack:///./src/components/Square.jsx","webpack:///./src/components/Field.jsx"],"names":["webpackJsonp","0","module","exports","__webpack_require__","4HHy","__webpack_exports__","d","INIT","SET_STATE","6e+x","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","n","__WEBPACK_IMPORTED_MODULE_1__utils__","__WEBPACK_IMPORTED_MODULE_2__Input_css__","Input","_class","_temp2","_React$Component","_temp","_this","_ret","this","_len","arguments","length","args","Array","_key","apply","concat","inner","props","multiLine","id","stateName","refHandler","control","render","a","createElement","className","htmlFor","label","ref","state","readOnly","onChange","onClick","onFocus","Component","defaultProps","7lKn","controlThreats","threats","_state$game","game","frame","frameLength","fieldWidth","fieldHeight","newThreats","map","threat","_extends","x","speed","y","beat","removeProbability","size","oldThreatsNum","filter","isAroundField","outs","beats","isGoingOut","isOut","added","limit","lastTime","addTimeout","push","newThreat","index","maxSpeed","newState","__WEBPACK_IMPORTED_MODULE_0_lodash___default","merge","__WEBPACK_IMPORTED_MODULE_0_lodash__","__WEBPACK_IMPORTED_MODULE_1__utils_funcs__","assign","target","i","source","key","hasOwnProperty","processSpeed","canFlyAway","axis","lean","Math","abs","random","processThreat","rightBorder","bottomBorder","round","ceil","9jEl","__WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__","__WEBPACK_IMPORTED_MODULE_1__constants_game__","initialState","redSquares","inputController","status","stop","highestBeats","startTime","sideWidth","undefined","action","type","_","extend","data","BCEp","hero","heroInTrouble","BCOr","__WEBPACK_IMPORTED_MODULE_0__game__","ChGC","defineProperty","__WEBPACK_IMPORTED_MODULE_1__hero__","__WEBPACK_IMPORTED_MODULE_2__threats__","EBfR","spacePress","play","statusUpdate","pause","gameDataUpdater","oldData","nextPlayFrame","__WEBPACK_IMPORTED_MODULE_2__utils_funcs__","__WEBPACK_IMPORTED_MODULE_3__hero__","__WEBPACK_IMPORTED_MODULE_4__threats__","J2UN","JglD","noOperation","QCNp","__WEBPACK_IMPORTED_MODULE_1_react_redux__","__WEBPACK_IMPORTED_MODULE_2_redux__","__WEBPACK_IMPORTED_MODULE_3_lodash__","__WEBPACK_IMPORTED_MODULE_4__actions__","__WEBPACK_IMPORTED_MODULE_5__constants_game__","__WEBPACK_IMPORTED_MODULE_6__StateControl__","__WEBPACK_IMPORTED_MODULE_7__RedSquares_less__","__WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default","Sidebar","_dec","threatsLength","heroSize","threatSize","threatLimit","threatAddTimeout","threatRemoveProbability","dispatch","processSpacePress","setState","clearHighest","getS","name","num","changeHandler","event","initialValue","parseInt","side","style","width","WNaE","WS4u","Connector","_ref","children","Children","child","isValidElement","cloneElement","WwO4","YhS/","HERO_STATUSES","normal","trouble","ZJmM","__WEBPACK_IMPORTED_MODULE_2__constants_hero__","bHK7","HIGHEST_BEATS","DEFAULTS","GAME_STATUS","BUTTON_NAMES","IDS","_BUTTON_NAMES","cilB","gIL8","__WEBPACK_IMPORTED_MODULE_1_redux__","__WEBPACK_IMPORTED_MODULE_2_react_redux__","__WEBPACK_IMPORTED_MODULE_5__constants_hero__","__WEBPACK_IMPORTED_MODULE_6__components_Hero_less__","__WEBPACK_IMPORTED_MODULE_6__components_Hero_less___default","__WEBPACK_IMPORTED_MODULE_8__Field__","__WEBPACK_IMPORTED_MODULE_9__Square__","__WEBPACK_IMPORTED_MODULE_10__Sidebar__","RedSquares","_heroStyleMap","heroStyleMap","heroStatus","heroPos","init","getFieldSize","fieldRect","field","left","offsetLeft","top","offsetTop","right","clientWidth","bottom","clientHeight","elem","componentDidMount","_this2","wrapper","height","hB/+","getState","spacePressAtStart","updateFrame","reactToKeys","32","mousePos","__WEBPACK_IMPORTED_MODULE_2__utils_InputCatcher__","__WEBPACK_IMPORTED_MODULE_3__game_logic__","waitTime","performance","now","floor","localStorage","setItem","max","setTimeout","removeItem","_game","iMa0","moveHero","min","getHeroStatus","safeLength","sizeFix","some","lVK7","__WEBPACK_IMPORTED_MODULE_1_react_dom__","__WEBPACK_IMPORTED_MODULE_2__App__","__WEBPACK_IMPORTED_MODULE_3__index_css__","document","querySelector","liqn","InputCatcher","_initialiseProps","keymap","initialKeymap","onmousemove","saveMousePos","window","onkeydown","process","keyPressed","e","pageX","pageY","keyCode","preventDefault","saveKeyPressed","forEach","sMfP","__WEBPACK_IMPORTED_MODULE_2_redux_thunk__","__WEBPACK_IMPORTED_MODULE_2_redux_thunk___default","__WEBPACK_IMPORTED_MODULE_3_react_redux__","__WEBPACK_IMPORTED_MODULE_4__reducers__","__WEBPACK_IMPORTED_MODULE_5__components_RedSquares__","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","App","t9xF","__WEBPACK_IMPORTED_MODULE_0__Input__","__WEBPACK_IMPORTED_MODULE_1__Connector__","tNBi","tozq","Setter","text","tabIndex","_ref2","setters","tabIndexOffset","setter","params","vlrw","combineProcessors","processors","reduce","result","processor","sign","isNaN","w0AC","__WEBPACK_IMPORTED_MODULE_1_lodash__","__WEBPACK_IMPORTED_MODULE_1_lodash___default","Square","noop","yPl1","Field"],"mappings":"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","file":"app.21ebbdbd.js","sourcesContent":["webpackJsonp([1,2],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"+prg\");\nmodule.exports = __webpack_require__(\"lVK7\");\n\n\n/***/ }),\n\n/***/ \"4HHy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return INIT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return SET_STATE; });\nvar INIT = 'INIT';\nvar SET_STATE = 'SET_STATE';\n\n/***/ }),\n\n/***/ \"6e+x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils__ = __webpack_require__(\"JglD\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Input_css__ = __webpack_require__(\"WwO4\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Input_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__Input_css__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Input; });\nvar _class, _temp2;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar Input = (_temp2 = _class = function (_React$Component) {\n    _inherits(Input, _React$Component);\n\n    function Input() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Input);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.inner = _this.props.multiLine ? 'textarea' : 'input', _this.id = 'labeled-control-' + _this.props.id, _this.stateName = _this.props.stateName || _this.props.id, _this.refHandler = function (control) {\n            _this.control = control;\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    Input.prototype.render = function render() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { className: 'labeled-input' },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'label',\n                { htmlFor: this.id },\n                this.props.label\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(this.inner, {\n                id: this.id,\n                label: this.props.label,\n                ref: this.refHandler,\n                value: this.props.state[this.stateName] || this.props.value,\n                readOnly: this.props.readOnly,\n                onChange: this.props.onChange(this.stateName),\n                onClick: this.props.onClick(this),\n                onFocus: this.props.onFocus(this)\n            })\n        );\n    };\n\n    return Input;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component), _class.defaultProps = {\n    value: '',\n    onChange: __WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* noOperation */],\n    onClick: __WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* noOperation */],\n    onFocus: __WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* noOperation */],\n    multiLine: false\n}, _temp2);\n\n/***/ }),\n\n/***/ \"7lKn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_funcs__ = __webpack_require__(\"vlrw\");\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = controlThreats;\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\nvar processSpeed = function processSpeed(newThreat, size, canFlyAway) {\n    return function (axis, lean) {\n        newThreat.isGoingOut = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_funcs__[\"a\" /* sign */])(lean) === __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__utils_funcs__[\"a\" /* sign */])(newThreat.speed[axis]);\n\n        if (!newThreat.isOut) {\n            if (canFlyAway && newThreat.isGoingOut) {\n                newThreat.isOut = true;\n            } else {\n                newThreat.speed[axis] = (newThreat.isGoingOut ? -1 : 1) * (newThreat.speed[axis] || 1);\n            }\n        }\n        if (Math.abs(lean) > size * 3) {\n            newThreat.isAroundField = false;\n        }\n\n        return newThreat;\n    };\n};\n\nvar beat = function beat(removeProbability, size, fieldWidth, fieldHeight) {\n    return function (threat) {\n        var newThreat = _extends({}, threat);\n        var canFlyAway = Math.random() < 1 / removeProbability;\n        var processThreat = processSpeed(newThreat, size, canFlyAway);\n\n        if (newThreat.x < 0) {\n            newThreat = processThreat('x', newThreat.x);\n        }\n        var rightBorder = fieldWidth - size;\n        if (newThreat.x > rightBorder) {\n            newThreat = processThreat('x', newThreat.x - rightBorder);\n        }\n\n        if (newThreat.y < 0) {\n            newThreat = processThreat('y', newThreat.y);\n        }\n        var bottomBorder = fieldHeight - size;\n        if (newThreat.y > bottomBorder) {\n            newThreat = processThreat('y', newThreat.y - bottomBorder);\n        }\n\n        return newThreat;\n    };\n};\n\nvar newThreat = function newThreat(size, index, fieldWidth, fieldHeight, maxSpeed) {\n    var x = Math.round(Math.random() * (fieldWidth - size));\n    var y = 0 - size;\n    var speed = {\n        x: Math.round((Math.random() * 2 - 1) * maxSpeed),\n        y: Math.ceil(Math.random() * maxSpeed)\n    };\n\n    if (Math.random() < 0.5) {\n        x = 0 - size;\n        y = Math.round(Math.random() * (fieldHeight - size));\n        speed = {\n            x: Math.ceil(Math.random() * maxSpeed),\n            y: Math.round((Math.random() * 2 - 1) * maxSpeed)\n        };\n\n        if (Math.random() < 0.5) {\n            x = fieldWidth;\n            speed.x *= -1;\n        }\n    } else if (Math.random() < 0.5) {\n        y = fieldHeight;\n        speed.y *= -1;\n    }\n    return {\n        id: index,\n        x: x,\n        y: y,\n        speed: speed,\n        isOut: false,\n        isAroundField: true\n    };\n};\n\nfunction controlThreats(state) {\n    var threats = state.threats;\n    var _state$game = state.game,\n        frame = _state$game.frame,\n        frameLength = _state$game.frameLength,\n        fieldWidth = _state$game.fieldWidth,\n        fieldHeight = _state$game.fieldHeight;\n\n\n    var newThreats = threats.threats.map(function (threat) {\n        return _extends({}, threat, {\n            x: threat.x + threat.speed.x,\n            y: threat.y + threat.speed.y\n        });\n    }).map(beat(threats.removeProbability, threats.size, fieldWidth, fieldHeight));\n    var oldThreatsNum = newThreats.length;\n    newThreats = newThreats.filter(function (threat) {\n        return threat.isAroundField;\n    });\n    var outs = oldThreatsNum - newThreats.length;\n\n    var beats = 0;\n\n    newThreats = newThreats.map(function (threat) {\n        if (threat.isGoingOut && !threat.isOut) {\n            beats += 1;\n            delete threat.isGoingOut;\n        }\n        return threat;\n    }, 0);\n\n    var added = 0;\n    if (newThreats.length < threats.limit && frame >= threats.lastTime + threats.addTimeout / frameLength) {\n        newThreats.push(newThreat(threats.size, threats.index, fieldWidth, fieldHeight, threats.maxSpeed));\n        added = 1;\n    }\n\n    var newState = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.merge({}, state, {\n        game: {\n            beats: state.game.beats + beats,\n            outs: state.game.outs + outs\n        },\n        threats: {\n            lastTime: added ? frame : threats.lastTime,\n            index: threats.index + added\n        }\n    });\n\n    newState.threats.threats = newThreats;\n\n    return newState;\n}\n\n/***/ }),\n\n/***/ \"9jEl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_hero__ = __webpack_require__(\"YhS/\");\n\n\n\n\nvar initialState = {\n    redSquares: null,\n    inputController: null,\n    status: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].stop,\n    beats: 0,\n    highestBeats: 0,\n    outs: 0,\n    frame: 0,\n    startTime: 0,\n    frameLength: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].frameLength, // TODO move to constants when it will defined\n    fieldWidth: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].fieldWidth,\n    fieldHeight: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].fieldHeight,\n    sideWidth: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].sideWidth\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"b\" /* INIT */]:\n            return _.extend({}, state, action.data);\n        case __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */]:\n            return _.extend({}, state, action.data.game);\n        default:\n            return state;\n    }\n};\n\n/***/ }),\n\n/***/ \"BCEp\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"hero\":\"Hero__hero__2Sa-c\",\"heroInTrouble\":\"Hero__heroInTrouble__3oF4r\"};\n\n/***/ }),\n\n/***/ \"BCOr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__game__ = __webpack_require__(\"hB/+\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__; });\n\n\n\n\n/***/ }),\n\n/***/ \"ChGC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__game__ = __webpack_require__(\"9jEl\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"game\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__hero__ = __webpack_require__(\"ZJmM\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"hero\", function() { return __WEBPACK_IMPORTED_MODULE_1__hero__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__threats__ = __webpack_require__(\"WNaE\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"threats\", function() { return __WEBPACK_IMPORTED_MODULE_2__threats__[\"a\"]; });\n\n\n\n\n/***/ }),\n\n/***/ \"EBfR\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_funcs__ = __webpack_require__(\"vlrw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__hero__ = __webpack_require__(\"iMa0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__threats__ = __webpack_require__(\"7lKn\");\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = spacePress;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = gameDataUpdater;\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\n\nvar statusUpdate = function statusUpdate(state, status) {\n    return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.merge({}, state, {\n        game: {\n            status: status\n        }\n    });\n};\n\nfunction spacePress(state, startTime) {\n    switch (state.game.status) {\n        case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play:\n            return statusUpdate(state, __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].pause);\n        case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].pause:\n            return statusUpdate(state, __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play);\n        case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].stop:\n        default:\n            return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.merge({}, state, {\n                game: {\n                    status: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play,\n                    beats: 0,\n                    outs: 0,\n                    frame: 0,\n                    startTime: startTime\n                },\n                threats: {\n                    threats: [],\n                    lastTime: 0 - state.threats.addTimeout / state.game.frameLength\n                }\n            });\n    }\n}\n\nvar nextPlayFrame = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__utils_funcs__[\"b\" /* combineProcessors */])(__WEBPACK_IMPORTED_MODULE_4__threats__[\"a\" /* controlThreats */], __WEBPACK_IMPORTED_MODULE_3__hero__[\"a\" /* moveHero */]);\n\nfunction gameDataUpdater(oldData) {\n    var data = _extends({}, oldData);\n\n    if (data.game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play) {\n        data = nextPlayFrame(data);\n    }\n\n    return data;\n}\n\n/***/ }),\n\n/***/ \"J2UN\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__game__ = __webpack_require__(\"EBfR\");\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__[\"a\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__hero__ = __webpack_require__(\"iMa0\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__threats__ = __webpack_require__(\"7lKn\");\n/* unused harmony namespace reexport */\n\n\n\n\n/***/ }),\n\n/***/ \"JglD\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return noOperation; });\nvar noOperation = function noOperation() {};\n\n/***/ }),\n\n/***/ \"QCNp\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_redux__ = __webpack_require__(\"RH2O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_redux__ = __webpack_require__(\"2KeS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__actions__ = __webpack_require__(\"BCOr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__StateControl__ = __webpack_require__(\"t9xF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__RedSquares_less__ = __webpack_require__(\"tNBi\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__RedSquares_less__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Sidebar; });\nvar _dec, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\nvar Sidebar = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_react_redux__[\"b\" /* connect */])(function (state) {\n    return {\n        sideWidth: state.game.sideWidth,\n        status: state.game.status,\n        beats: state.game.beats,\n        highestBeats: state.game.highestBeats,\n        outs: state.game.outs,\n        threatsLength: state.threats.threats.length,\n        heroSize: state.hero.size,\n        threatSize: state.threats.size,\n        threatLimit: state.threats.limit,\n        threatAddTimeout: state.threats.addTimeout,\n        threatRemoveProbability: state.threats.removeProbability,\n        fieldWidth: state.game.fieldWidth,\n        fieldHeight: state.game.fieldHeight\n    };\n}, function (dispatch) {\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_redux__[\"e\" /* bindActionCreators */])({\n        processSpacePress: __WEBPACK_IMPORTED_MODULE_4__actions__[\"a\" /* game */].processSpacePress,\n        setState: __WEBPACK_IMPORTED_MODULE_4__actions__[\"a\" /* game */].setState,\n        clearHighest: __WEBPACK_IMPORTED_MODULE_4__actions__[\"a\" /* game */].clearHighest\n    }, dispatch);\n}), _dec(_class = function (_React$Component) {\n    _inherits(Sidebar, _React$Component);\n\n    function Sidebar() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Sidebar);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.getS = function (name, num) {\n            return (num || 'No') + ' ' + name + (num !== 1 ? 's' : '');\n        }, _this.changeHandler = function (state) {\n            return function (event) {\n                var initialValue = event.target.value;\n                var value = void 0;\n\n                switch (state) {\n                    default:\n                        value = parseInt(initialValue, 10) || 1;\n                }\n                _this.props.setState(state, value);\n            };\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    Sidebar.prototype.render = function render() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { className: __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default.a.side, style: { width: this.props.sideWidth + 'px' } },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'button',\n                { onClick: this.props.processSpacePress },\n                __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"a\" /* BUTTON_NAMES */][this.props.status]\n            ),\n            ' (Press Space)',\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'h2',\n                null,\n                this.getS('beat', this.props.beats)\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'p',\n                null,\n                'Highest beats: ',\n                this.props.highestBeats\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'p',\n                null,\n                this.getS('out', this.props.outs)\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'p',\n                null,\n                this.getS('threat', this.props.threatsLength),\n                ' on field'\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_6__StateControl__[\"a\" /* Connector */],\n                {\n                    state: this.props,\n                    onChange: this.changeHandler\n                },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__StateControl__[\"b\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"b\" /* IDS */].heroSize,\n                    label: 'Hero size (px)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__StateControl__[\"b\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"b\" /* IDS */].threatSize,\n                    label: 'Threat size (px)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__StateControl__[\"b\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"b\" /* IDS */].threatLimit,\n                    label: 'Threat limit'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__StateControl__[\"b\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"b\" /* IDS */].threatAddTimeout,\n                    label: 'Threat add timeout (ms)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__StateControl__[\"b\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"b\" /* IDS */].threatRemoveProbability,\n                    label: 'Threat remove probability (1/x)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__StateControl__[\"b\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"b\" /* IDS */].fieldWidth,\n                    label: 'Field width (px)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__StateControl__[\"b\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_5__constants_game__[\"b\" /* IDS */].fieldHeight,\n                    label: 'Field height (px)'\n                })\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'button',\n                { onClick: this.props.clearHighest },\n                'Clear highest'\n            )\n        );\n    };\n\n    return Sidebar;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component)) || _class);\n\n\n/***/ }),\n\n/***/ \"WNaE\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_game__ = __webpack_require__(\"bHK7\");\n\n\n\nvar initialState = {\n    threats: [],\n    size: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].threatSize,\n    lastTime: 0,\n    addTimeout: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].threatAddTimeout,\n    index: 0,\n    limit: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].threatLimit,\n    removeProbability: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].threatRemoveProbability,\n    maxSpeed: 4\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */]:\n            return _.extend({}, state, action.data.threats);\n        default:\n            return state;\n    }\n};\n\n/***/ }),\n\n/***/ \"WS4u\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils__ = __webpack_require__(\"JglD\");\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Connector; });\n\n\n\nvar Connector = function Connector(_ref) {\n    var children = _ref.children,\n        state = _ref.state,\n        onChange = _ref.onChange,\n        onClick = _ref.onClick,\n        onFocus = _ref.onFocus;\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        null,\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.Children.map(children, function (child) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.isValidElement(child) ? __WEBPACK_IMPORTED_MODULE_0_react___default.a.cloneElement(child, {\n                state: state,\n                onChange: onChange,\n                onClick: onClick,\n                onFocus: onFocus\n            }) : child;\n        })\n    );\n};\n\nConnector.defaultProps = {\n    state: {},\n    onChange: __WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* noOperation */],\n    onClick: __WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* noOperation */],\n    onFocus: __WEBPACK_IMPORTED_MODULE_1__utils__[\"a\" /* noOperation */]\n};\n\n/***/ }),\n\n/***/ \"WwO4\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"YhS/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return HERO_STATUSES; });\nvar HERO_STATUSES = {\n    normal: 'normal',\n    trouble: 'trouble'\n};\n\n/***/ }),\n\n/***/ \"ZJmM\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_hero__ = __webpack_require__(\"YhS/\");\n\n\n\n\nvar initialState = {\n    x: (__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].fieldWidth - __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].heroSize) / 2,\n    y: (__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].fieldHeight - __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].heroSize) / 2,\n    status: __WEBPACK_IMPORTED_MODULE_2__constants_hero__[\"a\" /* HERO_STATUSES */].normal,\n    size: __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"e\" /* DEFAULTS */].heroSize\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */]:\n            return _.extend({}, state, action.data.hero);\n        default:\n            return state;\n    }\n};\n\n/***/ }),\n\n/***/ \"bHK7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return HIGHEST_BEATS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return DEFAULTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return GAME_STATUS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return BUTTON_NAMES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return IDS; });\nvar _BUTTON_NAMES;\n\nvar HIGHEST_BEATS = 'highestBeats';\n\nvar DEFAULTS = {\n    frameLength: 20,\n    heroSize: 50,\n    threatSize: 30,\n    threatLimit: 20,\n    threatAddTimeout: 1000,\n    threatRemoveProbability: 5,\n    fieldWidth: 800,\n    fieldHeight: 600,\n    sideWidth: 200\n};\n\nvar GAME_STATUS = {\n    play: 'play',\n    pause: 'pause',\n    stop: 'stop'\n};\n\nvar BUTTON_NAMES = (_BUTTON_NAMES = {}, _BUTTON_NAMES[GAME_STATUS.play] = 'Pause', _BUTTON_NAMES[GAME_STATUS.pause] = 'Resume', _BUTTON_NAMES[GAME_STATUS.stop] = 'Start', _BUTTON_NAMES);\n\nvar IDS = {\n    heroSize: 'heroSize',\n    threatSize: 'threatSize',\n    threatLimit: 'threatLimit',\n    threatAddTimeout: 'threatAddTimeout',\n    threatRemoveProbability: 'threatRemoveProbability',\n    fieldWidth: 'fieldWidth',\n    fieldHeight: 'fieldHeight'\n};\n\n/***/ }),\n\n/***/ \"cilB\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"gIL8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_redux__ = __webpack_require__(\"2KeS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_redux__ = __webpack_require__(\"RH2O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__actions__ = __webpack_require__(\"BCOr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__constants_hero__ = __webpack_require__(\"YhS/\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_Hero_less__ = __webpack_require__(\"BCEp\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_Hero_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__components_Hero_less__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__RedSquares_less__ = __webpack_require__(\"tNBi\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__RedSquares_less__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Field__ = __webpack_require__(\"yPl1\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Square__ = __webpack_require__(\"w0AC\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__Sidebar__ = __webpack_require__(\"QCNp\");\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RedSquares; });\nvar _heroStyleMap, _dec, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar heroStyleMap = (_heroStyleMap = {}, _heroStyleMap[__WEBPACK_IMPORTED_MODULE_5__constants_hero__[\"a\" /* HERO_STATUSES */].normal] = __WEBPACK_IMPORTED_MODULE_6__components_Hero_less___default.a.hero, _heroStyleMap[__WEBPACK_IMPORTED_MODULE_5__constants_hero__[\"a\" /* HERO_STATUSES */].trouble] = __WEBPACK_IMPORTED_MODULE_6__components_Hero_less___default.a.heroInTrouble, _heroStyleMap);\n\nvar RedSquares = (_dec = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2_react_redux__[\"b\" /* connect */])(function (state) {\n    return {\n        fieldWidth: state.game.fieldWidth,\n        fieldHeight: state.game.fieldHeight,\n        sideWidth: state.game.sideWidth,\n        heroStatus: state.hero.status,\n        heroSize: state.hero.size,\n        heroPos: {\n            x: state.hero.x,\n            y: state.hero.y\n        },\n        threatSize: state.threats.size,\n        threats: state.threats.threats\n    };\n}, function (dispatch) {\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_redux__[\"e\" /* bindActionCreators */])({\n        init: __WEBPACK_IMPORTED_MODULE_4__actions__[\"a\" /* game */].init\n    }, dispatch);\n}), _dec(_class = function (_React$Component) {\n    _inherits(RedSquares, _React$Component);\n\n    function RedSquares() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, RedSquares);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.getFieldSize = function () {\n            var fieldRect = _this.field;\n            // TODO check in browsers and rewrite like https://learn.javascript.ru/coordinates-document\n            return {\n                left: fieldRect.offsetLeft,\n                top: fieldRect.offsetTop,\n                right: fieldRect.offsetLeft + fieldRect.clientWidth,\n                bottom: fieldRect.offsetTop + fieldRect.clientHeight\n            };\n        }, _this.refHandler = function (elem) {\n            _this.field = elem;\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    RedSquares.prototype.componentDidMount = function componentDidMount() {\n        this.props.init(this);\n    };\n\n    RedSquares.prototype.render = function render() {\n        var _this2 = this;\n\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { className: __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default.a.wrapper, style: { width: this.props.fieldWidth + this.props.sideWidth + 'px' } },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_8__Field__[\"a\" /* default */],\n                {\n                    style: __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default.a.field,\n                    refHandler: this.refHandler,\n                    width: this.props.fieldWidth,\n                    height: this.props.fieldHeight\n                },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__Square__[\"a\" /* default */], {\n                    style: heroStyleMap[this.props.heroStatus],\n                    size: this.props.heroSize,\n                    left: this.props.heroPos.x,\n                    top: this.props.heroPos.y\n                }),\n                this.props.threats.map(function (threat) {\n                    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__Square__[\"a\" /* default */], {\n                        key: threat.id,\n                        style: __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default.a.threat,\n                        size: _this2.props.threatSize,\n                        left: threat.x,\n                        top: threat.y\n                    });\n                })\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__Sidebar__[\"a\" /* default */], null)\n        );\n    };\n\n    return RedSquares;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component)) || _class);\n\n\n/***/ }),\n\n/***/ \"hB/+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_InputCatcher__ = __webpack_require__(\"liqn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__game_logic__ = __webpack_require__(\"J2UN\");\n/* harmony export (immutable) */ __webpack_exports__[\"processSpacePress\"] = processSpacePress;\n/* harmony export (immutable) */ __webpack_exports__[\"clearHighest\"] = clearHighest;\n/* harmony export (immutable) */ __webpack_exports__[\"init\"] = init;\n/* harmony export (immutable) */ __webpack_exports__[\"setState\"] = setState;\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\nvar spacePressAtStart = function spacePressAtStart(state) {\n    return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__game_logic__[\"a\" /* spacePress */])(state, performance.now());\n};\n\nfunction processSpacePress() {\n    return function (dispatch, getState) {\n        dispatch({\n            type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n            data: spacePressAtStart(getState())\n        });\n    };\n}\n\nfunction updateFrame(dispatch, getState) {\n    return function () {\n        var data = getState();\n\n        data.game.inputController.reactToKeys({\n            32: function _() {\n                data = spacePressAtStart(data);\n            }\n        });\n\n        data = _extends({}, data, {\n            mousePos: __WEBPACK_IMPORTED_MODULE_2__utils_InputCatcher__[\"a\" /* default */].mousePos,\n            field: data.game.redSquares.getFieldSize()\n        });\n\n        data.game.frame += 1;\n        data = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__game_logic__[\"b\" /* gameDataUpdater */])(data);\n\n        var waitTime = data.game.startTime + data.game.frameLength * data.game.frame - performance.now();\n        if (waitTime < -1000) {\n            data.game.frame = Math.floor((performance.now() - data.game.startTime) / data.game.frameLength);\n        }\n\n        if (data.game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].stop && getState().game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play) {\n            localStorage.setItem(__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */], data.game.highestBeats = Math.max(data.game.beats, data.game.highestBeats));\n        }\n\n        if (data.game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play || getState().game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play) {\n            dispatch({\n                type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n                data: data\n            });\n        }\n\n        setTimeout(updateFrame(dispatch, getState), Math.max(waitTime, 0));\n    };\n}\n\nfunction clearHighest() {\n    return function (dispatch) {\n        localStorage.removeItem(__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */]);\n\n        dispatch({\n            type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"b\" /* INIT */],\n            data: {\n                highestBeats: 0\n            }\n        });\n    };\n}\n\nfunction init(redSquares) {\n    return function (dispatch, getState) {\n        dispatch({\n            type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"b\" /* INIT */],\n            data: {\n                redSquares: redSquares,\n                inputController: new __WEBPACK_IMPORTED_MODULE_2__utils_InputCatcher__[\"a\" /* default */](),\n                highestBeats: localStorage[__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */]] ? parseInt(localStorage[__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */]], 10) : 0\n            }\n        });\n\n        updateFrame(dispatch, getState)();\n    };\n}\n\nfunction setState(name, value) {\n    return function (dispatch) {\n        var _game;\n\n        switch (name) {\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].frameLength:\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].fieldWidth:\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].fieldHeight:\n                dispatch({\n                    type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n                    data: {\n                        game: (_game = {}, _game[name] = value, _game)\n                    }\n                });\n                break;\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].heroSize:\n                dispatch({\n                    type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n                    data: {\n                        hero: {\n                            size: value\n                        }\n                    }\n                });\n                break;\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].threatSize:\n                dispatch({\n                    type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n                    data: {\n                        threats: {\n                            size: value\n                        }\n                    }\n                });\n                break;\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].threatLimit:\n                dispatch({\n                    type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n                    data: {\n                        threats: {\n                            limit: value\n                        }\n                    }\n                });\n                break;\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].threatAddTimeout:\n                dispatch({\n                    type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n                    data: {\n                        threats: {\n                            addTimeout: value\n                        }\n                    }\n                });\n                break;\n            case __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* IDS */].threatRemoveProbability:\n                dispatch({\n                    type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* SET_STATE */],\n                    data: {\n                        threats: {\n                            removeProbability: value\n                        }\n                    }\n                });\n                break;\n            default:\n        }\n    };\n}\n\n/***/ }),\n\n/***/ \"iMa0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_hero__ = __webpack_require__(\"YhS/\");\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = moveHero;\n\n\n\n\nvar getHeroStatus = function getHeroStatus(x, y, heroSize, threatSize, threats) {\n    var safeLength = (heroSize + threatSize) / 2;\n    var sizeFix = (threatSize - heroSize) / 2;\n\n    if (threats.some(function (threat) {\n        return Math.abs(threat.x - x + sizeFix) < safeLength && Math.abs(threat.y - y + sizeFix) < safeLength;\n    })) {\n\n        return __WEBPACK_IMPORTED_MODULE_2__constants_hero__[\"a\" /* HERO_STATUSES */].trouble;\n    }\n\n    return __WEBPACK_IMPORTED_MODULE_2__constants_hero__[\"a\" /* HERO_STATUSES */].normal;\n};\n\nfunction moveHero(state) {\n    var mousePos = state.mousePos,\n        field = state.field,\n        hero = state.hero;\n    var threats = state.threats.threats;\n\n    var threatSize = state.threats.size;\n\n    var x = Math.max(mousePos.x - hero.size / 2, field.left);\n    x = Math.min(x, field.right - hero.size);\n    x -= field.left;\n    var y = Math.max(mousePos.y - hero.size / 2, field.top);\n    y = Math.min(y, field.bottom - hero.size);\n    y -= field.top;\n\n    var status = getHeroStatus(x, y, hero.size, threatSize, threats);\n\n    return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.merge({}, state, {\n        game: {\n            status: status === __WEBPACK_IMPORTED_MODULE_2__constants_hero__[\"a\" /* HERO_STATUSES */].normal ? __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play : __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].stop\n        },\n        hero: {\n            x: x,\n            y: y,\n            status: status\n        }\n    });\n}\n\n/***/ }),\n\n/***/ \"lVK7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom__ = __webpack_require__(\"O27J\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__App__ = __webpack_require__(\"sMfP\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__index_css__ = __webpack_require__(\"cilB\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__index_css__);\n\n\n\n\n\n__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_react_dom__[\"render\"])(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__App__[\"a\" /* default */], null), document.querySelector('#app'));\n\n/***/ }),\n\n/***/ \"liqn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return InputCatcher; });\nvar _class, _temp, _initialiseProps;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar InputCatcher = (_temp = _class = function InputCatcher(keymap) {\n    _classCallCheck(this, InputCatcher);\n\n    _initialiseProps.call(this);\n\n    this.initialKeymap = keymap;\n\n    if (InputCatcher.instance) {\n        return InputCatcher.instance;\n    }\n    InputCatcher.instance = this;\n\n    document.onmousemove = this.saveMousePos;\n    window.document.onkeydown = this.process;\n}, _class.mousePos = {}, _class.keyPressed = [], _initialiseProps = function _initialiseProps() {\n    var _this = this;\n\n    this.initialKeymap = {};\n\n    this.saveMousePos = function (e) {\n        InputCatcher.mousePos = {\n            x: e.pageX,\n            y: e.pageY\n        };\n    };\n\n    this.process = function (e) {\n        if (e.keyCode === 32) {\n            e.preventDefault();\n        }\n        _this.saveKeyPressed(e);\n    };\n\n    this.saveKeyPressed = function (_ref) {\n        var keyCode = _ref.keyCode;\n        return InputCatcher.keyPressed.push(keyCode);\n    };\n\n    this.reactToKeys = function () {\n        var keymap = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.initialKeymap;\n\n        InputCatcher.keyPressed.forEach(function (key) {\n            return keymap[key] && keymap[key]();\n        });\n        InputCatcher.keyPressed = [];\n    };\n}, _temp);\n\n\n/***/ }),\n\n/***/ \"sMfP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_redux__ = __webpack_require__(\"2KeS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_redux_thunk__ = __webpack_require__(\"4ufr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_redux_thunk___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_redux_thunk__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_redux__ = __webpack_require__(\"RH2O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__reducers__ = __webpack_require__(\"ChGC\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_RedSquares__ = __webpack_require__(\"gIL8\");\n\n\n\n\n\n\n\nvar composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ // eslint-disable-line no-underscore-dangle\n|| __WEBPACK_IMPORTED_MODULE_1_redux__[\"a\" /* compose */];\nvar store = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_redux__[\"b\" /* createStore */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_redux__[\"c\" /* combineReducers */])(__WEBPACK_IMPORTED_MODULE_4__reducers__), composeEnhancers(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_redux__[\"d\" /* applyMiddleware */])(__WEBPACK_IMPORTED_MODULE_2_redux_thunk___default.a)));\n\nvar App = function App() {\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        __WEBPACK_IMPORTED_MODULE_3_react_redux__[\"a\" /* Provider */],\n        { store: store },\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__components_RedSquares__[\"a\" /* default */], null)\n    );\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = App;\n\n/***/ }),\n\n/***/ \"t9xF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Input__ = __webpack_require__(\"6e+x\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_0__Input__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Connector__ = __webpack_require__(\"WS4u\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_1__Connector__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__SettersBlock__ = __webpack_require__(\"tozq\");\n/* unused harmony reexport SettersBlock */\n\n\n\n\n/***/ }),\n\n/***/ \"tNBi\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"field\":\"RedSquares__field__3S_U-\",\"threat\":\"RedSquares__threat__3sdY0\",\"side\":\"RedSquares__side__1Qama\"};\n\n/***/ }),\n\n/***/ \"tozq\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* unused harmony export SettersBlock */\n\n\nvar Setter = function Setter(_ref) {\n    var text = _ref.text,\n        tabIndex = _ref.tabIndex,\n        onClick = _ref.onClick;\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        \"div\",\n        { className: \"setter\" },\n        __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            \"a\",\n            { onClick: onClick, tabIndex: tabIndex },\n            text\n        )\n    );\n};\n\nvar SettersBlock = function SettersBlock(_ref2) {\n    var setters = _ref2.setters,\n        setState = _ref2.setState,\n        tabIndexOffset = _ref2.tabIndexOffset;\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        \"div\",\n        null,\n        setters.map(function (setter, index) {\n            return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(Setter, {\n                onClick: function onClick() {\n                    return setState(setter.params);\n                },\n                key: index,\n                tabIndex: index + tabIndexOffset,\n                text: setter.text\n            });\n        })\n    );\n};\n\nSettersBlock.defaultProps = {\n    tabIndexOffset: 1\n};\n\n/***/ }),\n\n/***/ \"vlrw\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = combineProcessors;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = sign;\nfunction combineProcessors() {\n    for (var _len = arguments.length, processors = Array(_len), _key = 0; _key < _len; _key++) {\n        processors[_key] = arguments[_key];\n    }\n\n    return function (state) {\n        return processors.reduce(function (result, processor) {\n            return processor(result);\n        }, state);\n    };\n}\n\nfunction sign(num) {\n    if (num === 0 || isNaN(num)) {\n        return num;\n    }\n\n    return num > 0 ? 1 : -1;\n}\n\n/***/ }),\n\n/***/ \"w0AC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n\n\n\nvar Square = function Square(_ref) {\n    var top = _ref.top,\n        left = _ref.left,\n        size = _ref.size,\n        style = _ref.style,\n        refHandler = _ref.refHandler;\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div', {\n        ref: refHandler,\n        className: style,\n        style: {\n            width: size + 'px',\n            height: size + 'px',\n            top: top + 'px',\n            left: left + 'px'\n        }\n    });\n};\n\nSquare.defaultProps = {\n    refHandler: __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.noop\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = Square;\n\n/***/ }),\n\n/***/ \"yPl1\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"U7vG\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);\n\n\n\nvar Field = function Field(_ref) {\n    var style = _ref.style,\n        children = _ref.children,\n        refHandler = _ref.refHandler,\n        width = _ref.width,\n        height = _ref.height;\n    return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n        'div',\n        {\n            ref: refHandler,\n            className: style,\n            style: {\n                width: width + 'px',\n                height: height + 'px'\n            }\n        },\n        children\n    );\n};\n\nField.defaultProps = {\n    children: null,\n    refHandler: __WEBPACK_IMPORTED_MODULE_1_lodash___default.a.noop,\n    width: 640,\n    height: 480\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = Field;\n\n/***/ })\n\n},[0]);\n\n\n// WEBPACK FOOTER //\n// app.21ebbdbd.js","export const INIT = 'INIT'\r\nexport const SET_STATE = 'SET_STATE'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/actionTypes.js","import React, { PropTypes } from 'react'\r\nimport { noOperation } from './utils'\r\nimport './Input.css'\r\n\r\nexport class Input extends React.Component {\r\n    static propTypes = {\r\n        id: PropTypes.string.isRequired,\r\n        label: PropTypes.string.isRequired,\r\n        state: PropTypes.object,\r\n        stateName: PropTypes.string,\r\n        value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n        readOnly: PropTypes.bool,\r\n        onChange: PropTypes.func,\r\n        onClick: PropTypes.func,\r\n        onFocus: PropTypes.func,\r\n        multiLine: PropTypes.bool,\r\n    }\r\n\r\n    static defaultProps = {\r\n        value: '',\r\n        onChange: noOperation,\r\n        onClick: noOperation,\r\n        onFocus: noOperation,\r\n        multiLine: false,\r\n    }\r\n\r\n    inner = this.props.multiLine ? 'textarea' : 'input'\r\n    id = `labeled-control-${this.props.id}`\r\n    stateName = this.props.stateName || this.props.id\r\n\r\n    refHandler = (control) => {\r\n        this.control = control\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div className=\"labeled-input\">\r\n                <label htmlFor={this.id}>{this.props.label}</label>\r\n                <this.inner\r\n                    id={this.id}\r\n                    label={this.props.label}\r\n                    ref={this.refHandler}\r\n                    value={this.props.state[this.stateName] || this.props.value}\r\n                    readOnly={this.props.readOnly}\r\n                    onChange={this.props.onChange(this.stateName)}\r\n                    onClick={this.props.onClick(this)}\r\n                    onFocus={this.props.onFocus(this)}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/Input.jsx","import _ from 'lodash'\r\nimport { sign } from '../utils/funcs'\r\n\r\nconst processSpeed = (newThreat, size, canFlyAway) => (axis, lean) => {\r\n    newThreat.isGoingOut = sign(lean) === sign(newThreat.speed[axis])\r\n\r\n    if (!newThreat.isOut) {\r\n        if (canFlyAway && newThreat.isGoingOut) {\r\n            newThreat.isOut = true\r\n        } else {\r\n            newThreat.speed[axis] = (newThreat.isGoingOut ? -1 : 1) * (newThreat.speed[axis] || 1)\r\n        }\r\n    }\r\n    if (Math.abs(lean) > size * 3) {\r\n        newThreat.isAroundField = false\r\n    }\r\n\r\n    return newThreat\r\n}\r\n\r\nconst beat = (removeProbability,\r\n              size,\r\n              fieldWidth,\r\n              fieldHeight) =>\r\n    (threat) => {\r\n        let newThreat = { ...threat }\r\n        const canFlyAway = Math.random() < 1 / removeProbability\r\n        const processThreat = processSpeed(newThreat, size, canFlyAway)\r\n\r\n        if (newThreat.x < 0) {\r\n            newThreat = processThreat('x', newThreat.x)\r\n        }\r\n        const rightBorder = fieldWidth - size\r\n        if (newThreat.x > rightBorder) {\r\n            newThreat = processThreat('x', newThreat.x - rightBorder)\r\n        }\r\n\r\n        if (newThreat.y < 0) {\r\n            newThreat = processThreat('y', newThreat.y)\r\n        }\r\n        const bottomBorder = fieldHeight - size\r\n        if (newThreat.y > bottomBorder) {\r\n            newThreat = processThreat('y', newThreat.y - bottomBorder)\r\n        }\r\n\r\n        return newThreat\r\n    }\r\n\r\nconst newThreat = (size, index, fieldWidth, fieldHeight, maxSpeed) => {\r\n    let x = Math.round(Math.random() * (fieldWidth - size))\r\n    let y = 0 - size\r\n    let speed = {\r\n        x: Math.round((Math.random() * 2 - 1) * maxSpeed),\r\n        y: Math.ceil(Math.random() * maxSpeed),\r\n    }\r\n\r\n    if (Math.random() < 0.5) {\r\n        x = 0 - size\r\n        y = Math.round(Math.random() * (fieldHeight - size))\r\n        speed = {\r\n            x: Math.ceil(Math.random() * maxSpeed),\r\n            y: Math.round((Math.random() * 2 - 1) * maxSpeed),\r\n        }\r\n\r\n        if (Math.random() < 0.5) {\r\n            x = fieldWidth\r\n            speed.x *= -1\r\n        }\r\n    } else if (Math.random() < 0.5) {\r\n        y = fieldHeight\r\n        speed.y *= -1\r\n    }\r\n    return {\r\n        id: index,\r\n        x,\r\n        y,\r\n        speed,\r\n        isOut: false,\r\n        isAroundField: true,\r\n    }\r\n}\r\n\r\nexport function controlThreats (state) {\r\n    const { threats } = state\r\n    const { frame, frameLength, fieldWidth, fieldHeight } = state.game\r\n\r\n    let newThreats = threats.threats\r\n        .map((threat) => (\r\n            {\r\n                ...threat,\r\n                x: threat.x + threat.speed.x,\r\n                y: threat.y + threat.speed.y,\r\n            }\r\n        ))\r\n        .map(beat(\r\n            threats.removeProbability,\r\n            threats.size,\r\n            fieldWidth,\r\n            fieldHeight,\r\n        ))\r\n    const oldThreatsNum = newThreats.length\r\n    newThreats = newThreats.filter((threat) => threat.isAroundField)\r\n    const outs = oldThreatsNum - newThreats.length\r\n\r\n    let beats = 0\r\n\r\n    newThreats = newThreats.map((threat) => {\r\n        if (threat.isGoingOut && !threat.isOut) {\r\n            beats += 1\r\n            delete threat.isGoingOut\r\n        }\r\n        return threat\r\n    }, 0)\r\n\r\n    let added = 0\r\n    if (newThreats.length < threats.limit && frame >= threats.lastTime + (threats.addTimeout / frameLength)) {\r\n        newThreats.push(newThreat(\r\n            threats.size,\r\n            threats.index,\r\n            fieldWidth,\r\n            fieldHeight,\r\n            threats.maxSpeed,\r\n        ))\r\n        added = 1\r\n    }\r\n\r\n    const newState = _.merge({}, state, {\r\n        game: {\r\n            beats: state.game.beats + beats,\r\n            outs: state.game.outs + outs,\r\n        },\r\n        threats: {\r\n            lastTime: added ? frame : threats.lastTime,\r\n            index: threats.index + added,\r\n        },\r\n    })\r\n\r\n    newState.threats.threats = newThreats\r\n\r\n    return newState\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/threats.js","import * as types from '../constants/actionTypes'\r\nimport { DEFAULTS, GAME_STATUS } from '../constants/game'\r\nimport { HERO_STATUSES } from '../constants/hero'\r\n\r\nconst initialState = {\r\n    redSquares: null,\r\n    inputController: null,\r\n    status: GAME_STATUS.stop,\r\n    beats: 0,\r\n    highestBeats: 0,\r\n    outs: 0,\r\n    frame: 0,\r\n    startTime: 0,\r\n    frameLength: DEFAULTS.frameLength, // TODO move to constants when it will defined\r\n    fieldWidth: DEFAULTS.fieldWidth,\r\n    fieldHeight: DEFAULTS.fieldHeight,\r\n    sideWidth: DEFAULTS.sideWidth,\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.INIT:\r\n            return _.extend({}, state, action.data)\r\n        case types.SET_STATE:\r\n            return _.extend({}, state, action.data.game)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/game.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"hero\":\"Hero__hero__2Sa-c\",\"heroInTrouble\":\"Hero__heroInTrouble__3oF4r\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Hero.less\n// module id = BCEp\n// module chunks = 1","import _ from 'lodash'\r\nimport { GAME_STATUS } from '../constants/game'\r\nimport { combineProcessors } from '../utils/funcs'\r\nimport { moveHero } from './hero'\r\nimport { controlThreats } from './threats'\r\n\r\nconst statusUpdate = (state, status) => _.merge({}, state, {\r\n    game: {\r\n        status,\r\n    }\r\n})\r\n\r\nexport function spacePress (state, startTime) {\r\n    switch (state.game.status) {\r\n        case GAME_STATUS.play:\r\n            return statusUpdate(state, GAME_STATUS.pause)\r\n        case GAME_STATUS.pause:\r\n            return statusUpdate(state, GAME_STATUS.play)\r\n        case GAME_STATUS.stop:\r\n        default:\r\n            return _.merge({}, state, {\r\n                game: {\r\n                    status: GAME_STATUS.play,\r\n                    beats: 0,\r\n                    outs: 0,\r\n                    frame: 0,\r\n                    startTime,\r\n                },\r\n                threats: {\r\n                    threats: [],\r\n                    lastTime: 0 - state.threats.addTimeout / state.game.frameLength,\r\n                },\r\n            })\r\n    }\r\n}\r\n\r\nconst nextPlayFrame = combineProcessors(controlThreats, moveHero)\r\n\r\nexport function gameDataUpdater (oldData) {\r\n    let data = {...oldData}\r\n\r\n    if (data.game.status === GAME_STATUS.play) {\r\n        data = nextPlayFrame(data)\r\n    }\r\n\r\n    return data\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/game.js","export const noOperation = () => {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/utils.js","import React, { PropTypes } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport _ from 'lodash'\r\nimport * as actions from '../actions'\r\nimport { GAME_STATUS, BUTTON_NAMES, IDS, HIGHEST_BEATS } from '../constants/game'\r\nimport { Connector, Input } from './StateControl'\r\nimport style from './RedSquares.less'\r\n\r\n@connect(\r\n    (state) => ({\r\n        sideWidth: state.game.sideWidth,\r\n        status: state.game.status,\r\n        beats: state.game.beats,\r\n        highestBeats: state.game.highestBeats,\r\n        outs: state.game.outs,\r\n        threatsLength: state.threats.threats.length,\r\n        heroSize: state.hero.size,\r\n        threatSize: state.threats.size,\r\n        threatLimit: state.threats.limit,\r\n        threatAddTimeout: state.threats.addTimeout,\r\n        threatRemoveProbability: state.threats.removeProbability,\r\n        fieldWidth: state.game.fieldWidth,\r\n        fieldHeight: state.game.fieldHeight,\r\n    }),\r\n    (dispatch) => bindActionCreators({\r\n        processSpacePress: actions.game.processSpacePress,\r\n        setState: actions.game.setState,\r\n        clearHighest: actions.game.clearHighest,\r\n    }, dispatch)\r\n)\r\nexport default class Sidebar extends React.Component {\r\n    static propTypes = {\r\n        sideWidth: PropTypes.number,\r\n        status: PropTypes.oneOf(_.values(GAME_STATUS)),\r\n        beats: PropTypes.number,\r\n        highestBeats: PropTypes.number,\r\n        outs: PropTypes.number,\r\n        threatsLength: PropTypes.number,\r\n        heroSize: PropTypes.number,\r\n        threatSize: PropTypes.number,\r\n        threatLimit: PropTypes.number,\r\n        threatAddTimeout: PropTypes.number,\r\n        threatRemoveProbability: PropTypes.number,\r\n        fieldWidth: PropTypes.number,\r\n        fieldHeight: PropTypes.number,\r\n        processSpacePress: PropTypes.func,\r\n        setState: PropTypes.func,\r\n        clearHighest: PropTypes.func,\r\n    }\r\n\r\n    getS = (name, num) => `${num || 'No'} ${name}${num !== 1 ? 's' : ''}`\r\n\r\n    changeHandler = (state) => (event) => {\r\n        const initialValue = event.target.value\r\n        let value\r\n\r\n        switch (state) {\r\n            default:\r\n                value = parseInt(initialValue, 10) || 1\r\n        }\r\n        this.props.setState(state, value)\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div className={style.side} style={{ width: `${this.props.sideWidth}px` }}>\r\n                <button onClick={this.props.processSpacePress}>{BUTTON_NAMES[this.props.status]}</button>\r\n                {' (Press Space)'}\r\n                <h2>{this.getS('beat', this.props.beats)}</h2>\r\n                <p>Highest beats: {this.props.highestBeats}</p>\r\n                <p>{this.getS('out', this.props.outs)}</p>\r\n                <p>{this.getS('threat', this.props.threatsLength)} on field</p>\r\n\r\n                <Connector\r\n                    state={this.props}\r\n                    onChange={this.changeHandler}\r\n                >\r\n                    <Input\r\n                        id={IDS.heroSize}\r\n                        label=\"Hero size (px)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatSize}\r\n                        label=\"Threat size (px)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatLimit}\r\n                        label=\"Threat limit\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatAddTimeout}\r\n                        label=\"Threat add timeout (ms)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatRemoveProbability}\r\n                        label=\"Threat remove probability (1/x)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.fieldWidth}\r\n                        label=\"Field width (px)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.fieldHeight}\r\n                        label=\"Field height (px)\"\r\n                    />\r\n                </Connector>\r\n                <button onClick={this.props.clearHighest}>Clear highest</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Sidebar.jsx","import * as types from '../constants/actionTypes'\r\nimport { DEFAULTS } from '../constants/game'\r\n\r\nconst initialState = {\r\n    threats: [],\r\n    size: DEFAULTS.threatSize,\r\n    lastTime: 0,\r\n    addTimeout: DEFAULTS.threatAddTimeout,\r\n    index: 0,\r\n    limit: DEFAULTS.threatLimit,\r\n    removeProbability: DEFAULTS.threatRemoveProbability,\r\n    maxSpeed: 4,\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.SET_STATE:\r\n            return _.extend({}, state, action.data.threats)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/threats.js","import React, { PropTypes } from 'react'\r\nimport { noOperation } from './utils'\r\n\r\nexport const Connector = ({ children, state, onChange, onClick, onFocus }) => (\r\n    <div>\r\n        {React.Children.map(\r\n            children,\r\n            (child) => (\r\n                React.isValidElement(child)\r\n                    ? React.cloneElement(child, {\r\n                        state,\r\n                        onChange,\r\n                        onClick,\r\n                        onFocus,\r\n                    })\r\n                    : child\r\n            )\r\n        )}\r\n    </div>\r\n)\r\n\r\nConnector.propTypes = {\r\n    state: PropTypes.object,\r\n    onChange: PropTypes.func,\r\n    onClick: PropTypes.func,\r\n    onFocus: PropTypes.func,\r\n    children: PropTypes.array,\r\n}\r\n\r\nConnector.defaultProps = {\r\n    state: {},\r\n    onChange: noOperation,\r\n    onClick: noOperation,\r\n    onFocus: noOperation,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/Connector.jsx","export const HERO_STATUSES = {\r\n    normal: 'normal',\r\n    trouble: 'trouble',\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/hero.js","import * as types from '../constants/actionTypes'\r\nimport { DEFAULTS } from '../constants/game'\r\nimport { HERO_STATUSES } from '../constants/hero'\r\n\r\nconst initialState = {\r\n    x: (DEFAULTS.fieldWidth - DEFAULTS.heroSize) / 2,\r\n    y: (DEFAULTS.fieldHeight - DEFAULTS.heroSize) / 2,\r\n    status: HERO_STATUSES.normal,\r\n    size: DEFAULTS.heroSize,\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.SET_STATE:\r\n            return _.extend({}, state, action.data.hero)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/hero.js","export const HIGHEST_BEATS = 'highestBeats'\r\n\r\nexport const DEFAULTS = {\r\n    frameLength: 20,\r\n    heroSize: 50,\r\n    threatSize: 30,\r\n    threatLimit: 20,\r\n    threatAddTimeout: 1000,\r\n    threatRemoveProbability: 5,\r\n    fieldWidth: 800,\r\n    fieldHeight: 600,\r\n    sideWidth: 200,\r\n}\r\n\r\nexport const GAME_STATUS = {\r\n    play: 'play',\r\n    pause: 'pause',\r\n    stop: 'stop',\r\n}\r\n\r\nexport const BUTTON_NAMES = {\r\n    [GAME_STATUS.play]: 'Pause',\r\n    [GAME_STATUS.pause]: 'Resume',\r\n    [GAME_STATUS.stop]: 'Start',\r\n}\r\n\r\nexport const IDS = {\r\n    heroSize: 'heroSize',\r\n    threatSize: 'threatSize',\r\n    threatLimit: 'threatLimit',\r\n    threatAddTimeout: 'threatAddTimeout',\r\n    threatRemoveProbability: 'threatRemoveProbability',\r\n    fieldWidth: 'fieldWidth',\r\n    fieldHeight: 'fieldHeight',\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/game.js","import React, { PropTypes } from 'react'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport * as actions from '../actions'\r\nimport { HERO_STATUSES } from '../constants/hero'\r\nimport heroStyle from '../components/Hero.less'\r\nimport style from './RedSquares.less'\r\nimport Field from './Field'\r\nimport Square from './Square'\r\nimport Sidebar from './Sidebar'\r\n\r\nconst heroStyleMap = {\r\n    [HERO_STATUSES.normal]: heroStyle.hero,\r\n    [HERO_STATUSES.trouble]: heroStyle.heroInTrouble,\r\n}\r\n\r\n@connect(\r\n    (state) => ({\r\n        fieldWidth: state.game.fieldWidth,\r\n        fieldHeight: state.game.fieldHeight,\r\n        sideWidth: state.game.sideWidth,\r\n        heroStatus: state.hero.status,\r\n        heroSize: state.hero.size,\r\n        heroPos: {\r\n            x: state.hero.x,\r\n            y: state.hero.y,\r\n        },\r\n        threatSize: state.threats.size,\r\n        threats: state.threats.threats,\r\n    }),\r\n    (dispatch) => bindActionCreators({\r\n        init: actions.game.init,\r\n    }, dispatch)\r\n)\r\nexport default class RedSquares extends React.Component {\r\n    static propTypes = {\r\n        fieldWidth: PropTypes.number,\r\n        fieldHeight: PropTypes.number,\r\n        sideWidth: PropTypes.number,\r\n        heroStatus: PropTypes.oneOf(_.values(HERO_STATUSES)),\r\n        heroSize: PropTypes.number,\r\n        heroPos: PropTypes.shape({\r\n            x: PropTypes.number,\r\n            y: PropTypes.number,\r\n        }),\r\n        threatSize: PropTypes.number,\r\n        threats: PropTypes.array,\r\n        init: PropTypes.func,\r\n    }\r\n\r\n    componentDidMount () {\r\n        this.props.init(this)\r\n    }\r\n\r\n    getFieldSize = () => {\r\n        const fieldRect = this.field\r\n        // TODO check in browsers and rewrite like https://learn.javascript.ru/coordinates-document\r\n        return {\r\n            left: fieldRect.offsetLeft,\r\n            top: fieldRect.offsetTop,\r\n            right: fieldRect.offsetLeft + fieldRect.clientWidth,\r\n            bottom: fieldRect.offsetTop + fieldRect.clientHeight,\r\n        }\r\n    }\r\n\r\n    refHandler = (elem) => { this.field = elem }\r\n\r\n    render () {\r\n        return (\r\n            <div className={style.wrapper} style={{ width: `${this.props.fieldWidth + this.props.sideWidth}px` }}>\r\n                <Field\r\n                    style={style.field}\r\n                    refHandler={this.refHandler}\r\n                    width={this.props.fieldWidth}\r\n                    height={this.props.fieldHeight}\r\n                >\r\n                    <Square\r\n                        style={heroStyleMap[this.props.heroStatus]}\r\n                        size={this.props.heroSize}\r\n                        left={this.props.heroPos.x}\r\n                        top={this.props.heroPos.y}\r\n                    />\r\n                    {this.props.threats.map((threat) => (\r\n                        <Square\r\n                            key={threat.id}\r\n                            style={style.threat}\r\n                            size={this.props.threatSize}\r\n                            left={threat.x}\r\n                            top={threat.y}\r\n                        />\r\n                    ))}\r\n                </Field>\r\n                <Sidebar />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RedSquares.jsx","import * as types from '../constants/actionTypes'\r\nimport { IDS, HIGHEST_BEATS, GAME_STATUS } from '../constants/game'\r\nimport InputCatcher from '../utils/InputCatcher'\r\nimport { spacePress, gameDataUpdater } from '../game-logic'\r\n\r\nconst spacePressAtStart = (state) => spacePress(state, performance.now())\r\n\r\nexport function processSpacePress () {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: types.SET_STATE,\r\n            data: spacePressAtStart(getState()),\r\n        })\r\n    }\r\n}\r\n\r\nfunction updateFrame (dispatch, getState) {\r\n    return () => {\r\n        let data = getState()\r\n\r\n        data.game.inputController.reactToKeys({\r\n            32: () => {\r\n                data = spacePressAtStart(data)\r\n            },\r\n        })\r\n\r\n        data = {\r\n            ...data,\r\n            mousePos: InputCatcher.mousePos,\r\n            field: data.game.redSquares.getFieldSize(),\r\n        }\r\n\r\n        data.game.frame += 1\r\n        data = gameDataUpdater(data)\r\n\r\n        const waitTime = data.game.startTime + data.game.frameLength * data.game.frame - performance.now()\r\n        if (waitTime < -1000) {\r\n            data.game.frame = Math.floor((performance.now() - data.game.startTime) / data.game.frameLength)\r\n        }\r\n\r\n        if (data.game.status === GAME_STATUS.stop && getState().game.status === GAME_STATUS.play) {\r\n            localStorage.setItem(\r\n                HIGHEST_BEATS,\r\n                data.game.highestBeats = Math.max(data.game.beats, data.game.highestBeats)\r\n            )\r\n        }\r\n\r\n        if (data.game.status === GAME_STATUS.play || getState().game.status === GAME_STATUS.play) {\r\n            dispatch({\r\n                type: types.SET_STATE,\r\n                data,\r\n            })\r\n        }\r\n\r\n        setTimeout(\r\n            updateFrame(dispatch, getState),\r\n            Math.max(waitTime, 0)\r\n        )\r\n    }\r\n}\r\n\r\nexport function clearHighest () {\r\n    return (dispatch) => {\r\n        localStorage.removeItem(HIGHEST_BEATS)\r\n\r\n        dispatch({\r\n            type: types.INIT,\r\n            data: {\r\n                highestBeats: 0,\r\n            },\r\n        })\r\n    }\r\n}\r\n\r\nexport function init (redSquares) {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: types.INIT,\r\n            data: {\r\n                redSquares,\r\n                inputController: new InputCatcher(),\r\n                highestBeats: localStorage[HIGHEST_BEATS] ? parseInt(localStorage[HIGHEST_BEATS], 10) : 0,\r\n            },\r\n        })\r\n\r\n        updateFrame(dispatch, getState)()\r\n    }\r\n}\r\n\r\nexport function setState (name, value) {\r\n    return (dispatch) => {\r\n        switch (name) {\r\n            case IDS.frameLength:\r\n            case IDS.fieldWidth:\r\n            case IDS.fieldHeight:\r\n                dispatch({\r\n                    type: types.SET_STATE,\r\n                    data: {\r\n                        game: {\r\n                            [name]: value\r\n                        },\r\n                    },\r\n                })\r\n                break\r\n            case IDS.heroSize:\r\n                dispatch({\r\n                    type: types.SET_STATE,\r\n                    data: {\r\n                        hero: {\r\n                            size: value\r\n                        },\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatSize:\r\n                dispatch({\r\n                    type: types.SET_STATE,\r\n                    data: {\r\n                        threats: {\r\n                            size: value\r\n                        },\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatLimit:\r\n                dispatch({\r\n                    type: types.SET_STATE,\r\n                    data: {\r\n                        threats: {\r\n                            limit: value\r\n                        },\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatAddTimeout:\r\n                dispatch({\r\n                    type: types.SET_STATE,\r\n                    data: {\r\n                        threats: {\r\n                            addTimeout: value\r\n                        },\r\n                    },\r\n                })\r\n                break\r\n            case IDS.threatRemoveProbability:\r\n                dispatch({\r\n                    type: types.SET_STATE,\r\n                    data: {\r\n                        threats: {\r\n                            removeProbability: value\r\n                        },\r\n                    },\r\n                })\r\n                break\r\n            default:\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/game.js","import _ from 'lodash'\r\nimport { GAME_STATUS } from '../constants/game'\r\nimport { HERO_STATUSES } from '../constants/hero'\r\n\r\nconst getHeroStatus = (x, y, heroSize, threatSize, threats) => {\r\n    const safeLength = (heroSize + threatSize) / 2\r\n    const sizeFix = (threatSize - heroSize) / 2\r\n\r\n    if (threats.some((threat) =>\r\n            Math.abs(threat.x - x + sizeFix) < safeLength && Math.abs(threat.y - y + sizeFix) < safeLength\r\n        )) {\r\n\r\n        return HERO_STATUSES.trouble\r\n    }\r\n\r\n    return HERO_STATUSES.normal\r\n}\r\n\r\nexport function moveHero (state) {\r\n    const { mousePos, field, hero } = state\r\n    const { threats } = state.threats\r\n    const threatSize = state.threats.size\r\n\r\n    let x = Math.max(mousePos.x - hero.size / 2, field.left)\r\n    x = Math.min(x, field.right - hero.size)\r\n    x -= field.left\r\n    let y = Math.max(mousePos.y - hero.size / 2, field.top)\r\n    y = Math.min(y, field.bottom - hero.size)\r\n    y -= field.top\r\n\r\n    const status = getHeroStatus(x, y, hero.size, threatSize, threats)\r\n\r\n    return _.merge({}, state, {\r\n        game: {\r\n            status: status === HERO_STATUSES.normal ? GAME_STATUS.play : GAME_STATUS.stop,\r\n        },\r\n        hero: {\r\n            x,\r\n            y,\r\n            status,\r\n        }\r\n    })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/hero.js","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nrender(<App />, document.querySelector('#app'))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default class InputCatcher {\r\n    static instance\r\n    static mousePos = {}\r\n    static keyPressed = []\r\n    initialKeymap = {}\r\n\r\n    constructor (keymap) {\r\n        this.initialKeymap = keymap\r\n\r\n        if (InputCatcher.instance) {\r\n            return InputCatcher.instance\r\n        }\r\n        InputCatcher.instance = this\r\n\r\n        document.onmousemove = this.saveMousePos\r\n        window.document.onkeydown = this.process\r\n    }\r\n\r\n    saveMousePos = (e) => {\r\n        InputCatcher.mousePos = {\r\n            x: e.pageX,\r\n            y: e.pageY,\r\n        }\r\n    }\r\n\r\n    process = (e) => {\r\n        if (e.keyCode === 32) {\r\n            e.preventDefault()\r\n        }\r\n        this.saveKeyPressed(e)\r\n    }\r\n\r\n    saveKeyPressed = ({ keyCode }) => InputCatcher.keyPressed.push(keyCode)\r\n\r\n    reactToKeys = (keymap = this.initialKeymap) => {\r\n        InputCatcher.keyPressed.forEach((key) => keymap[key] && keymap[key]())\r\n        InputCatcher.keyPressed = []\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/InputCatcher.js","import React from 'react'\r\nimport { combineReducers, applyMiddleware, createStore, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { Provider } from 'react-redux'\r\nimport * as reducers from './reducers'\r\nimport RedSquares from './components/RedSquares'\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ // eslint-disable-line no-underscore-dangle\r\n    || compose\r\nconst store = createStore(combineReducers(reducers), composeEnhancers(applyMiddleware(thunk)))\r\n\r\nconst App = () => (\r\n    <Provider store={store}>\r\n        <RedSquares />\r\n    </Provider>\r\n)\r\n\r\nexport default App\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.jsx","// removed by extract-text-webpack-plugin\nmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"field\":\"RedSquares__field__3S_U-\",\"threat\":\"RedSquares__threat__3sdY0\",\"side\":\"RedSquares__side__1Qama\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RedSquares.less\n// module id = tNBi\n// module chunks = 1","import React, { PropTypes } from 'react'\r\n\r\nconst Setter = ({ text, tabIndex, onClick }) => (\r\n    <div className=\"setter\">\r\n        <a onClick={onClick} tabIndex={tabIndex}>{text}</a>\r\n    </div>\r\n)\r\n\r\nSetter.propTypes = {\r\n    text: PropTypes.string,\r\n    tabIndex: PropTypes.number,\r\n    onClick: PropTypes.func,\r\n}\r\n\r\nexport const SettersBlock = ({ setters, setState, tabIndexOffset }) => (\r\n    <div>\r\n        {setters.map((setter, index) => (\r\n            <Setter\r\n                onClick={() => setState(setter.params)}\r\n                key={index}\r\n                tabIndex={index + tabIndexOffset}\r\n                text={setter.text}\r\n            />\r\n        ))}\r\n    </div>\r\n)\r\n\r\nSettersBlock.propTypes = {\r\n    setters: PropTypes.array.isRequired,\r\n    setState: PropTypes.func.isRequired,\r\n    tabIndexOffset: PropTypes.number,\r\n}\r\n\r\nSettersBlock.defaultProps = {\r\n    tabIndexOffset: 1,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/StateControl/SettersBlock.jsx","export function combineProcessors (...processors) {\r\n    return (state) => processors.reduce((result, processor) => processor(result), state)\r\n}\r\n\r\nexport function sign (num) {\r\n    if (num === 0 || isNaN(num)) {\r\n        return num\r\n    }\r\n\r\n    return num > 0 ? 1 : -1\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/funcs.js","import React, { PropTypes } from 'react'\r\nimport _ from 'lodash'\r\n\r\nconst Square = ({ top, left, size, style, refHandler }) => (\r\n    <div\r\n        ref={refHandler}\r\n        className={style}\r\n        style={{\r\n            width: `${size}px`,\r\n            height: `${size}px`,\r\n            top: `${top}px`,\r\n            left: `${left}px`,\r\n        }}\r\n    />\r\n)\r\n\r\nSquare.propTypes = {\r\n    top: PropTypes.number.isRequired,\r\n    left: PropTypes.number.isRequired,\r\n    size: PropTypes.number.isRequired,\r\n    style: PropTypes.string.isRequired,\r\n    refHandler: PropTypes.func,\r\n}\r\n\r\nSquare.defaultProps = {\r\n    refHandler: _.noop,\r\n}\r\n\r\nexport default Square\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Square.jsx","import React, { PropTypes } from 'react'\r\nimport _ from 'lodash'\r\n\r\nconst Field = ({ style, children, refHandler, width, height }) => (\r\n    <div\r\n        ref={refHandler}\r\n        className={style}\r\n        style={{\r\n            width: `${width}px`,\r\n            height: `${height}px`,\r\n        }}\r\n    >\r\n        {children}\r\n    </div>\r\n)\r\n\r\nField.propTypes = {\r\n    style: PropTypes.string.isRequired,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.object,\r\n        PropTypes.array,\r\n    ]),\r\n    refHandler: PropTypes.func,\r\n    width: PropTypes.number,\r\n    height: PropTypes.number,\r\n}\r\n\r\nField.defaultProps = {\r\n    children: null,\r\n    refHandler: _.noop,\r\n    width: 640,\r\n    height: 480,\r\n}\r\n\r\nexport default Field\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Field.jsx"],"sourceRoot":""}