webpackJsonp([0,2],{lVK7:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n=r("U7vG"),o=a(n),i=r("O27J"),s=r("pnOm"),u=a(s);r("cilB"),(0,i.render)(o.default.createElement(u.default,null),document.querySelector("#app"))},0:function(e,t,r){r("+prg"),e.exports=r("lVK7")},pnOm:function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=r("U7vG"),i=n(o),s=r("c9Fv"),u=r("4ufr"),l=n(u),d=r("4n+p"),f=r("ChGC"),c=a(f),h=r("3VDB"),p=n(h),m=(0,s.combineReducers)(c),S=(0,s.createStore)(m,(0,s.applyMiddleware)(l.default)),_=function(){return i.default.createElement(d.Provider,{store:S},i.default.createElement(p.default,null))};t.default=_,e.exports=t.default},ChGC:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r("9jEl");Object.defineProperty(t,"game",{enumerable:!0,get:function(){return a(n).default}});var o=r("ZJmM");Object.defineProperty(t,"hero",{enumerable:!0,get:function(){return a(o).default}});var i=r("WNaE");Object.defineProperty(t,"threats",{enumerable:!0,get:function(){return a(i).default}})},"9jEl":function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case i.SET_STATUS:return n({},e,{status:t.status});case i.START_NEW:return n({},e,{status:s.gameStatus.play,beats:0,outs:0,frame:0});case i.UPDATE_FRAME:return n({},e,{status:t.hero.status===u.heroStates.normal?s.gameStatus.play:s.gameStatus.stop,beats:e.beats+t.beats,outs:e.outs+t.outs,frame:e.frame+1});case i.SET_GAME_STATE:return n({},e,t.data);default:return e}};var o=r("4HHy"),i=a(o),s=r("bHK7"),u=r("YhS/"),l={status:s.gameStatus.stop,beats:0,outs:0,frame:0,frameLength:s.defaults.frameLength,fieldWidth:s.defaults.fieldWidth,fieldHeight:s.defaults.fieldHeight,sideWidth:s.defaults.sideWidth};e.exports=t.default},"4HHy":function(e,t){"use strict";t.__esModule=!0;t.SET_STATUS="SET_STATUS",t.START_NEW="START_NEW",t.UPDATE_FRAME="UPDATE_FRAME",t.SET_GAME_STATE="SET_GAME_STATE",t.SET_HERO_STATE="SET_HERO_STATE",t.SET_THREATS_STATE="SET_THREATS_STATE"},bHK7:function(e,t){"use strict";t.__esModule=!0;var r,a=(t.defaults={frameLength:20,heroSize:50,threatSize:30,threatLimit:20,threatAddTimeout:1e3,threatRemoveProbability:5,fieldWidth:800,fieldHeight:600,sideWidth:200},t.gameStatus={play:"play",pause:"pause",stop:"stop"});t.buttonName=(r={},r[a.play]="Pause",r[a.pause]="Resume",r[a.stop]="Start",r),t.IDS={frameLength:"frameLength",heroSize:"heroSize",threatSize:"threatSize",threatLimit:"threatLimit",threatAddTimeout:"threatAddTimeout",threatRemoveProbability:"threatRemoveProbability",fieldWidth:"fieldWidth",fieldHeight:"fieldHeight"}},"YhS/":function(e,t){"use strict";t.__esModule=!0;t.heroStates={normal:"normal",trouble:"trouble"}},ZJmM:function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case i.UPDATE_FRAME:return n({},e,t.hero);case i.SET_HERO_STATE:return n({},e,t.data);default:return e}};var o=r("4HHy"),i=a(o),s=r("bHK7"),u=r("YhS/"),l={x:(s.defaults.fieldWidth-s.defaults.heroSize)/2,y:(s.defaults.fieldHeight-s.defaults.heroSize)/2,status:u.heroStates.normal,size:s.defaults.heroSize};e.exports=t.default},WNaE:function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments[1];switch(t.type){case i.START_NEW:return n({},e,{threats:[],lastTime:t.lastTime});case i.UPDATE_FRAME:return n({},e,{threats:t.threats,index:e.index+t.added,lastTime:t.lastTime});case i.SET_THREATS_STATE:return n({},e,t.data);default:return e}};var o=r("4HHy"),i=a(o),s=r("bHK7"),u={threats:[],size:s.defaults.threatSize,lastTime:0,addTimeout:s.defaults.threatAddTimeout,index:0,limit:s.defaults.threatLimit,removeProbability:s.defaults.threatRemoveProbability,maxSpeed:4};e.exports=t.default},"3VDB":function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.default=void 0;var u,l,d,f=r("U7vG"),c=n(f),h=r("c9Fv"),p=r("4n+p"),m=r("BCOr"),S=a(m),_=r("bHK7"),y=r("YhS/"),v=r("liqn"),b=n(v),T=r("BCEp"),g=n(T),E=r("tNBi"),M=n(E),x=r("7hJZ"),O=n(x),P=r("CMFL"),A=n(P),w=r("t9xF"),H=n(w),z=(u={},u[y.heroStates.normal]=g.default.hero,u[y.heroStates.trouble]=g.default.heroInTrouble,u),C=(l=(0,p.connect)(function(e){return{status:e.game.status,frameLength:e.game.frameLength,fieldWidth:e.game.fieldWidth,fieldHeight:e.game.fieldHeight,sideWidth:e.game.sideWidth,heroStatus:e.hero.status,heroSize:e.hero.size,heroPos:{x:e.hero.x,y:e.hero.y},threatSize:e.threats.size,threats:e.threats.threats,beats:e.game.beats,outs:e.game.outs,threatLimit:e.threats.limit,threatAddTimeout:e.threats.addTimeout,threatRemoveProbability:e.threats.removeProbability}},function(e){return(0,h.bindActionCreators)({processSpacePress:S.game.processSpacePress,updateFrame:S.game.updateFrame,setState:S.game.setState},e)}),l(d=function(e){function t(r){o(this,t);var a=i(this,e.call(this,r));return a.tick=function(){a.inputCatcher.reactToKeys(),a.props.updateFrame(b.default.mousePos,a.getFieldSize())},a.getFieldSize=function(){var e=a.field;return{left:e.offsetLeft,top:e.offsetTop,right:e.offsetLeft+e.clientWidth,bottom:e.offsetTop+e.clientHeight}},a.getS=function(e,t){return(t||"No")+" "+e+(1!==t?"s":"")},a.changeHandler=function(e){return function(t){var r=t.target.value,n=void 0;switch(e){default:n=parseInt(r,10)||1}a.props.setState(e,n)}},a.inputCatcher=new b.default({" ":a.props.processSpacePress}),setInterval(a.tick,a.props.frameLength),a}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement("div",{className:M.default.wrapper,style:{width:this.props.fieldWidth+this.props.sideWidth+"px"}},c.default.createElement(O.default,{style:M.default.field,refHandler:function(t){e.field=t},width:this.props.fieldWidth,height:this.props.fieldHeight},c.default.createElement(A.default,{style:z[this.props.heroStatus],size:this.props.heroSize,left:this.props.heroPos.x,top:this.props.heroPos.y}),this.props.threats.map(function(t){return c.default.createElement(A.default,{key:t.id,style:M.default.threat,size:e.props.threatSize,left:t.x,top:t.y})})),c.default.createElement("div",{className:M.default.side,style:{width:this.props.sideWidth+"px"}},c.default.createElement("button",{onClick:this.props.processSpacePress},_.buttonName[this.props.status])," (Press Space)",c.default.createElement("h2",null,this.getS("beat",this.props.beats)),c.default.createElement("h2",null,this.getS("out",this.props.outs)),c.default.createElement("p",null,this.getS("threat",this.props.threats.length)," on field"),c.default.createElement(H.default.Connector,{state:this.props,onChange:this.changeHandler},c.default.createElement(H.default.Input,{id:_.IDS.frameLength,label:"Frame length (ms)"}),c.default.createElement(H.default.Input,{id:_.IDS.heroSize,label:"Hero size (px)"}),c.default.createElement(H.default.Input,{id:_.IDS.threatSize,label:"Threat size (px)"}),c.default.createElement(H.default.Input,{id:_.IDS.threatLimit,label:"Threat limit"}),c.default.createElement(H.default.Input,{id:_.IDS.threatAddTimeout,label:"Threat add timeout (ms)"}),c.default.createElement(H.default.Input,{id:_.IDS.threatRemoveProbability,label:"Threat remove probability (1/x)"}),c.default.createElement(H.default.Input,{id:_.IDS.fieldWidth,label:"Field width (px)"}),c.default.createElement(H.default.Input,{id:_.IDS.fieldHeight,label:"Field height (px)"}))))},t}(c.default.Component))||d);t.default=C,e.exports=t.default},BCOr:function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}t.__esModule=!0,t.game=void 0;var n=r("hB/+"),o=a(n);t.game=o},"hB/+":function(e,t,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function n(){return function(e,t){switch(t().game.status){case d.gameStatus.play:e({type:l.SET_STATUS,status:d.gameStatus.pause});break;case d.gameStatus.pause:e({type:l.SET_STATUS,status:d.gameStatus.play});break;case d.gameStatus.stop:default:e({type:l.START_NEW,lastTime:0-t().threats.addTimeout/t().game.frameLength})}}}function o(e,t){return function(r,a){var n=a();if(n.game.status===d.gameStatus.play){var o=(0,f.controlThreats)(n.threats.threats,n.threats.removeProbability,n.threats.limit,n.game.frame,n.threats.lastTime,n.threats.addTimeout,n.game.frameLength,n.threats.size,n.threats.index,n.game.fieldWidth,n.game.fieldHeight,n.threats.maxSpeed);r(s({type:l.UPDATE_FRAME},o,(0,c.moveHero)(e,t,n.hero.size,n.threats.size,o.threats)))}}}function i(e,t){return function(r){var a;switch(e){case d.IDS.frameLength:case d.IDS.fieldWidth:case d.IDS.fieldHeight:r({type:l.SET_GAME_STATE,data:(a={},a[e]=t,a)});break;case d.IDS.heroSize:r({type:l.SET_HERO_STATE,data:{size:t}});break;case d.IDS.threatSize:r({type:l.SET_THREATS_STATE,data:{size:t}});break;case d.IDS.threatLimit:r({type:l.SET_THREATS_STATE,data:{limit:t}});break;case d.IDS.threatAddTimeout:r({type:l.SET_THREATS_STATE,data:{addTimeout:t}});break;case d.IDS.threatRemoveProbability:r({type:l.SET_THREATS_STATE,data:{removeProbability:t}})}}}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.processSpacePress=n,t.updateFrame=o,t.setState=i;var u=r("4HHy"),l=a(u),d=r("bHK7"),f=r("7lKn"),c=r("iMa0")},"7lKn":function(e,t){"use strict";function r(e,t,r,n,s,u,l,d,f,c,h,p){e=e.map(function(e){return a({},e,{x:e.x+e.speed.x,y:e.y+e.speed.y})}).map(o({removeProbability:t,size:d,fieldWidth:c,fieldHeight:h}));var m=e.length;e=e.filter(function(e){return e.isAroundField});var S=m-e.length,_=0;e=e.map(function(e){return e.isGoingOut&&!e.isOut&&(_+=1,delete e.isGoingOut),e});var y=0;return e.length<r&&n>=s+u/l&&(e.push(i({size:d,index:f,fieldWidth:c,fieldHeight:h,maxSpeed:p})),y=1,s=n),{threats:e,beats:_,outs:S,added:y,lastTime:s}}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};t.controlThreats=r;var n=function(e){var t=e.newThreat,r=e.size,a=e.canFlyAway;return function(e){var n=e.axis,o=e.lean;return t.isGoingOut=Math.sign(o)===Math.sign(t.speed[n]),t.isOut||(a&&t.isGoingOut?t.isOut=!0:t.speed[n]=(t.isGoingOut?-1:1)*(t.speed[n]||1)),Math.abs(o)>2*r&&(t.isAroundField=!1),t}},o=function(e){var t=e.removeProbability,r=e.size,o=e.fieldWidth,i=e.fieldHeight;return function(e){var s=a({},e),u=Math.random()<1/t,l=n({newThreat:s,size:r,canFlyAway:u});s.x<0&&(s=l({axis:"x",lean:s.x}));var d=o-r;s.x>d&&(s=l({axis:"x",lean:s.x-d})),s.y<0&&(s=l({axis:"y",lean:s.y}));var f=i-r;return s.y>f&&(s=l({axis:"y",lean:s.y-f})),s}},i=function(e){var t=e.size,r=e.index,a=e.fieldWidth,n=e.fieldHeight,o=e.maxSpeed,i=Math.round(Math.random()*(a-t)),s=0-t,u={x:Math.round((2*Math.random()-1)*o),y:Math.ceil(Math.random()*o)};return Math.random()<.5?(i=0-t,s=Math.round(Math.random()*(n-t)),u={x:Math.ceil(Math.random()*o),y:Math.round((2*Math.random()-1)*o)},Math.random()<.5&&(i=a,u.x*=-1)):Math.random()<.5&&(s=n,u.y*=-1),{id:r,x:i,y:s,speed:u,isOut:!1,isAroundField:!0}}},cilB:function(e,t){},liqn:function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a,n,o=(n=a=function e(t){var a=this;return r(this,e),this.keymap=[],this.saveMousePos=function(t){e.mousePos={x:t.pageX,y:t.pageY}},this.saveKeyPressed=function(t){var r=t.key;return e.keyPressed.push(r)},this.reactToKeys=function(){e.keyPressed.forEach(function(e){return a.keymap[e]&&a.keymap[e]()}),e.keyPressed=[]},e.instance?e.instance:(this.keymap=t,e.instance=this,document.onmousemove=this.saveMousePos,void(window.document.onkeyup=this.saveKeyPressed))},a.mousePos={},a.keyPressed=[],n);t.default=o,e.exports=t.default},BCEp:function(e,t){e.exports={hero:"Hero__hero__2Sa-c",heroInTrouble:"Hero__heroInTrouble__3oF4r"}},tNBi:function(e,t){e.exports={wrapper:"RedSquares__wrapper__n469N",side:"RedSquares__side__1Qama",field:"RedSquares__field__3S_U-",threat:"RedSquares__threat__3sdY0"}},"7hJZ":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r("U7vG"),o=a(n),i=r("vlrw"),s=function(e){return o.default.createElement("div",{ref:e.refHandler,className:e.style,style:{width:e.width+"px",height:e.height+"px"}},e.children)};s.defaultProps={children:null,refHandler:i.noOp,width:640,height:480},t.default=s,e.exports=t.default},vlrw:function(e,t){"use strict";t.__esModule=!0;t.noOp=function(){}},CMFL:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r("U7vG"),o=a(n),i=r("vlrw"),s=function(e){return o.default.createElement("div",{ref:e.refHandler,className:e.style,style:{width:e.size+"px",height:e.size+"px",top:e.top+"px",left:e.left+"px"}})};s.defaultProps={refHandler:i.noOp},t.default=s,e.exports=t.default},t9xF:function(e,t,r){"use strict";t.__esModule=!0;var a=r("6e+x"),n=r("WS4u"),o=r("tozq"),i={Input:a.Input,Connector:n.Connector,SettersBlock:o.SettersBlock};t.default=i,e.exports=t.default},"6e+x":function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.Input=void 0;var s,u,l=r("U7vG"),d=a(l),f=r("JglD");r("WwO4");t.Input=(u=s=function(e){function t(){var r,a,i;n(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return r=a=o(this,e.call.apply(e,[this].concat(u))),a.inner=a.props.multiLine?"textarea":"input",a.id="labeled-control-"+a.props.id,a.stateName=a.props.stateName||a.props.id,i=r,o(a,i)}return i(t,e),t.prototype.render=function(){var e=this;return d.default.createElement("div",{className:"labeled-input"},d.default.createElement("label",{htmlFor:this.id},this.props.label),d.default.createElement(this.inner,{id:this.id,label:this.props.label,ref:function(t){e.control=t},value:this.props.state[this.stateName]||this.props.value,readOnly:this.props.readOnly,onChange:this.props.onChange(this.stateName),onClick:this.props.onClick(this),onFocus:this.props.onFocus(this)}))},t}(d.default.Component),s.defaultProps={value:"",onChange:f.noOperation,onClick:f.noOperation,onFocus:f.noOperation,multiLine:!1},u)},JglD:function(e,t){"use strict";t.__esModule=!0;t.noOperation=function(){}},WwO4:function(e,t){},WS4u:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.Connector=void 0;var n=r("U7vG"),o=a(n),i=r("JglD"),s=t.Connector=function(e){return o.default.createElement("div",null,o.default.Children.map(e.children,function(t){return"function"==typeof t.type?o.default.cloneElement(t,{state:e.state,onChange:e.onChange,onClick:e.onClick,onFocus:e.onFocus}):t}))};s.defaultProps={state:{},onChange:i.noOperation,onClick:i.noOperation,onFocus:i.noOperation}},tozq:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.SettersBlock=void 0;var n=r("U7vG"),o=a(n),i=function(e){return o.default.createElement("div",{className:"setter"},o.default.createElement("a",{onClick:e.onClick,tabIndex:e.tabIndex},e.text))},s=t.SettersBlock=function(e){return o.default.createElement("div",null,e.setters.map(function(t,r){return o.default.createElement(i,{onClick:function(){return e.setState(t.params)},key:r,tabIndex:r+e.tabIndexOffset,text:t.text})}))};s.defaultProps={tabIndexOffset:1}},iMa0:function(e,t,r){"use strict";function a(e,t,r,a,n){var i=Math.max(e.x-r/2,t.left);i=Math.min(i,t.right-r),i-=t.left;var s=Math.max(e.y-r/2,t.top);return s=Math.min(s,t.bottom-r),s-=t.top,{hero:{x:i,y:s,status:o({x:i,y:s,heroSize:r,threatSize:a,threats:n})}}}t.__esModule=!0,t.moveHero=a;var n=r("YhS/"),o=function(e){var t=e.x,r=e.y,a=e.heroSize,o=e.threatSize,i=e.threats,s=(a+o)/2,u=(o-a)/2;return i.some(function(e){return Math.abs(e.x-t+u)<s&&Math.abs(e.y-r+u)<s})?n.heroStates.trouble:n.heroStates.normal}}});
//# sourceMappingURL=app.0c3d04cd.js.map