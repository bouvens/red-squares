{"version":3,"sources":["webpack:///app.61d862ef.js","webpack:///./src/controllers/scared.js","webpack:///./src/constants/actionTypes.js","webpack:///./src/game-logic/threats.js","webpack:///./src/reducers/game.js","webpack:///./src/controllers/random.js","webpack:///./src/game-logic/game.js","webpack:///./src/controllers/still.js","webpack:///./src/controllers/stable.js","webpack:///./src/components/Sidebar.jsx","webpack:///./src/reducers/threats.js","webpack:///./src/constants/hero.js","webpack:///./src/reducers/hero.js","webpack:///./src/actions/params.js","webpack:///./src/constants/game.js","webpack:///./src/controllers/common.js","webpack:///./src/components/RedSquares.jsx","webpack:///./src/actions/game.js","webpack:///./src/game-logic/hero.js","webpack:///./src/index.js","webpack:///./src/utils/InputCatcher.js","webpack:///./src/controllers/traveller.js","webpack:///./src/components/CanvasField.jsx","webpack:///./src/App.jsx","webpack:///./src/controllers/manual.js","webpack:///./src/components/RedSquares.less","webpack:///./src/utils/funcs.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","0HjV","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_lodash__","__WEBPACK_IMPORTED_MODULE_0_lodash___default","n","__WEBPACK_IMPORTED_MODULE_1__utils_funcs__","__WEBPACK_IMPORTED_MODULE_2__common__","_ref","game","hero","threats","scaryEdges","Object","size","fieldWidth","fieldHeight","nearestThreat","a","extend","threat","distance","x","y","4HHy","d","INIT","SET_STATE","7lKn","controlThreats","state","_state$game","frame","frameLength","__WEBPACK_IMPORTED_MODULE_2__constants_game__","newThreats","map","_extends","speed","beat","removeProbability","oldThreatsNum","length","filter","isAroundField","outs","beats","updatedThreat","clone","isGoingOut","isOut","isAdded","limit","lastTime","addTimeout","push","newThreat","index","maxSpeed","newState","merge","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","processSpeed","canFlyAway","axis","lean","Math","abs","random","processThreat","leftBorder","rightBorder","topBorder","bottomBorder","round","ceil","id","9jEl","__WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__","initialState","redSquares","inputController","manager","status","stop","autoRestart","highestBeats","error","undefined","action","type","data","BCOr","__WEBPACK_IMPORTED_MODULE_0__game__","__WEBPACK_IMPORTED_MODULE_1__params__","BKuW","getRandomCoordinate","range","ChGC","defineProperty","value","__WEBPACK_IMPORTED_MODULE_1__hero__","__WEBPACK_IMPORTED_MODULE_2__threats__","EBfR","spacePress","play","statusUpdate","pause","__WEBPACK_IMPORTED_MODULE_3__utils_funcs__","callManager","oldState","__WEBPACK_IMPORTED_MODULE_1__controllers__","isNaN","reactToKeys","_state$game$inputCont","space","gameStateUpdater","nextPlayFrame","__WEBPACK_IMPORTED_MODULE_4__hero__","__WEBPACK_IMPORTED_MODULE_5__threats__","J2UN","N9n6","OXFD","extendedThreats","variant","reduce","best","current","_getNearest","QCNp","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","Sidebar","_dec","_class","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","__WEBPACK_IMPORTED_MODULE_1_prop_types__","__WEBPACK_IMPORTED_MODULE_2_react_redux__","__WEBPACK_IMPORTED_MODULE_3_redux__","__WEBPACK_IMPORTED_MODULE_4_lodash__","__WEBPACK_IMPORTED_MODULE_4_lodash___default","__WEBPACK_IMPORTED_MODULE_5_state_control__","__WEBPACK_IMPORTED_MODULE_6__actions__","__WEBPACK_IMPORTED_MODULE_7__controllers__","__WEBPACK_IMPORTED_MODULE_8__constants_game__","__WEBPACK_IMPORTED_MODULE_9__RedSquares_less__","__WEBPACK_IMPORTED_MODULE_9__RedSquares_less___default","threatsLength","dispatch","processSpacePress","setState","clearHighest","_React$Component","_temp","_this","_ret","this","_len","args","Array","_key","apply","concat","getS","name","num","changeHandler","props","render","createElement","className","side","style","width","sideWidth","onClick","onChange","defaultNum","label","values","keys","heroSize","heroSpeed","threatSize","threatSpeed","threatLimit","threatAddTimeout","threatRemoveProbability","Component","WNaE","YhS/","HERO_STATUSES","normal","trouble","ZJmM","__WEBPACK_IMPORTED_MODULE_3__constants_hero__","__WEBPACK_IMPORTED_MODULE_4__utils_funcs__","shadowPeriod","shadowQuantity","shadows","save","ZvXP","set","bHK7","SPEEDS","DEFAULTS","IDS","HIGHEST_BEATS","GAME_STATUS","BUTTON_NAMES","KEY_CODES","_BUTTON_NAMES","Normal","Fast","Faster","findKey","f","cilB","eSZQ","getScaryEdges","height","edges","getVariants","variants","angle","PI","VARIANTS_QUANTITY","cos","sin","getNearest","getSafeInterval","getDistance","A","B","sqrt","pow","nearest","Infinity","evxK","__WEBPACK_IMPORTED_MODULE_0__manual__","__WEBPACK_IMPORTED_MODULE_1__still__","__WEBPACK_IMPORTED_MODULE_2__random__","__WEBPACK_IMPORTED_MODULE_3__scared__","__WEBPACK_IMPORTED_MODULE_4__stable__","__WEBPACK_IMPORTED_MODULE_5__traveller__","gIL8","RedSquares","_class2","_temp2","__WEBPACK_IMPORTED_MODULE_2_redux__","__WEBPACK_IMPORTED_MODULE_3_react_redux__","__WEBPACK_IMPORTED_MODULE_5__actions__","__WEBPACK_IMPORTED_MODULE_6__constants_game__","__WEBPACK_IMPORTED_MODULE_7__RedSquares_less__","__WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default","__WEBPACK_IMPORTED_MODULE_8__CanvasField__","__WEBPACK_IMPORTED_MODULE_9__Sidebar__","init","getFieldSize","fieldRect","field","left","offsetLeft","top","offsetTop","right","clientWidth","bottom","clientHeight","handleRefField","elem","componentDidMount","wrapper","refHandler","defaultProps","noop","hB/+","getState","__WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__","__WEBPACK_IMPORTED_MODULE_3__game_logic__","updateFrame","lastFrameTime","initState","gameCycle","__WEBPACK_IMPORTED_MODULE_1__constants_game__","setTimeout","performance","now","getWaitTime","localStorage","removeItem","__WEBPACK_IMPORTED_MODULE_2__utils_InputCatcher__","parseInt","max","setItem","iMa0","getMove","xDelta","yDelta","xMove","yMove","normalization","getShadows","pop","unshift","moveHero","_getMove","min","getHeroStatus","__WEBPACK_IMPORTED_MODULE_1__constants_hero__","__WEBPACK_IMPORTED_MODULE_0__constants_game__","safeLength","some","lVK7","__WEBPACK_IMPORTED_MODULE_1_react_dom__","__WEBPACK_IMPORTED_MODULE_2__App__","__WEBPACK_IMPORTED_MODULE_3__index_css__","document","querySelector","liqn","InputCatcher","_initialiseProps","keymap","initialKeymap","onmousemove","saveMousePos","window","onkeydown","process","mousePos","keyPressed","e","pageX","pageY","keyCode","preventDefault","saveKeyPressed","forEach","mObc","getClearest","safe","clearest","xBest","yBest","getMinDistance","setupMinDistance","__WEBPACK_IMPORTED_MODULE_0__common__","_ref2","qaGz","CanvasField","_heroStyle","__WEBPACK_IMPORTED_MODULE_3_lodash__","__WEBPACK_IMPORTED_MODULE_4__constants_hero__","__WEBPACK_IMPORTED_MODULE_5__RedSquares_less__","__WEBPACK_IMPORTED_MODULE_5__RedSquares_less___default","heroStyle","heroStatus","heroPos","_React$PureComponent","canvas","handleRefCanvas","drawSquare","ctx","pos","color","fillStyle","fillRect","paint","_this2","getContext","clearRect","shadow","fieldWrapper","ref","PureComponent","sMfP","__WEBPACK_IMPORTED_MODULE_1_redux__","__WEBPACK_IMPORTED_MODULE_2_redux_thunk__","__WEBPACK_IMPORTED_MODULE_2_redux_thunk___default","__WEBPACK_IMPORTED_MODULE_4__reducers__","__WEBPACK_IMPORTED_MODULE_5__components_RedSquares__","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","App","smes","__WEBPACK_IMPORTED_MODULE_0__utils_InputCatcher__","fieldSize","tNBi","vlrw","combineProcessors","processors","result","processor","sign","defaultHeroPosition"],"mappings":"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","file":"app.61d862ef.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(\"+prg\");\nmodule.exports = __webpack_require__(\"lVK7\");\n\n\n/***/ }),\n\n/***/ \"0HjV\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_funcs__ = __webpack_require__(\"vlrw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common__ = __webpack_require__(\"eSZQ\");\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (_ref) {\n    var game = _ref.game,\n        hero = _ref.hero,\n        threats = _ref.threats;\n\n    var scaryEdges = Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"c\" /* getScaryEdges */])(hero, 2 * threats.size, game.fieldWidth, game.fieldHeight);\n\n    var nearestThreat = Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"a\" /* getNearest */])(hero, __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.extend(scaryEdges, threats.threats));\n\n    if (!nearestThreat.threat || nearestThreat.distance > Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"b\" /* getSafeInterval */])(hero, threats) * 2) {\n        return Object(__WEBPACK_IMPORTED_MODULE_1__utils_funcs__[\"b\" /* defaultHeroPosition */])(game, hero.size);\n    }\n\n    var distance = {\n        x: hero.x - nearestThreat.threat.x,\n        y: hero.y - nearestThreat.threat.y\n    };\n\n    return {\n        x: hero.x + distance.x,\n        y: hero.y + distance.y\n    };\n});\n\n/***/ }),\n\n/***/ \"4HHy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return INIT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return SET_STATE; });\nvar INIT = 'INIT';\nvar SET_STATE = 'SET_STATE';\n\n/***/ }),\n\n/***/ \"7lKn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = controlThreats;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_funcs__ = __webpack_require__(\"vlrw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_game__ = __webpack_require__(\"bHK7\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\nvar processSpeed = function processSpeed(threat, size, canFlyAway) {\n    return function (axis, lean) {\n        var updatedThreat = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.clone(threat);\n\n        updatedThreat.isGoingOut = Object(__WEBPACK_IMPORTED_MODULE_1__utils_funcs__[\"c\" /* sign */])(lean) === Object(__WEBPACK_IMPORTED_MODULE_1__utils_funcs__[\"c\" /* sign */])(updatedThreat.speed[axis]);\n\n        if (!updatedThreat.isOut) {\n            if (canFlyAway && updatedThreat.isGoingOut) {\n                updatedThreat.isOut = true;\n            } else {\n                updatedThreat.speed[axis] = (updatedThreat.isGoingOut ? -1 : 1) * (updatedThreat.speed[axis] || 1);\n            }\n        }\n        if (Math.abs(lean) > size * 3) {\n            updatedThreat.isAroundField = false;\n        }\n\n        return updatedThreat;\n    };\n};\n\nvar beat = function beat(removeProbability, size, fieldWidth, fieldHeight) {\n    return function (threat) {\n        var newThreat = _extends({}, threat);\n        var canFlyAway = Math.random() < 1 / removeProbability;\n        var processThreat = processSpeed(newThreat, size, canFlyAway);\n\n        var leftBorder = size;\n        if (newThreat.x < leftBorder) {\n            newThreat = processThreat('x', newThreat.x - leftBorder);\n        }\n        var rightBorder = fieldWidth - size;\n        if (newThreat.x > rightBorder) {\n            newThreat = processThreat('x', newThreat.x - rightBorder);\n        }\n\n        var topBorder = size;\n        if (newThreat.y < topBorder) {\n            newThreat = processThreat('y', newThreat.y - topBorder);\n        }\n        var bottomBorder = fieldHeight - size;\n        if (newThreat.y > bottomBorder) {\n            newThreat = processThreat('y', newThreat.y - bottomBorder);\n        }\n\n        return newThreat;\n    };\n};\n\nvar newThreat = function newThreat(size, index, fieldWidth, fieldHeight, maxSpeed) {\n    var lean = size * 2;\n    var x = Math.round(Math.random() * (fieldWidth - lean));\n    var y = 0 - lean;\n    var speed = {\n        x: Math.round((Math.random() * 2 - 1) * maxSpeed),\n        y: Math.ceil(Math.random() * maxSpeed)\n    };\n\n    if (Math.random() < 0.5) {\n        x = 0 - lean;\n        y = Math.round(Math.random() * (fieldHeight - lean));\n        speed = {\n            x: Math.ceil(Math.random() * maxSpeed),\n            y: Math.round((Math.random() * 2 - 1) * maxSpeed)\n        };\n\n        if (Math.random() < 0.5) {\n            x = fieldWidth;\n            speed.x *= -1;\n        }\n    } else if (Math.random() < 0.5) {\n        y = fieldHeight;\n        speed.y *= -1;\n    }\n    return {\n        id: index,\n        x: x,\n        y: y,\n        speed: speed,\n        isOut: false,\n        isAroundField: true\n    };\n};\n\nfunction controlThreats(state) {\n    var threats = state.threats;\n    var _state$game = state.game,\n        frame = _state$game.frame,\n        fieldWidth = _state$game.fieldWidth,\n        fieldHeight = _state$game.fieldHeight;\n    var frameLength = __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].frameLength;\n\n\n    var newThreats = threats.threats.map(function (threat) {\n        return _extends({}, threat, {\n            x: threat.x + threat.speed.x,\n            y: threat.y + threat.speed.y\n        });\n    }).map(beat(threats.removeProbability, threats.size, fieldWidth, fieldHeight));\n    var oldThreatsNum = newThreats.length;\n    newThreats = newThreats.filter(function (threat) {\n        return threat.isAroundField;\n    });\n    var outs = oldThreatsNum - newThreats.length;\n\n    var beats = 0;\n\n    newThreats = newThreats.map(function (threat) {\n        var updatedThreat = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.clone(threat);\n\n        if (updatedThreat.isGoingOut && !updatedThreat.isOut) {\n            beats += 1;\n            delete updatedThreat.isGoingOut;\n        }\n        return updatedThreat;\n    }, 0);\n\n    var isAdded = false;\n    if (newThreats.length < threats.limit && frame >= threats.lastTime + threats.addTimeout / frameLength) {\n        newThreats.push(newThreat(threats.size, threats.index, fieldWidth, fieldHeight, threats.maxSpeed));\n        isAdded = true;\n    }\n\n    var newState = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.merge({}, state, {\n        game: {\n            beats: state.game.beats + beats,\n            outs: state.game.outs + outs\n        },\n        threats: isAdded ? {\n            lastTime: frame,\n            index: threats.index + 1\n        } : threats\n    });\n\n    newState.threats.threats = newThreats;\n\n    return newState;\n}\n\n/***/ }),\n\n/***/ \"9jEl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_game__ = __webpack_require__(\"bHK7\");\n\n\n\n\nvar initialState = {\n    redSquares: null,\n    inputController: null,\n    manager: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].manager,\n    status: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].stop,\n    autoRestart: true,\n    beats: 0,\n    highestBeats: 0,\n    outs: 0,\n    frame: 0,\n    speed: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].speed,\n    fieldWidth: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].fieldWidth,\n    fieldHeight: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].fieldHeight,\n    error: ''\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__[\"a\" /* INIT */]:\n            return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.extend({}, state, action.data);\n        case __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__[\"b\" /* SET_STATE */]:\n            return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.extend({}, state, action.data.game);\n        default:\n            return state;\n    }\n});\n\n/***/ }),\n\n/***/ \"BCOr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__game__ = __webpack_require__(\"hB/+\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__params__ = __webpack_require__(\"ZvXP\");\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__; });\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_1__params__; });\n\n\n\n\n\n/***/ }),\n\n/***/ \"BKuW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nfunction getRandomCoordinate(range, size) {\n    return Math.random() * (range - size * 2) + size;\n}\n\nvar target = void 0;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (state) {\n    if (!target || state.hero.x === target.x && state.hero.y === target.y) {\n        target = {\n            x: getRandomCoordinate(state.game.fieldWidth, state.hero.size),\n            y: getRandomCoordinate(state.game.fieldHeight, state.hero.size)\n        };\n    }\n\n    return target;\n});\n\n/***/ }),\n\n/***/ \"ChGC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__game__ = __webpack_require__(\"9jEl\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"game\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__hero__ = __webpack_require__(\"ZJmM\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"hero\", function() { return __WEBPACK_IMPORTED_MODULE_1__hero__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__threats__ = __webpack_require__(\"WNaE\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"threats\", function() { return __WEBPACK_IMPORTED_MODULE_2__threats__[\"a\"]; });\n\n\n\n\n/***/ }),\n\n/***/ \"EBfR\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = spacePress;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = gameStateUpdater;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__controllers__ = __webpack_require__(\"evxK\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_funcs__ = __webpack_require__(\"vlrw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__hero__ = __webpack_require__(\"iMa0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__threats__ = __webpack_require__(\"7lKn\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\n\n\nvar statusUpdate = function statusUpdate(state, status) {\n    return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.merge({}, state, {\n        game: {\n            status: status\n        }\n    });\n};\n\nfunction spacePress(state) {\n    switch (state.game.status) {\n        case __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].play:\n            return statusUpdate(state, __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].pause);\n        case __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].pause:\n            return statusUpdate(state, __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].play);\n        case __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].stop:\n        default:\n            return _extends({}, state, {\n                game: _extends({}, state.game, {\n                    status: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].play,\n                    beats: 0,\n                    outs: 0,\n                    frame: 0,\n                    error: ''\n                }),\n                hero: _extends({}, state.hero, Object(__WEBPACK_IMPORTED_MODULE_3__utils_funcs__[\"b\" /* defaultHeroPosition */])(state.game, state.hero.size)),\n                threats: _extends({}, state.threats, {\n                    threats: [],\n                    lastTime: -state.threats.addTimeout / __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].frameLength\n                })\n            });\n    }\n}\n\nfunction callManager(oldState) {\n    var state = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.merge({}, oldState, {\n        hero: {\n            target: __WEBPACK_IMPORTED_MODULE_1__controllers__[oldState.game.manager](oldState)\n        }\n    });\n    if (isNaN(state.hero.target.x) || isNaN(state.hero.target.y)) {\n        state.game.error = 'Bad target';\n        state.hero.target = _extends({}, state.hero.target, {\n            x: state.hero.x,\n            y: state.hero.y\n        });\n    }\n\n    return state;\n}\n\nfunction reactToKeys(oldState) {\n    var state = _extends({}, oldState);\n\n    if (state.game.status === __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].stop && state.game.autoRestart) {\n        state = callManager(state);\n        state = spacePress(state);\n    } else {\n        var _state$game$inputCont;\n\n        state.game.inputController.reactToKeys((_state$game$inputCont = {}, _state$game$inputCont[__WEBPACK_IMPORTED_MODULE_2__constants_game__[\"f\" /* KEY_CODES */].space] = function () {\n            state = spacePress(state);\n        }, _state$game$inputCont));\n    }\n\n    return state;\n}\n\nvar nextPlayFrame = Object(__WEBPACK_IMPORTED_MODULE_3__utils_funcs__[\"a\" /* combineProcessors */])(__WEBPACK_IMPORTED_MODULE_5__threats__[\"a\" /* controlThreats */], callManager, __WEBPACK_IMPORTED_MODULE_4__hero__[\"a\" /* moveHero */]);\n\nfunction gameStateUpdater(oldState) {\n    var state = reactToKeys(oldState);\n\n    if (state.game.status === __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"c\" /* GAME_STATUS */].play) {\n        state = nextPlayFrame(state);\n        state.game.frame += 1;\n    }\n\n    return state;\n}\n\n/***/ }),\n\n/***/ \"J2UN\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__game__ = __webpack_require__(\"EBfR\");\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__[\"a\"]; });\n/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_0__game__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__hero__ = __webpack_require__(\"iMa0\");\n/* unused harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__threats__ = __webpack_require__(\"7lKn\");\n/* unused harmony namespace reexport */\n\n\n\n\n/***/ }),\n\n/***/ \"N9n6\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (state) {\n    return state.hero ? {\n        x: state.hero.x,\n        y: state.hero.y\n    } : {\n        x: 0,\n        y: 0\n    };\n});\n\n/***/ }),\n\n/***/ \"OXFD\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_funcs__ = __webpack_require__(\"vlrw\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__common__ = __webpack_require__(\"eSZQ\");\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (_ref) {\n    var game = _ref.game,\n        hero = _ref.hero,\n        threats = _ref.threats;\n\n    var scaryEdges = Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"c\" /* getScaryEdges */])(hero, 2 * threats.size, game.fieldWidth, game.fieldHeight);\n    var newThreats = threats.threats.map(function (threat) {\n        return {\n            x: threat.x + threat.speed.x,\n            y: threat.y + threat.speed.y\n        };\n    });\n    var extendedThreats = __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.extend(scaryEdges, newThreats);\n\n    var nearestThreat = Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"a\" /* getNearest */])(hero, extendedThreats);\n\n    if (!nearestThreat.threat || nearestThreat.distance > Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"b\" /* getSafeInterval */])(hero, threats)) {\n        return Object(__WEBPACK_IMPORTED_MODULE_1__utils_funcs__[\"b\" /* defaultHeroPosition */])(game, hero.size);\n    }\n\n    var variant = Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"d\" /* getVariants */])(hero).reduce(function (best, current) {\n        var _getNearest = Object(__WEBPACK_IMPORTED_MODULE_2__common__[\"a\" /* getNearest */])(current, extendedThreats),\n            distance = _getNearest.distance;\n\n        if (distance > best.distance) {\n            return {\n                x: current.x,\n                y: current.y,\n                distance: distance\n            };\n        }\n\n        return best;\n    }, {\n        x: hero.x,\n        y: hero.y,\n        distance: nearestThreat.distance\n    });\n\n    return {\n        x: variant.x,\n        y: variant.y\n    };\n});\n\n/***/ }),\n\n/***/ \"QCNp\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Sidebar; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"GiK3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(\"KSGD\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_redux__ = __webpack_require__(\"RH2O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_redux__ = __webpack_require__(\"2KeS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_state_control__ = __webpack_require__(\"RjKN\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__actions__ = __webpack_require__(\"BCOr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__controllers__ = __webpack_require__(\"evxK\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__RedSquares_less__ = __webpack_require__(\"tNBi\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__RedSquares_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__RedSquares_less__);\nvar _dec, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\nvar Sidebar = (_dec = Object(__WEBPACK_IMPORTED_MODULE_2_react_redux__[\"b\" /* connect */])(Object(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"e\" /* extendConnection */])(function (state) {\n    return {\n        status: state.game.status,\n        beats: state.game.beats,\n        highestBeats: state.game.highestBeats,\n        outs: state.game.outs,\n        threatsLength: state.threats.threats.length,\n        manager: state.game.manager\n    };\n}, __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */]), function (dispatch) {\n    return Object(__WEBPACK_IMPORTED_MODULE_3_redux__[\"b\" /* bindActionCreators */])({\n        processSpacePress: __WEBPACK_IMPORTED_MODULE_6__actions__[\"a\" /* game */].processSpacePress,\n        setState: __WEBPACK_IMPORTED_MODULE_6__actions__[\"b\" /* params */].setState,\n        clearHighest: __WEBPACK_IMPORTED_MODULE_6__actions__[\"a\" /* game */].clearHighest\n    }, dispatch);\n}), _dec(_class = function (_React$Component) {\n    _inherits(Sidebar, _React$Component);\n\n    function Sidebar() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, Sidebar);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.getS = function (name, num) {\n            return (num || 'No') + ' ' + name + (num !== 1 ? 's' : '');\n        }, _this.changeHandler = _this.props.setState, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    Sidebar.prototype.render = function render() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { className: __WEBPACK_IMPORTED_MODULE_9__RedSquares_less___default.a.side, style: { width: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"b\" /* DEFAULTS */].sideWidth + 'px' } },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'button',\n                { onClick: this.props.processSpacePress },\n                __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"a\" /* BUTTON_NAMES */][this.props.status]\n            ),\n            ' (Press Space)',\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'h2',\n                null,\n                this.getS('beat', this.props.beats)\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'p',\n                null,\n                'Highest beats: ',\n                this.props.highestBeats\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'p',\n                null,\n                this.getS('out', this.props.outs)\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'p',\n                null,\n                this.getS('threat', this.props.threatsLength),\n                ' on field'\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                __WEBPACK_IMPORTED_MODULE_5_state_control__[\"b\" /* Connector */],\n                {\n                    state: Object(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"f\" /* mapStateToIds */])(this.props, __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */]),\n                    onChange: this.changeHandler,\n                    defaultNum: 1\n                },\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"a\" /* Check */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].autoRestart,\n                    label: 'Auto restart'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"d\" /* Radio */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].speed,\n                    label: 'Speed',\n                    values: __WEBPACK_IMPORTED_MODULE_4_lodash___default.a.keys(__WEBPACK_IMPORTED_MODULE_8__constants_game__[\"g\" /* SPEEDS */])\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"d\" /* Radio */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].manager,\n                    label: 'Control',\n                    values: __WEBPACK_IMPORTED_MODULE_4_lodash___default.a.keys(__WEBPACK_IMPORTED_MODULE_7__controllers__)\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"c\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].heroSize,\n                    label: 'Hero size (px)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"c\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].heroSpeed,\n                    label: 'Hero max speed (px/s)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"c\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].threatSize,\n                    label: 'Threat size (px)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"c\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].threatSpeed,\n                    label: 'Threat max speed (px/s)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"c\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].threatLimit,\n                    label: 'Threat limit'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"c\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].threatAddTimeout,\n                    label: 'Threat add timeout (ms)'\n                }),\n                __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_state_control__[\"c\" /* Input */], {\n                    id: __WEBPACK_IMPORTED_MODULE_8__constants_game__[\"e\" /* IDS */].threatRemoveProbability,\n                    label: 'Threat remove probability (1/x)'\n                })\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'button',\n                { onClick: this.props.clearHighest },\n                'Clear highest'\n            )\n        );\n    };\n\n    return Sidebar;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component)) || _class);\n\n\n/***/ }),\n\n/***/ \"WNaE\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_game__ = __webpack_require__(\"bHK7\");\n\n\n\n\nvar initialState = {\n    threats: [],\n    size: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].threatSize,\n    maxSpeed: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].threatSpeed,\n    lastTime: 0,\n    addTimeout: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].threatAddTimeout,\n    index: 0,\n    limit: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].threatLimit,\n    removeProbability: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].threatRemoveProbability\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__[\"b\" /* SET_STATE */]:\n            return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.extend({}, state, action.data.threats);\n        default:\n            return state;\n    }\n});\n\n/***/ }),\n\n/***/ \"YhS/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return HERO_STATUSES; });\nvar HERO_STATUSES = {\n    normal: 'normal',\n    trouble: 'trouble'\n};\n\n/***/ }),\n\n/***/ \"ZJmM\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__constants_hero__ = __webpack_require__(\"YhS/\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_funcs__ = __webpack_require__(\"vlrw\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\n\n\n\nvar initialState = _extends({}, Object(__WEBPACK_IMPORTED_MODULE_4__utils_funcs__[\"b\" /* defaultHeroPosition */])(__WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */], __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].heroSize), {\n    maxSpeed: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].heroSpeed,\n    status: __WEBPACK_IMPORTED_MODULE_3__constants_hero__[\"a\" /* HERO_STATUSES */].normal,\n    size: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].heroSize,\n    shadowPeriod: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].shadowPeriod,\n    shadowQuantity: __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].shadowQuantity,\n    shadows: [],\n    target: _extends({}, Object(__WEBPACK_IMPORTED_MODULE_4__utils_funcs__[\"b\" /* defaultHeroPosition */])(__WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */], __WEBPACK_IMPORTED_MODULE_2__constants_game__[\"b\" /* DEFAULTS */].heroSize), {\n        save: ''\n    })\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n        case __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__[\"b\" /* SET_STATE */]:\n            return __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.extend({}, state, action.data.hero);\n        default:\n            return state;\n    }\n});\n\n/***/ }),\n\n/***/ \"ZvXP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setState\", function() { return setState; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n\n\n\nvar setState = function setState(name, value) {\n    return {\n        type: __WEBPACK_IMPORTED_MODULE_1__constants_actionTypes__[\"b\" /* SET_STATE */],\n        data: __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.set({}, name, value)\n    };\n};\n\n/***/ }),\n\n/***/ \"bHK7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return SPEEDS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DEFAULTS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return IDS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return HIGHEST_BEATS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return GAME_STATUS; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return BUTTON_NAMES; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return KEY_CODES; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__controllers__ = __webpack_require__(\"evxK\");\nvar _BUTTON_NAMES;\n\n\n\n\nvar SPEEDS = {\n    Normal: 'Normal',\n    Fast: 'Fast',\n    Faster: 'Faster'\n};\n\nvar DEFAULTS = {\n    frameLength: 30,\n    fieldWidth: 800,\n    fieldHeight: 600,\n    sideWidth: 200,\n    shadowPeriod: 1,\n    shadowQuantity: 50,\n    speed: SPEEDS.Fast,\n    manager: __WEBPACK_IMPORTED_MODULE_0_lodash___default.a.findKey(__WEBPACK_IMPORTED_MODULE_1__controllers__, function (f) {\n        return f === __WEBPACK_IMPORTED_MODULE_1__controllers__[\"Traveller\"];\n    }),\n    heroSize: 25,\n    heroSpeed: 10,\n    threatSize: 15,\n    threatSpeed: 4,\n    threatLimit: 20,\n    threatAddTimeout: 1000,\n    threatRemoveProbability: 5\n};\n\nvar IDS = {\n    autoRestart: 'game.autoRestart',\n    speed: 'game.speed',\n    manager: 'game.manager',\n    heroSize: 'hero.size',\n    heroSpeed: 'hero.maxSpeed',\n    threatSize: 'threats.size',\n    threatSpeed: 'threats.maxSpeed',\n    threatLimit: 'threats.limit',\n    threatAddTimeout: 'threats.addTimeout',\n    threatRemoveProbability: 'threats.removeProbability'\n};\n\nvar HIGHEST_BEATS = 'highestBeats';\n\nvar GAME_STATUS = {\n    play: 'play',\n    pause: 'pause',\n    stop: 'stop'\n};\n\nvar BUTTON_NAMES = (_BUTTON_NAMES = {}, _BUTTON_NAMES[GAME_STATUS.play] = 'Pause', _BUTTON_NAMES[GAME_STATUS.pause] = 'Resume', _BUTTON_NAMES[GAME_STATUS.stop] = 'Start', _BUTTON_NAMES);\n\nvar KEY_CODES = {\n    space: 32\n};\n\n/***/ }),\n\n/***/ \"cilB\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"eSZQ\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export SCARY_INTERVAL */\n/* unused harmony export VARIANTS_QUANTITY */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getNearest; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getSafeInterval; });\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = getScaryEdges;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = getVariants;\nvar SCARY_INTERVAL = 4 / 3;\nvar VARIANTS_QUANTITY = 24;\n\nvar getDistance = function getDistance(A, B) {\n    return Math.sqrt(Math.pow(A.x - B.x, 2) + Math.pow(A.y - B.y, 2));\n};\n\nvar getNearest = function getNearest(_ref, threats) {\n    var x = _ref.x,\n        y = _ref.y;\n    return threats.reduce(function (nearest, threat) {\n        var distance = getDistance({ x: x, y: y }, threat);\n        if (!nearest.threat || nearest.distance > distance) {\n            return {\n                threat: threat,\n                distance: distance\n            };\n        }\n\n        return nearest;\n    }, {\n        threat: null,\n        distance: Infinity\n    });\n};\n\nvar getSafeInterval = function getSafeInterval(hero, threats) {\n    return (hero.size + threats.size + hero.maxSpeed + threats.maxSpeed) * SCARY_INTERVAL;\n};\n\nfunction getScaryEdges(hero, size, width, height) {\n    var edges = [];\n    var x = hero.x,\n        y = hero.y;\n\n\n    edges.push({\n        x: x,\n        y: -size * 1.1\n    });\n    edges.push({\n        x: x,\n        y: height + size * 1.1\n    });\n\n    edges.push({\n        x: -size * 1.1,\n        y: y\n    });\n    edges.push({\n        x: width + size * 1.1,\n        y: y\n    });\n\n    return edges;\n}\n\nfunction getVariants(hero) {\n    var variants = [];\n    for (var angle = 0; angle < Math.PI * 2; angle += Math.PI * 2 / VARIANTS_QUANTITY) {\n        variants.push({\n            x: hero.x + Math.cos(angle) * hero.maxSpeed,\n            y: hero.y + Math.sin(angle) * hero.maxSpeed\n        });\n    }\n\n    return variants;\n}\n\n/***/ }),\n\n/***/ \"evxK\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__manual__ = __webpack_require__(\"smes\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Mouse\", function() { return __WEBPACK_IMPORTED_MODULE_0__manual__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__still__ = __webpack_require__(\"N9n6\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Still\", function() { return __WEBPACK_IMPORTED_MODULE_1__still__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__random__ = __webpack_require__(\"BKuW\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Random\", function() { return __WEBPACK_IMPORTED_MODULE_2__random__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__scared__ = __webpack_require__(\"0HjV\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Scared\", function() { return __WEBPACK_IMPORTED_MODULE_3__scared__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__stable__ = __webpack_require__(\"OXFD\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Stable\", function() { return __WEBPACK_IMPORTED_MODULE_4__stable__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__traveller__ = __webpack_require__(\"mObc\");\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Traveller\", function() { return __WEBPACK_IMPORTED_MODULE_5__traveller__[\"a\"]; });\n\n\n\n\n\n\n\n/***/ }),\n\n/***/ \"gIL8\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RedSquares; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"GiK3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(\"KSGD\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_redux__ = __webpack_require__(\"2KeS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_redux__ = __webpack_require__(\"RH2O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__actions__ = __webpack_require__(\"BCOr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__RedSquares_less__ = __webpack_require__(\"tNBi\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__RedSquares_less__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__CanvasField__ = __webpack_require__(\"qaGz\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Sidebar__ = __webpack_require__(\"QCNp\");\nvar _dec, _class, _class2, _temp2;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\n\n\n\nvar _ref = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__Sidebar__[\"a\" /* default */], null);\n\nvar RedSquares = (_dec = Object(__WEBPACK_IMPORTED_MODULE_3_react_redux__[\"b\" /* connect */])(function (state) {\n    return {\n        fieldWidth: state.game.fieldWidth\n    };\n}, function (dispatch) {\n    return Object(__WEBPACK_IMPORTED_MODULE_2_redux__[\"b\" /* bindActionCreators */])({\n        init: __WEBPACK_IMPORTED_MODULE_5__actions__[\"a\" /* game */].init\n    }, dispatch);\n}), _dec(_class = (_temp2 = _class2 = function (_React$Component) {\n    _inherits(RedSquares, _React$Component);\n\n    function RedSquares() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, RedSquares);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$Component.call.apply(_React$Component, [this].concat(args))), _this), _this.getFieldSize = function () {\n            var fieldRect = _this.field;\n\n            return {\n                left: fieldRect.offsetLeft,\n                top: fieldRect.offsetTop,\n                right: fieldRect.offsetLeft + fieldRect.clientWidth,\n                bottom: fieldRect.offsetTop + fieldRect.clientHeight\n            };\n        }, _this.handleRefField = function (elem) {\n            _this.field = elem;\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    RedSquares.prototype.componentDidMount = function componentDidMount() {\n        this.props.init(this);\n    };\n\n    RedSquares.prototype.render = function render() {\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { className: __WEBPACK_IMPORTED_MODULE_7__RedSquares_less___default.a.wrapper, style: { width: this.props.fieldWidth + __WEBPACK_IMPORTED_MODULE_6__constants_game__[\"b\" /* DEFAULTS */].sideWidth + 'px' } },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__CanvasField__[\"a\" /* default */], { refHandler: this.handleRefField }),\n            _ref\n        );\n    };\n\n    return RedSquares;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.Component), _class2.defaultProps = {\n    fieldWidth: 800,\n    init: __WEBPACK_IMPORTED_MODULE_4_lodash___default.a.noop\n}, _temp2)) || _class);\n\n\n/***/ }),\n\n/***/ \"hB/+\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"processSpacePress\"] = processSpacePress;\n/* harmony export (immutable) */ __webpack_exports__[\"clearHighest\"] = clearHighest;\n/* harmony export (immutable) */ __webpack_exports__[\"init\"] = init;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__ = __webpack_require__(\"4HHy\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_InputCatcher__ = __webpack_require__(\"liqn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__game_logic__ = __webpack_require__(\"J2UN\");\n\n\n\n\n\nfunction processSpacePress() {\n    return function (dispatch, getState) {\n        dispatch({\n            type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"b\" /* SET_STATE */],\n            data: Object(__WEBPACK_IMPORTED_MODULE_3__game_logic__[\"b\" /* spacePress */])(getState())\n        });\n    };\n}\n\nvar getWaitTime = function getWaitTime(state, lastFrameTime) {\n    return Math.max(lastFrameTime + __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"b\" /* DEFAULTS */].frameLength - performance.now(), 0);\n};\n\nvar gameCycle = function gameCycle(initState) {\n    var state = Object(__WEBPACK_IMPORTED_MODULE_3__game_logic__[\"a\" /* gameStateUpdater */])(initState);\n\n    if (state.game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].stop && initState.game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play) {\n        localStorage.setItem(__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */], state.game.highestBeats = Math.max(state.game.beats, state.game.highestBeats));\n    }\n\n    return state;\n};\n\nfunction updateFrame(dispatch, getState, lastFrameTime) {\n    return function () {\n        var initState = getState();\n        var state = gameCycle(initState);\n\n        if (state.game.speed === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"g\" /* SPEEDS */].Faster) {\n            for (var i = 1; i <= 100; i += 1) {\n                state = gameCycle(state);\n            }\n        }\n\n        if (state.game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play || initState.game.status === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"c\" /* GAME_STATUS */].play) {\n            dispatch({\n                type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"b\" /* SET_STATE */],\n                data: state\n            });\n        }\n\n        setTimeout(updateFrame(dispatch, getState, performance.now()), state.game.speed === __WEBPACK_IMPORTED_MODULE_1__constants_game__[\"g\" /* SPEEDS */].Normal ? getWaitTime(state, lastFrameTime) : 0);\n    };\n}\n\nfunction clearHighest() {\n    return function (dispatch) {\n        localStorage.removeItem(__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */]);\n\n        dispatch({\n            type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* INIT */],\n            data: {\n                highestBeats: 0\n            }\n        });\n    };\n}\n\nfunction init(redSquares) {\n    return function (dispatch, getState) {\n        dispatch({\n            type: __WEBPACK_IMPORTED_MODULE_0__constants_actionTypes__[\"a\" /* INIT */],\n            data: {\n                redSquares: redSquares,\n                inputController: new __WEBPACK_IMPORTED_MODULE_2__utils_InputCatcher__[\"a\" /* default */](),\n                highestBeats: localStorage[__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */]] ? parseInt(localStorage[__WEBPACK_IMPORTED_MODULE_1__constants_game__[\"d\" /* HIGHEST_BEATS */]], 10) : 0\n            }\n        });\n\n        updateFrame(dispatch, getState)();\n    };\n}\n\n/***/ }),\n\n/***/ \"iMa0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = moveHero;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constants_game__ = __webpack_require__(\"bHK7\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__constants_hero__ = __webpack_require__(\"YhS/\");\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\n\nvar getHeroStatus = function getHeroStatus(x, y, heroSize, threatSize, threats) {\n    var safeLength = heroSize + threatSize;\n\n    if (threats.some(function (threat) {\n        return Math.abs(threat.x - x) < safeLength && Math.abs(threat.y - y) < safeLength;\n    })) {\n        return __WEBPACK_IMPORTED_MODULE_1__constants_hero__[\"a\" /* HERO_STATUSES */].trouble;\n    }\n\n    return __WEBPACK_IMPORTED_MODULE_1__constants_hero__[\"a\" /* HERO_STATUSES */].normal;\n};\n\nfunction getMove(hero, target) {\n    var xDelta = target.x - hero.x;\n    var yDelta = target.y - hero.y;\n    var distance = Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2));\n\n    if (distance <= hero.maxSpeed) {\n        return {\n            xMove: xDelta,\n            yMove: yDelta\n        };\n    }\n\n    var normalization = distance / hero.maxSpeed;\n\n    return {\n        xMove: xDelta / normalization,\n        yMove: yDelta / normalization\n    };\n}\n\nfunction getShadows(_ref) {\n    var game = _ref.game,\n        hero = _ref.hero;\n    var shadows = hero.shadows;\n\n    var id = 0;\n\n    if (!(game.frame % hero.shadowPeriod)) {\n        if (shadows.length === hero.shadowQuantity) {\n            shadows.pop();\n        }\n        if (shadows.length) {\n            id = shadows[0].id + 1;\n        }\n        shadows.unshift({\n            x: hero.x,\n            y: hero.y,\n            id: id\n        });\n    }\n\n    return shadows;\n}\n\nfunction moveHero(state) {\n    var game = state.game,\n        hero = state.hero;\n    var target = hero.target;\n    var threats = state.threats.threats;\n\n    var threatSize = state.threats.size;\n\n    var _getMove = getMove(hero, target),\n        xMove = _getMove.xMove,\n        yMove = _getMove.yMove;\n\n    var x = hero.x + xMove;\n    x = Math.max(x, hero.size);\n    x = Math.min(x, game.fieldWidth - hero.size);\n\n    var y = hero.y + yMove;\n    y = Math.max(y, hero.size);\n    y = Math.min(y, game.fieldHeight - hero.size);\n\n    var status = getHeroStatus(x, y, hero.size, threatSize, threats);\n\n    return _extends({}, state, {\n        game: _extends({}, state.game, {\n            status: status === __WEBPACK_IMPORTED_MODULE_1__constants_hero__[\"a\" /* HERO_STATUSES */].normal ? __WEBPACK_IMPORTED_MODULE_0__constants_game__[\"c\" /* GAME_STATUS */].play : __WEBPACK_IMPORTED_MODULE_0__constants_game__[\"c\" /* GAME_STATUS */].stop\n        }),\n        hero: _extends({}, state.hero, {\n            x: x,\n            y: y,\n            status: status,\n            shadows: getShadows(state)\n        })\n    });\n}\n\n/***/ }),\n\n/***/ \"lVK7\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"GiK3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom__ = __webpack_require__(\"O27J\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__App__ = __webpack_require__(\"sMfP\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__index_css__ = __webpack_require__(\"cilB\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__index_css__);\n\n\n\n\n\nObject(__WEBPACK_IMPORTED_MODULE_1_react_dom__[\"render\"])(__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_2__App__[\"a\" /* default */], null), document.querySelector('#app'));\n\n/***/ }),\n\n/***/ \"liqn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return InputCatcher; });\nvar _class, _temp, _initialiseProps;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar InputCatcher = (_temp = _class = function InputCatcher(keymap) {\n    _classCallCheck(this, InputCatcher);\n\n    _initialiseProps.call(this);\n\n    this.initialKeymap = keymap;\n\n    if (InputCatcher.instance) {\n        return InputCatcher.instance;\n    }\n    InputCatcher.instance = this;\n\n    document.onmousemove = this.saveMousePos;\n    window.document.onkeydown = this.process;\n}, _class.mousePos = {}, _class.keyPressed = [], _initialiseProps = function _initialiseProps() {\n    var _this = this;\n\n    this.initialKeymap = {};\n\n    this.saveMousePos = function (e) {\n        InputCatcher.mousePos = {\n            x: e.pageX,\n            y: e.pageY\n        };\n    };\n\n    this.process = function (e) {\n        if (e.keyCode === 32) {\n            e.preventDefault();\n        }\n        _this.saveKeyPressed(e);\n    };\n\n    this.saveKeyPressed = function (_ref) {\n        var keyCode = _ref.keyCode;\n        return InputCatcher.keyPressed.push(keyCode);\n    };\n\n    this.reactToKeys = function () {\n        var keymap = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.initialKeymap;\n\n        InputCatcher.keyPressed.forEach(function (key) {\n            return keymap[key] && keymap[key]();\n        });\n        InputCatcher.keyPressed = [];\n    };\n}, _temp);\n\n\n/***/ }),\n\n/***/ \"mObc\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(\"eSZQ\");\n\n\nvar setupMinDistance = function setupMinDistance(fieldWidth, fieldHeight, safe) {\n    return function (_ref, threats) {\n        var x = _ref.x,\n            y = _ref.y;\n        return Math.min(Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* getNearest */])({ x: x, y: y }, threats).distance, x + safe, fieldWidth + safe - x, y + safe, fieldHeight + safe - y);\n    };\n};\n\nfunction getClearest(safe, fieldWidth, fieldHeight, threats) {\n    var clearest = 0;\n    var xBest = void 0;\n    var yBest = void 0;\n    var getMinDistance = setupMinDistance(fieldWidth, fieldHeight, safe);\n\n    for (var x = safe; x < fieldWidth - safe; x += safe) {\n        for (var y = safe; y < fieldHeight - safe; y += safe) {\n            var distance = getMinDistance({ x: x, y: y }, threats);\n\n            if (distance > clearest) {\n                clearest = distance;\n                xBest = x;\n                yBest = y;\n            }\n        }\n    }\n\n    return {\n        x: xBest,\n        y: yBest\n    };\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (_ref2) {\n    var game = _ref2.game,\n        hero = _ref2.hero,\n        threats = _ref2.threats;\n\n    var newThreats = threats.threats.map(function (threat) {\n        return {\n            x: threat.x + threat.speed.x,\n            y: threat.y + threat.speed.y\n        };\n    });\n\n    var safe = hero.size + threats.size;\n    var getMinDistance = setupMinDistance(game.fieldWidth, game.fieldHeight, safe);\n    var nearest = getMinDistance(hero, newThreats);\n\n    if (nearest > Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* getSafeInterval */])(hero, threats)) {\n        return getClearest(safe, game.fieldWidth, game.fieldHeight, newThreats);\n    }\n\n    var variant = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"d\" /* getVariants */])(hero).reduce(function (best, current) {\n        var distance = getMinDistance(current, newThreats);\n\n        if (distance > best.distance) {\n            return {\n                x: current.x,\n                y: current.y,\n                distance: distance\n            };\n        }\n\n        return best;\n    }, {\n        x: hero.x,\n        y: hero.y,\n        distance: nearest\n    });\n\n    return {\n        x: variant.x,\n        y: variant.y\n    };\n});\n\n/***/ }),\n\n/***/ \"qaGz\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CanvasField; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"GiK3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types__ = __webpack_require__(\"KSGD\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react_redux__ = __webpack_require__(\"RH2O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__(\"M4fF\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__constants_hero__ = __webpack_require__(\"YhS/\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__RedSquares_less__ = __webpack_require__(\"tNBi\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__RedSquares_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__RedSquares_less__);\nvar _heroStyle, _dec, _class;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\nvar heroStyle = (_heroStyle = {}, _heroStyle[__WEBPACK_IMPORTED_MODULE_4__constants_hero__[\"a\" /* HERO_STATUSES */].normal] = 'rgb(50, 205, 50)', _heroStyle[__WEBPACK_IMPORTED_MODULE_4__constants_hero__[\"a\" /* HERO_STATUSES */].trouble] = 'rgb(237, 20, 61)', _heroStyle);\n\nvar CanvasField = (_dec = Object(__WEBPACK_IMPORTED_MODULE_2_react_redux__[\"b\" /* connect */])(function (state) {\n    return {\n        fieldWidth: state.game.fieldWidth,\n        fieldHeight: state.game.fieldHeight,\n        heroStatus: state.hero.status,\n        heroSize: state.hero.size,\n        heroPos: {\n            x: state.hero.x,\n            y: state.hero.y\n        },\n        threatSize: state.threats.size,\n        threats: state.threats.threats,\n        shadows: state.hero.shadows,\n        error: state.game.error\n    };\n}), _dec(_class = function (_React$PureComponent) {\n    _inherits(CanvasField, _React$PureComponent);\n\n    function CanvasField() {\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, CanvasField);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args))), _this), _this.canvas = null, _this.handleRefCanvas = function (elem) {\n            _this.canvas = elem;\n            _this.props.refHandler(elem);\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    CanvasField.drawSquare = function drawSquare(_ref) {\n        var ctx = _ref.ctx,\n            pos = _ref.pos,\n            size = _ref.size,\n            color = _ref.color;\n\n        ctx.fillStyle = color;\n        ctx.fillRect(Math.round(pos.x - size), Math.round(pos.y - size), size * 2, size * 2);\n    };\n\n    CanvasField.prototype.paint = function paint() {\n        var _this2 = this;\n\n        if (!this.canvas) {\n            return;\n        }\n        var ctx = this.canvas.getContext('2d');\n\n        ctx.clearRect(0, 0, this.props.fieldWidth, this.props.fieldHeight);\n\n        this.props.shadows.forEach(function (shadow, index) {\n            return CanvasField.drawSquare({\n                ctx: ctx,\n                pos: _this2.props.shadows[index],\n                size: _this2.props.heroSize,\n                color: 'rgba(237, 20, 61, ' + (_this2.props.shadows.length - index - 1) / _this2.props.shadows.length * 0.2 + ')'\n            });\n        });\n        CanvasField.drawSquare({\n            ctx: ctx,\n            pos: this.props.heroPos,\n            size: this.props.heroSize,\n            color: heroStyle[this.props.heroStatus]\n        });\n        this.props.threats.forEach(function (threat) {\n            return CanvasField.drawSquare({\n                ctx: ctx,\n                pos: threat,\n                size: _this2.props.threatSize,\n                color: 'rgb(100, 149, 237)'\n            });\n        });\n    };\n\n    CanvasField.prototype.render = function render() {\n        this.paint();\n\n        return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n            'div',\n            { className: __WEBPACK_IMPORTED_MODULE_5__RedSquares_less___default.a.fieldWrapper },\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'canvas',\n                {\n                    className: __WEBPACK_IMPORTED_MODULE_5__RedSquares_less___default.a.field,\n                    ref: this.handleRefCanvas,\n                    width: this.props.fieldWidth,\n                    height: this.props.fieldHeight\n                },\n                'You are using an outdated browser.'\n            ),\n            __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n                'div',\n                { className: __WEBPACK_IMPORTED_MODULE_5__RedSquares_less___default.a.error },\n                this.props.error\n            )\n        );\n    };\n\n    return CanvasField;\n}(__WEBPACK_IMPORTED_MODULE_0_react___default.a.PureComponent)) || _class);\n\n\n/***/ }),\n\n/***/ \"sMfP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(\"GiK3\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_redux__ = __webpack_require__(\"2KeS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_redux_thunk__ = __webpack_require__(\"4ufr\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_redux_thunk___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_redux_thunk__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_react_redux__ = __webpack_require__(\"RH2O\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__reducers__ = __webpack_require__(\"ChGC\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_RedSquares__ = __webpack_require__(\"gIL8\");\n\n\n\n\n\n\n\nvar composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ // eslint-disable-line no-underscore-dangle\n|| __WEBPACK_IMPORTED_MODULE_1_redux__[\"d\" /* compose */];\nvar store = Object(__WEBPACK_IMPORTED_MODULE_1_redux__[\"e\" /* createStore */])(Object(__WEBPACK_IMPORTED_MODULE_1_redux__[\"c\" /* combineReducers */])(__WEBPACK_IMPORTED_MODULE_4__reducers__), composeEnhancers(Object(__WEBPACK_IMPORTED_MODULE_1_redux__[\"a\" /* applyMiddleware */])(__WEBPACK_IMPORTED_MODULE_2_redux_thunk___default.a)));\n\nvar _ref = __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(\n    __WEBPACK_IMPORTED_MODULE_3_react_redux__[\"a\" /* Provider */],\n    { store: store },\n    __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5__components_RedSquares__[\"a\" /* default */], null)\n);\n\nvar App = function App() {\n    return _ref;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (App);\n\n/***/ }),\n\n/***/ \"smes\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_InputCatcher__ = __webpack_require__(\"liqn\");\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function (data) {\n    var fieldSize = data.game.redSquares.getFieldSize();\n\n    return {\n        x: __WEBPACK_IMPORTED_MODULE_0__utils_InputCatcher__[\"a\" /* default */].mousePos.x - fieldSize.left,\n        y: __WEBPACK_IMPORTED_MODULE_0__utils_InputCatcher__[\"a\" /* default */].mousePos.y - fieldSize.top\n    };\n});\n\n/***/ }),\n\n/***/ \"tNBi\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"fieldWrapper\":\"RedSquares__fieldWrapper__3xRFe\",\"field\":\"RedSquares__field__3S_U-\",\"error\":\"RedSquares__error__32Ynw\",\"side\":\"RedSquares__side__1Qama\"};\n\n/***/ }),\n\n/***/ \"vlrw\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = combineProcessors;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = sign;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return defaultHeroPosition; });\nfunction combineProcessors() {\n    for (var _len = arguments.length, processors = Array(_len), _key = 0; _key < _len; _key++) {\n        processors[_key] = arguments[_key];\n    }\n\n    return function (state) {\n        return processors.reduce(function (result, processor) {\n            return processor(result);\n        }, state);\n    };\n}\n\nfunction sign(num) {\n    if (num === 0 || isNaN(num)) {\n        return num;\n    }\n\n    return num > 0 ? 1 : -1;\n}\n\nvar defaultHeroPosition = function defaultHeroPosition(game, size) {\n    return {\n        x: (game.fieldWidth - size) / 2,\n        y: (game.fieldHeight - size) / 2\n    };\n};\n\n/***/ })\n\n},[0]);\n\n\n// WEBPACK FOOTER //\n// app.61d862ef.js","import _ from 'lodash'\r\nimport { defaultHeroPosition } from '../utils/funcs'\r\nimport { getSafeInterval, getNearest, getScaryEdges } from './common'\r\n\r\nexport default function ({ game, hero, threats }) {\r\n    const scaryEdges = getScaryEdges(hero, 2 * threats.size, game.fieldWidth, game.fieldHeight)\r\n\r\n    const nearestThreat = getNearest(hero, _.extend(scaryEdges, threats.threats))\r\n\r\n    if (!nearestThreat.threat || nearestThreat.distance > getSafeInterval(hero, threats) * 2) {\r\n        return defaultHeroPosition(game, hero.size)\r\n    }\r\n\r\n    const distance = {\r\n        x: hero.x - nearestThreat.threat.x,\r\n        y: hero.y - nearestThreat.threat.y,\r\n    }\r\n\r\n    return {\r\n        x: hero.x + distance.x,\r\n        y: hero.y + distance.y,\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/scared.js","export const INIT = 'INIT'\r\nexport const SET_STATE = 'SET_STATE'\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/actionTypes.js","import _ from 'lodash'\r\nimport { sign } from '../utils/funcs'\r\nimport { DEFAULTS } from '../constants/game'\r\n\r\nconst processSpeed = (threat, size, canFlyAway) => (axis, lean) => {\r\n    const updatedThreat = _.clone(threat)\r\n\r\n    updatedThreat.isGoingOut = sign(lean) === sign(updatedThreat.speed[axis])\r\n\r\n    if (!updatedThreat.isOut) {\r\n        if (canFlyAway && updatedThreat.isGoingOut) {\r\n            updatedThreat.isOut = true\r\n        } else {\r\n            updatedThreat.speed[axis] = (updatedThreat.isGoingOut ? -1 : 1) * (updatedThreat.speed[axis] || 1)\r\n        }\r\n    }\r\n    if (Math.abs(lean) > size * 3) {\r\n        updatedThreat.isAroundField = false\r\n    }\r\n\r\n    return updatedThreat\r\n}\r\n\r\nconst beat = (\r\n    removeProbability,\r\n    size,\r\n    fieldWidth,\r\n    fieldHeight\r\n) =>\r\n    (threat) => {\r\n        let newThreat = { ...threat }\r\n        const canFlyAway = Math.random() < 1 / removeProbability\r\n        const processThreat = processSpeed(newThreat, size, canFlyAway)\r\n\r\n        const leftBorder = size\r\n        if (newThreat.x < leftBorder) {\r\n            newThreat = processThreat('x', newThreat.x - leftBorder)\r\n        }\r\n        const rightBorder = fieldWidth - size\r\n        if (newThreat.x > rightBorder) {\r\n            newThreat = processThreat('x', newThreat.x - rightBorder)\r\n        }\r\n\r\n        const topBorder = size\r\n        if (newThreat.y < topBorder) {\r\n            newThreat = processThreat('y', newThreat.y - topBorder)\r\n        }\r\n        const bottomBorder = fieldHeight - size\r\n        if (newThreat.y > bottomBorder) {\r\n            newThreat = processThreat('y', newThreat.y - bottomBorder)\r\n        }\r\n\r\n        return newThreat\r\n    }\r\n\r\nconst newThreat = (size, index, fieldWidth, fieldHeight, maxSpeed) => {\r\n    const lean = size * 2\r\n    let x = Math.round(Math.random() * (fieldWidth - lean))\r\n    let y = 0 - lean\r\n    let speed = {\r\n        x: Math.round(((Math.random() * 2) - 1) * maxSpeed),\r\n        y: Math.ceil(Math.random() * maxSpeed),\r\n    }\r\n\r\n    if (Math.random() < 0.5) {\r\n        x = 0 - lean\r\n        y = Math.round(Math.random() * (fieldHeight - lean))\r\n        speed = {\r\n            x: Math.ceil(Math.random() * maxSpeed),\r\n            y: Math.round(((Math.random() * 2) - 1) * maxSpeed),\r\n        }\r\n\r\n        if (Math.random() < 0.5) {\r\n            x = fieldWidth\r\n            speed.x *= -1\r\n        }\r\n    } else if (Math.random() < 0.5) {\r\n        y = fieldHeight\r\n        speed.y *= -1\r\n    }\r\n    return {\r\n        id: index,\r\n        x,\r\n        y,\r\n        speed,\r\n        isOut: false,\r\n        isAroundField: true,\r\n    }\r\n}\r\n\r\nexport function controlThreats (state) {\r\n    const { threats } = state\r\n    const { frame, fieldWidth, fieldHeight } = state.game\r\n    const { frameLength } = DEFAULTS\r\n\r\n    let newThreats = threats.threats\r\n        .map((threat) => (\r\n            {\r\n                ...threat,\r\n                x: threat.x + threat.speed.x,\r\n                y: threat.y + threat.speed.y,\r\n            }\r\n        ))\r\n        .map(beat(\r\n            threats.removeProbability,\r\n            threats.size,\r\n            fieldWidth,\r\n            fieldHeight\r\n        ))\r\n    const oldThreatsNum = newThreats.length\r\n    newThreats = newThreats.filter((threat) => threat.isAroundField)\r\n    const outs = oldThreatsNum - newThreats.length\r\n\r\n    let beats = 0\r\n\r\n    newThreats = newThreats.map((threat) => {\r\n        const updatedThreat = _.clone(threat)\r\n\r\n        if (updatedThreat.isGoingOut && !updatedThreat.isOut) {\r\n            beats += 1\r\n            delete updatedThreat.isGoingOut\r\n        }\r\n        return updatedThreat\r\n    }, 0)\r\n\r\n    let isAdded = false\r\n    if (newThreats.length < threats.limit && frame >= threats.lastTime + (threats.addTimeout / frameLength)) {\r\n        newThreats.push(newThreat(\r\n            threats.size,\r\n            threats.index,\r\n            fieldWidth,\r\n            fieldHeight,\r\n            threats.maxSpeed\r\n        ))\r\n        isAdded = true\r\n    }\r\n\r\n    const newState = _.merge({}, state, {\r\n        game: {\r\n            beats: state.game.beats + beats,\r\n            outs: state.game.outs + outs,\r\n        },\r\n        threats: isAdded\r\n            ? {\r\n                lastTime: frame,\r\n                index: threats.index + 1,\r\n            }\r\n            : threats,\r\n    })\r\n\r\n    newState.threats.threats = newThreats\r\n\r\n    return newState\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/threats.js","import _ from 'lodash'\r\nimport * as types from '../constants/actionTypes'\r\nimport { DEFAULTS, GAME_STATUS } from '../constants/game'\r\n\r\nconst initialState = {\r\n    redSquares: null,\r\n    inputController: null,\r\n    manager: DEFAULTS.manager,\r\n    status: GAME_STATUS.stop,\r\n    autoRestart: true,\r\n    beats: 0,\r\n    highestBeats: 0,\r\n    outs: 0,\r\n    frame: 0,\r\n    speed: DEFAULTS.speed,\r\n    fieldWidth: DEFAULTS.fieldWidth,\r\n    fieldHeight: DEFAULTS.fieldHeight,\r\n    error: '',\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.INIT:\r\n            return _.extend({}, state, action.data)\r\n        case types.SET_STATE:\r\n            return _.extend({}, state, action.data.game)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/game.js","function getRandomCoordinate (range, size) {\r\n    return (Math.random() * (range - (size * 2))) + size\r\n}\r\n\r\nlet target\r\n\r\nexport default function (state) {\r\n    if (!target || (state.hero.x === target.x && state.hero.y === target.y)) {\r\n        target = {\r\n            x: getRandomCoordinate(state.game.fieldWidth, state.hero.size),\r\n            y: getRandomCoordinate(state.game.fieldHeight, state.hero.size),\r\n        }\r\n    }\r\n\r\n    return target\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/random.js","import _ from 'lodash'\r\nimport * as managers from '../controllers'\r\nimport { DEFAULTS, GAME_STATUS, KEY_CODES } from '../constants/game'\r\nimport { combineProcessors, defaultHeroPosition } from '../utils/funcs'\r\nimport { moveHero } from './hero'\r\nimport { controlThreats } from './threats'\r\n\r\nconst statusUpdate = (state, status) => _.merge({}, state, {\r\n    game: {\r\n        status,\r\n    },\r\n})\r\n\r\nexport function spacePress (state) {\r\n    switch (state.game.status) {\r\n        case GAME_STATUS.play:\r\n            return statusUpdate(state, GAME_STATUS.pause)\r\n        case GAME_STATUS.pause:\r\n            return statusUpdate(state, GAME_STATUS.play)\r\n        case GAME_STATUS.stop:\r\n        default:\r\n            return { // we use spread because of need to rewrite (not merge) threats\r\n                ...state,\r\n                game: {\r\n                    ...state.game,\r\n                    status: GAME_STATUS.play,\r\n                    beats: 0,\r\n                    outs: 0,\r\n                    frame: 0,\r\n                    error: '',\r\n                },\r\n                hero: {\r\n                    ...state.hero,\r\n                    ...defaultHeroPosition(state.game, state.hero.size),\r\n                },\r\n                threats: {\r\n                    ...state.threats,\r\n                    threats: [],\r\n                    lastTime: -state.threats.addTimeout / DEFAULTS.frameLength,\r\n                },\r\n            }\r\n    }\r\n}\r\n\r\nfunction callManager (oldState) {\r\n    const state = _.merge({}, oldState, {\r\n        hero: {\r\n            target: managers[oldState.game.manager](oldState),\r\n        },\r\n    })\r\n    if (isNaN(state.hero.target.x) || isNaN(state.hero.target.y)) {\r\n        state.game.error = 'Bad target'\r\n        state.hero.target = {\r\n            ...state.hero.target,\r\n            x: state.hero.x,\r\n            y: state.hero.y,\r\n        }\r\n    }\r\n\r\n    return state\r\n}\r\n\r\nfunction reactToKeys (oldState) {\r\n    let state = { ...oldState }\r\n\r\n    if (state.game.status === GAME_STATUS.stop && state.game.autoRestart) {\r\n        state = callManager(state)\r\n        state = spacePress(state)\r\n    } else {\r\n        state.game.inputController.reactToKeys({\r\n            [KEY_CODES.space]: () => {\r\n                state = spacePress(state)\r\n            },\r\n        })\r\n    }\r\n\r\n    return state\r\n}\r\n\r\nconst nextPlayFrame = combineProcessors(controlThreats, callManager, moveHero)\r\n\r\nexport function gameStateUpdater (oldState) {\r\n    let state = reactToKeys(oldState)\r\n\r\n    if (state.game.status === GAME_STATUS.play) {\r\n        state = nextPlayFrame(state)\r\n        state.game.frame += 1\r\n    }\r\n\r\n    return state\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/game.js","export default function (state) {\r\n    return state.hero\r\n        ? {\r\n            x: state.hero.x,\r\n            y: state.hero.y,\r\n        }\r\n        : {\r\n            x: 0,\r\n            y: 0,\r\n        }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/still.js","import _ from 'lodash'\r\nimport { defaultHeroPosition } from '../utils/funcs'\r\nimport { getNearest, getSafeInterval, getScaryEdges, getVariants } from './common'\r\n\r\nexport default function ({ game, hero, threats }) {\r\n    const scaryEdges = getScaryEdges(hero, 2 * threats.size, game.fieldWidth, game.fieldHeight)\r\n    const newThreats = threats.threats.map((threat) => (\r\n        {\r\n            x: threat.x + threat.speed.x,\r\n            y: threat.y + threat.speed.y,\r\n        }\r\n    ))\r\n    const extendedThreats = _.extend(scaryEdges, newThreats)\r\n\r\n    const nearestThreat = getNearest(hero, extendedThreats)\r\n\r\n    if (!nearestThreat.threat || nearestThreat.distance > getSafeInterval(hero, threats)) {\r\n        return defaultHeroPosition(game, hero.size)\r\n    }\r\n\r\n    const variant = getVariants(hero).reduce((best, current) => {\r\n        const { distance } = getNearest(current, extendedThreats)\r\n\r\n        if (distance > best.distance) {\r\n            return {\r\n                x: current.x,\r\n                y: current.y,\r\n                distance,\r\n            }\r\n        }\r\n\r\n        return best\r\n    }, {\r\n        x: hero.x,\r\n        y: hero.y,\r\n        distance: nearestThreat.distance,\r\n    })\r\n\r\n    return {\r\n        x: variant.x,\r\n        y: variant.y,\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/stable.js","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport _ from 'lodash'\r\nimport { Connector, Input, Radio, Check, extendConnection, mapStateToIds } from 'state-control'\r\nimport * as actions from '../actions'\r\nimport * as managers from '../controllers'\r\nimport { BUTTON_NAMES, DEFAULTS, GAME_STATUS, IDS, SPEEDS } from '../constants/game'\r\nimport style from './RedSquares.less'\r\n\r\n@connect(\r\n    extendConnection((state) => ({\r\n        status: state.game.status,\r\n        beats: state.game.beats,\r\n        highestBeats: state.game.highestBeats,\r\n        outs: state.game.outs,\r\n        threatsLength: state.threats.threats.length,\r\n        manager: state.game.manager,\r\n    }), IDS),\r\n    (dispatch) => bindActionCreators({\r\n        processSpacePress: actions.game.processSpacePress,\r\n        setState: actions.params.setState,\r\n        clearHighest: actions.game.clearHighest,\r\n    }, dispatch)\r\n)\r\nexport default class Sidebar extends React.Component {\r\n    static propTypes = {\r\n        status: PropTypes.oneOf(_.values(GAME_STATUS)).isRequired,\r\n        beats: PropTypes.number.isRequired,\r\n        highestBeats: PropTypes.number.isRequired,\r\n        outs: PropTypes.number.isRequired,\r\n        threatsLength: PropTypes.number.isRequired,\r\n        processSpacePress: PropTypes.func.isRequired,\r\n        setState: PropTypes.func.isRequired,\r\n        clearHighest: PropTypes.func.isRequired,\r\n    }\r\n\r\n    getS = (name, num) => `${num || 'No'} ${name}${num !== 1 ? 's' : ''}`\r\n\r\n    changeHandler = this.props.setState\r\n\r\n    render () {\r\n        return (\r\n            <div className={style.side} style={{ width: `${DEFAULTS.sideWidth}px` }}>\r\n                <button onClick={this.props.processSpacePress}>{BUTTON_NAMES[this.props.status]}</button>\r\n                {' (Press Space)'}\r\n                <h2>{this.getS('beat', this.props.beats)}</h2>\r\n                <p>Highest beats: {this.props.highestBeats}</p>\r\n                <p>{this.getS('out', this.props.outs)}</p>\r\n                <p>{this.getS('threat', this.props.threatsLength)} on field</p>\r\n\r\n                <Connector\r\n                    state={mapStateToIds(this.props, IDS)}\r\n                    onChange={this.changeHandler}\r\n                    defaultNum={1}\r\n                >\r\n                    <Check\r\n                        id={IDS.autoRestart}\r\n                        label=\"Auto restart\"\r\n                    />\r\n                    <Radio\r\n                        id={IDS.speed}\r\n                        label=\"Speed\"\r\n                        values={_.keys(SPEEDS)}\r\n                    />\r\n                    <Radio\r\n                        id={IDS.manager}\r\n                        label=\"Control\"\r\n                        values={_.keys(managers)}\r\n                    />\r\n                    <Input\r\n                        id={IDS.heroSize}\r\n                        label=\"Hero size (px)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.heroSpeed}\r\n                        label=\"Hero max speed (px/s)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatSize}\r\n                        label=\"Threat size (px)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatSpeed}\r\n                        label=\"Threat max speed (px/s)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatLimit}\r\n                        label=\"Threat limit\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatAddTimeout}\r\n                        label=\"Threat add timeout (ms)\"\r\n                    />\r\n                    <Input\r\n                        id={IDS.threatRemoveProbability}\r\n                        label=\"Threat remove probability (1/x)\"\r\n                    />\r\n                </Connector>\r\n                <button onClick={this.props.clearHighest}>Clear highest</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Sidebar.jsx","import _ from 'lodash'\r\nimport * as types from '../constants/actionTypes'\r\nimport { DEFAULTS } from '../constants/game'\r\n\r\nconst initialState = {\r\n    threats: [],\r\n    size: DEFAULTS.threatSize,\r\n    maxSpeed: DEFAULTS.threatSpeed,\r\n    lastTime: 0,\r\n    addTimeout: DEFAULTS.threatAddTimeout,\r\n    index: 0,\r\n    limit: DEFAULTS.threatLimit,\r\n    removeProbability: DEFAULTS.threatRemoveProbability,\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.SET_STATE:\r\n            return _.extend({}, state, action.data.threats)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/threats.js","export const HERO_STATUSES = {\r\n    normal: 'normal',\r\n    trouble: 'trouble',\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/hero.js","import _ from 'lodash'\r\nimport * as types from '../constants/actionTypes'\r\nimport { DEFAULTS } from '../constants/game'\r\nimport { HERO_STATUSES } from '../constants/hero'\r\nimport { defaultHeroPosition } from '../utils/funcs'\r\n\r\nconst initialState = {\r\n    ...defaultHeroPosition(DEFAULTS, DEFAULTS.heroSize),\r\n    maxSpeed: DEFAULTS.heroSpeed,\r\n    status: HERO_STATUSES.normal,\r\n    size: DEFAULTS.heroSize,\r\n    shadowPeriod: DEFAULTS.shadowPeriod,\r\n    shadowQuantity: DEFAULTS.shadowQuantity,\r\n    shadows: [],\r\n    target: {\r\n        ...defaultHeroPosition(DEFAULTS, DEFAULTS.heroSize),\r\n        save: '',\r\n    },\r\n}\r\n\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case types.SET_STATE:\r\n            return _.extend({}, state, action.data.hero)\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/reducers/hero.js","import _ from 'lodash'\r\nimport * as types from '../constants/actionTypes'\r\n\r\nexport const setState = (name, value) => ({\r\n    type: types.SET_STATE,\r\n    data: _.set({}, name, value),\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/params.js","import _ from 'lodash'\r\nimport * as managers from '../controllers'\r\n\r\nexport const SPEEDS = {\r\n    Normal: 'Normal',\r\n    Fast: 'Fast',\r\n    Faster: 'Faster',\r\n}\r\n\r\nexport const DEFAULTS = {\r\n    frameLength: 30,\r\n    fieldWidth: 800,\r\n    fieldHeight: 600,\r\n    sideWidth: 200,\r\n    shadowPeriod: 1,\r\n    shadowQuantity: 50,\r\n    speed: SPEEDS.Fast,\r\n    manager: _.findKey(managers, (f) => f === managers.Traveller),\r\n    heroSize: 25,\r\n    heroSpeed: 10,\r\n    threatSize: 15,\r\n    threatSpeed: 4,\r\n    threatLimit: 20,\r\n    threatAddTimeout: 1000,\r\n    threatRemoveProbability: 5,\r\n}\r\n\r\nexport const IDS = {\r\n    autoRestart: 'game.autoRestart',\r\n    speed: 'game.speed',\r\n    manager: 'game.manager',\r\n    heroSize: 'hero.size',\r\n    heroSpeed: 'hero.maxSpeed',\r\n    threatSize: 'threats.size',\r\n    threatSpeed: 'threats.maxSpeed',\r\n    threatLimit: 'threats.limit',\r\n    threatAddTimeout: 'threats.addTimeout',\r\n    threatRemoveProbability: 'threats.removeProbability',\r\n}\r\n\r\nexport const HIGHEST_BEATS = 'highestBeats'\r\n\r\nexport const GAME_STATUS = {\r\n    play: 'play',\r\n    pause: 'pause',\r\n    stop: 'stop',\r\n}\r\n\r\nexport const BUTTON_NAMES = {\r\n    [GAME_STATUS.play]: 'Pause',\r\n    [GAME_STATUS.pause]: 'Resume',\r\n    [GAME_STATUS.stop]: 'Start',\r\n}\r\n\r\nexport const KEY_CODES = {\r\n    space: 32,\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/game.js","export const SCARY_INTERVAL = 4 / 3\r\nexport const VARIANTS_QUANTITY = 24\r\n\r\nconst getDistance = (A, B) => Math.sqrt(((A.x - B.x) ** 2) + ((A.y - B.y) ** 2))\r\n\r\nexport const getNearest = ({ x, y }, threats) => threats.reduce((nearest, threat) => {\r\n    const distance = getDistance({ x, y }, threat)\r\n    if (!nearest.threat || nearest.distance > distance) {\r\n        return {\r\n            threat,\r\n            distance,\r\n        }\r\n    }\r\n\r\n    return nearest\r\n}, {\r\n    threat: null,\r\n    distance: Infinity,\r\n})\r\n\r\nexport const getSafeInterval = (hero, threats) =>\r\n    (hero.size + threats.size + hero.maxSpeed + threats.maxSpeed) * SCARY_INTERVAL\r\n\r\nexport function getScaryEdges (hero, size, width, height) {\r\n    const edges = []\r\n    const { x, y } = hero\r\n\r\n    edges.push({\r\n        x,\r\n        y: -size * 1.1,\r\n    })\r\n    edges.push({\r\n        x,\r\n        y: height + (size * 1.1),\r\n    })\r\n\r\n    edges.push({\r\n        x: -size * 1.1,\r\n        y,\r\n    })\r\n    edges.push({\r\n        x: width + (size * 1.1),\r\n        y,\r\n    })\r\n\r\n    return edges\r\n}\r\n\r\nexport function getVariants (hero) {\r\n    const variants = []\r\n    for (let angle = 0; angle < Math.PI * 2; angle += (Math.PI * 2) / VARIANTS_QUANTITY) {\r\n        variants.push({\r\n            x: hero.x + (Math.cos(angle) * hero.maxSpeed),\r\n            y: hero.y + (Math.sin(angle) * hero.maxSpeed),\r\n        })\r\n    }\r\n\r\n    return variants\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/common.js","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport * as actions from '../actions'\r\nimport { DEFAULTS } from '../constants/game'\r\nimport style from './RedSquares.less'\r\nimport CanvasField from './CanvasField'\r\nimport Sidebar from './Sidebar'\r\n\r\n@connect(\r\n    (state) => ({\r\n        fieldWidth: state.game.fieldWidth,\r\n    }),\r\n    (dispatch) => bindActionCreators({\r\n        init: actions.game.init,\r\n    }, dispatch)\r\n)\r\nexport default class RedSquares extends React.Component {\r\n    static propTypes = {\r\n        fieldWidth: PropTypes.number,\r\n        init: PropTypes.func,\r\n    }\r\n\r\n    static defaultProps = {\r\n        fieldWidth: 800,\r\n        init: _.noop,\r\n    }\r\n\r\n    componentDidMount () {\r\n        this.props.init(this)\r\n    }\r\n\r\n    getFieldSize = () => {\r\n        const fieldRect = this.field\r\n\r\n        return {\r\n            left: fieldRect.offsetLeft,\r\n            top: fieldRect.offsetTop,\r\n            right: fieldRect.offsetLeft + fieldRect.clientWidth,\r\n            bottom: fieldRect.offsetTop + fieldRect.clientHeight,\r\n        }\r\n    }\r\n\r\n    handleRefField = (elem) => { this.field = elem }\r\n\r\n    render () {\r\n        return (\r\n            <div className={style.wrapper} style={{ width: `${this.props.fieldWidth + DEFAULTS.sideWidth}px` }}>\r\n                <CanvasField refHandler={this.handleRefField} />\r\n                <Sidebar />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RedSquares.jsx","import * as types from '../constants/actionTypes'\r\nimport { DEFAULTS, GAME_STATUS, HIGHEST_BEATS, SPEEDS } from '../constants/game'\r\nimport InputCatcher from '../utils/InputCatcher'\r\nimport { gameStateUpdater, spacePress } from '../game-logic'\r\n\r\nexport function processSpacePress () {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: types.SET_STATE,\r\n            data: spacePress(getState()),\r\n        })\r\n    }\r\n}\r\n\r\nconst getWaitTime = (state, lastFrameTime) => Math.max(\r\n    (lastFrameTime + DEFAULTS.frameLength) - performance.now(),\r\n    0\r\n)\r\n\r\nconst gameCycle = (initState) => {\r\n    const state = gameStateUpdater(initState)\r\n\r\n    if (state.game.status === GAME_STATUS.stop && initState.game.status === GAME_STATUS.play) {\r\n        localStorage.setItem(\r\n            HIGHEST_BEATS,\r\n            state.game.highestBeats = Math.max(state.game.beats, state.game.highestBeats)\r\n        )\r\n    }\r\n\r\n    return state\r\n}\r\n\r\nfunction updateFrame (dispatch, getState, lastFrameTime) {\r\n    return () => {\r\n        const initState = getState()\r\n        let state = gameCycle(initState)\r\n\r\n        if (state.game.speed === SPEEDS.Faster) {\r\n            for (let i = 1; i <= 100; i += 1) {\r\n                state = gameCycle(state)\r\n            }\r\n        }\r\n\r\n        if (state.game.status === GAME_STATUS.play || initState.game.status === GAME_STATUS.play) {\r\n            dispatch({\r\n                type: types.SET_STATE,\r\n                data: state,\r\n            })\r\n        }\r\n\r\n        setTimeout(\r\n            updateFrame(dispatch, getState, performance.now()),\r\n            state.game.speed === SPEEDS.Normal ? getWaitTime(state, lastFrameTime) : 0\r\n        )\r\n    }\r\n}\r\n\r\nexport function clearHighest () {\r\n    return (dispatch) => {\r\n        localStorage.removeItem(HIGHEST_BEATS)\r\n\r\n        dispatch({\r\n            type: types.INIT,\r\n            data: {\r\n                highestBeats: 0,\r\n            },\r\n        })\r\n    }\r\n}\r\n\r\nexport function init (redSquares) {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: types.INIT,\r\n            data: {\r\n                redSquares,\r\n                inputController: new InputCatcher(),\r\n                highestBeats: localStorage[HIGHEST_BEATS] ? parseInt(localStorage[HIGHEST_BEATS], 10) : 0,\r\n            },\r\n        })\r\n\r\n        updateFrame(dispatch, getState)()\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/actions/game.js","import { GAME_STATUS } from '../constants/game'\r\nimport { HERO_STATUSES } from '../constants/hero'\r\n\r\nconst getHeroStatus = (x, y, heroSize, threatSize, threats) => {\r\n    const safeLength = heroSize + threatSize\r\n\r\n    if (threats.some((threat) => Math.abs(threat.x - x) < safeLength && Math.abs(threat.y - y) < safeLength)) {\r\n        return HERO_STATUSES.trouble\r\n    }\r\n\r\n    return HERO_STATUSES.normal\r\n}\r\n\r\nfunction getMove (hero, target) {\r\n    const xDelta = target.x - hero.x\r\n    const yDelta = target.y - hero.y\r\n    const distance = Math.sqrt((xDelta ** 2) + (yDelta ** 2))\r\n\r\n    if (distance <= hero.maxSpeed) {\r\n        return {\r\n            xMove: xDelta,\r\n            yMove: yDelta,\r\n        }\r\n    }\r\n\r\n    const normalization = distance / hero.maxSpeed\r\n\r\n    return {\r\n        xMove: xDelta / normalization,\r\n        yMove: yDelta / normalization,\r\n    }\r\n}\r\n\r\nfunction getShadows ({ game, hero }) {\r\n    const { shadows } = hero\r\n    let id = 0\r\n\r\n    if (!(game.frame % hero.shadowPeriod)) {\r\n        if (shadows.length === hero.shadowQuantity) {\r\n            shadows.pop()\r\n        }\r\n        if (shadows.length) {\r\n            id = shadows[0].id + 1\r\n        }\r\n        shadows.unshift({\r\n            x: hero.x,\r\n            y: hero.y,\r\n            id,\r\n        })\r\n    }\r\n\r\n    return shadows\r\n}\r\n\r\nexport function moveHero (state) {\r\n    const { game, hero } = state\r\n    const { target } = hero\r\n    const { threats } = state.threats\r\n    const threatSize = state.threats.size\r\n\r\n    const { xMove, yMove } = getMove(hero, target)\r\n\r\n    let x = hero.x + xMove\r\n    x = Math.max(x, hero.size)\r\n    x = Math.min(x, game.fieldWidth - hero.size)\r\n\r\n    let y = hero.y + yMove\r\n    y = Math.max(y, hero.size)\r\n    y = Math.min(y, game.fieldHeight - hero.size)\r\n\r\n    const status = getHeroStatus(x, y, hero.size, threatSize, threats)\r\n\r\n    return {\r\n        ...state,\r\n        game: {\r\n            ...state.game,\r\n            status: status === HERO_STATUSES.normal ? GAME_STATUS.play : GAME_STATUS.stop,\r\n        },\r\n        hero: {\r\n            ...state.hero,\r\n            x,\r\n            y,\r\n            status,\r\n            shadows: getShadows(state),\r\n        },\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game-logic/hero.js","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\nrender(<App />, document.querySelector('#app'))\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export default class InputCatcher {\r\n    static instance\r\n    static mousePos = {}\r\n    static keyPressed = []\r\n    initialKeymap = {}\r\n\r\n    constructor (keymap) {\r\n        this.initialKeymap = keymap\r\n\r\n        if (InputCatcher.instance) {\r\n            return InputCatcher.instance\r\n        }\r\n        InputCatcher.instance = this\r\n\r\n        document.onmousemove = this.saveMousePos\r\n        window.document.onkeydown = this.process\r\n    }\r\n\r\n    saveMousePos = (e) => {\r\n        InputCatcher.mousePos = {\r\n            x: e.pageX,\r\n            y: e.pageY,\r\n        }\r\n    }\r\n\r\n    process = (e) => {\r\n        if (e.keyCode === 32) {\r\n            e.preventDefault()\r\n        }\r\n        this.saveKeyPressed(e)\r\n    }\r\n\r\n    saveKeyPressed = ({ keyCode }) => InputCatcher.keyPressed.push(keyCode)\r\n\r\n    reactToKeys = (keymap = this.initialKeymap) => {\r\n        InputCatcher.keyPressed.forEach((key) => keymap[key] && keymap[key]())\r\n        InputCatcher.keyPressed = []\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/InputCatcher.js","import { getNearest, getVariants, getSafeInterval } from './common'\r\n\r\nconst setupMinDistance = (fieldWidth, fieldHeight, safe) => ({ x, y }, threats) => Math.min(\r\n    getNearest({ x, y }, threats).distance,\r\n    x + safe,\r\n    (fieldWidth + safe) - x,\r\n    y + safe,\r\n    (fieldHeight + safe) - y\r\n)\r\n\r\nfunction getClearest (safe, fieldWidth, fieldHeight, threats) {\r\n    let clearest = 0\r\n    let xBest\r\n    let yBest\r\n    const getMinDistance = setupMinDistance(fieldWidth, fieldHeight, safe)\r\n\r\n    for (let x = safe; x < fieldWidth - safe; x += safe) {\r\n        for (let y = safe; y < fieldHeight - safe; y += safe) {\r\n            const distance = getMinDistance({ x, y }, threats)\r\n\r\n            if (distance > clearest) {\r\n                clearest = distance\r\n                xBest = x\r\n                yBest = y\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        x: xBest,\r\n        y: yBest,\r\n    }\r\n}\r\n\r\nexport default function ({ game, hero, threats }) {\r\n    const newThreats = threats.threats.map((threat) => (\r\n        {\r\n            x: threat.x + threat.speed.x,\r\n            y: threat.y + threat.speed.y,\r\n        }\r\n    ))\r\n\r\n    const safe = hero.size + threats.size\r\n    const getMinDistance = setupMinDistance(game.fieldWidth, game.fieldHeight, safe)\r\n    const nearest = getMinDistance(hero, newThreats)\r\n\r\n    if (nearest > getSafeInterval(hero, threats)) {\r\n        return getClearest(safe, game.fieldWidth, game.fieldHeight, newThreats)\r\n    }\r\n\r\n    const variant = getVariants(hero).reduce((best, current) => {\r\n        const distance = getMinDistance(current, newThreats)\r\n\r\n        if (distance > best.distance) {\r\n            return {\r\n                x: current.x,\r\n                y: current.y,\r\n                distance,\r\n            }\r\n        }\r\n\r\n        return best\r\n    }, {\r\n        x: hero.x,\r\n        y: hero.y,\r\n        distance: nearest,\r\n    })\r\n\r\n    return {\r\n        x: variant.x,\r\n        y: variant.y,\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/traveller.js","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport _ from 'lodash'\r\nimport { HERO_STATUSES } from '../constants/hero'\r\nimport style from './RedSquares.less'\r\n\r\nconst heroStyle = {\r\n    [HERO_STATUSES.normal]: 'rgb(50, 205, 50)',\r\n    [HERO_STATUSES.trouble]: 'rgb(237, 20, 61)',\r\n}\r\n\r\n@connect(\r\n    (state) => ({\r\n        fieldWidth: state.game.fieldWidth,\r\n        fieldHeight: state.game.fieldHeight,\r\n        heroStatus: state.hero.status,\r\n        heroSize: state.hero.size,\r\n        heroPos: {\r\n            x: state.hero.x,\r\n            y: state.hero.y,\r\n        },\r\n        threatSize: state.threats.size,\r\n        threats: state.threats.threats,\r\n        shadows: state.hero.shadows,\r\n        error: state.game.error,\r\n    })\r\n)\r\nexport default class CanvasField extends React.PureComponent {\r\n    static propTypes = {\r\n        fieldWidth: PropTypes.number.isRequired,\r\n        fieldHeight: PropTypes.number.isRequired,\r\n        heroStatus: PropTypes.oneOf(_.values(HERO_STATUSES)).isRequired,\r\n        heroSize: PropTypes.number.isRequired,\r\n        heroPos: PropTypes.shape({\r\n            x: PropTypes.number,\r\n            y: PropTypes.number,\r\n        }).isRequired,\r\n        threatSize: PropTypes.number.isRequired,\r\n        threats: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n        shadows: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n        error: PropTypes.string.isRequired,\r\n        refHandler: PropTypes.func.isRequired,\r\n    }\r\n\r\n    static drawSquare ({ ctx, pos, size, color }) {\r\n        ctx.fillStyle = color\r\n        ctx.fillRect(\r\n            Math.round(pos.x - size),\r\n            Math.round(pos.y - size),\r\n            size * 2,\r\n            size * 2\r\n        )\r\n    }\r\n\r\n    paint () {\r\n        if (!this.canvas) {\r\n            return\r\n        }\r\n        const ctx = this.canvas.getContext('2d')\r\n\r\n        ctx.clearRect(0, 0, this.props.fieldWidth, this.props.fieldHeight)\r\n\r\n        this.props.shadows.forEach((shadow, index) => CanvasField.drawSquare({\r\n            ctx,\r\n            pos: this.props.shadows[index],\r\n            size: this.props.heroSize,\r\n            color: `rgba(237, 20, 61, ${((this.props.shadows.length - index - 1) / this.props.shadows.length) * 0.2})`,\r\n        }))\r\n        CanvasField.drawSquare({\r\n            ctx,\r\n            pos: this.props.heroPos,\r\n            size: this.props.heroSize,\r\n            color: heroStyle[this.props.heroStatus],\r\n        })\r\n        this.props.threats.forEach((threat) => (\r\n            CanvasField.drawSquare({\r\n                ctx,\r\n                pos: threat,\r\n                size: this.props.threatSize,\r\n                color: 'rgb(100, 149, 237)',\r\n            })\r\n        ))\r\n    }\r\n\r\n    canvas = null\r\n\r\n    handleRefCanvas = (elem) => {\r\n        this.canvas = elem\r\n        this.props.refHandler(elem)\r\n    }\r\n\r\n    render () {\r\n        this.paint()\r\n\r\n        return (\r\n            <div className={style.fieldWrapper}>\r\n                <canvas\r\n                    className={style.field}\r\n                    ref={this.handleRefCanvas}\r\n                    width={this.props.fieldWidth}\r\n                    height={this.props.fieldHeight}\r\n                >\r\n                    {'You are using an outdated browser.'}\r\n                </canvas>\r\n                <div className={style.error}>{this.props.error}</div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/CanvasField.jsx","import React from 'react'\r\nimport { combineReducers, applyMiddleware, createStore, compose } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { Provider } from 'react-redux'\r\nimport * as reducers from './reducers'\r\nimport RedSquares from './components/RedSquares'\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ // eslint-disable-line no-underscore-dangle\r\n    || compose\r\nconst store = createStore(combineReducers(reducers), composeEnhancers(applyMiddleware(thunk)))\r\n\r\nconst App = () => (\r\n    <Provider store={store}>\r\n        <RedSquares />\r\n    </Provider>\r\n)\r\n\r\nexport default App\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/App.jsx","import InputCatcher from '../utils/InputCatcher'\r\n\r\nexport default function (data) {\r\n    const fieldSize = data.game.redSquares.getFieldSize()\r\n\r\n    return {\r\n        x: InputCatcher.mousePos.x - fieldSize.left,\r\n        y: InputCatcher.mousePos.y - fieldSize.top,\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/controllers/manual.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"wrapper\":\"RedSquares__wrapper__n469N\",\"fieldWrapper\":\"RedSquares__fieldWrapper__3xRFe\",\"field\":\"RedSquares__field__3S_U-\",\"error\":\"RedSquares__error__32Ynw\",\"side\":\"RedSquares__side__1Qama\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RedSquares.less\n// module id = tNBi\n// module chunks = 1","export function combineProcessors (...processors) {\r\n    return (state) => processors.reduce((result, processor) => processor(result), state)\r\n}\r\n\r\nexport function sign (num) {\r\n    if (num === 0 || isNaN(num)) {\r\n        return num\r\n    }\r\n\r\n    return num > 0 ? 1 : -1\r\n}\r\n\r\nexport const defaultHeroPosition = (game, size) => ({\r\n    x: (game.fieldWidth - size) / 2,\r\n    y: (game.fieldHeight - size) / 2,\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/funcs.js"],"sourceRoot":""}