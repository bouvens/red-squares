parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"HeXt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SET_STATE=exports.INIT=void 0;const e="INIT";exports.INIT=e;const T="SET_STATE";exports.SET_STATE=T;
},{}],"lBYR":[function(require,module,exports) {
"use strict";var e,s,t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const i=" ";let o=(s=e=class e{constructor(s){if(t.call(this),this.initialKeymap=s,e.instance)return e.instance;e.instance=this,document.onmousemove=this.saveMousePos,window.document.addEventListener("keydown",this.process)}},e.mousePos={},e.keyPressed=[],t=function(){this.initialKeymap={},this.saveMousePos=(e=>{o.mousePos={x:e.pageX,y:e.pageY}}),this.process=(e=>{" "===e.key&&e.preventDefault(),this.saveKeyPressed(e)}),this.saveKeyPressed=(({keyCode:e})=>{o.keyPressed.push(e)}),this.reactToKeys=((e=this.initialKeymap)=>{o.keyPressed.forEach(s=>e[s]&&e[s]()),o.keyPressed=[]})},s);exports.default=o;
},{}],"xKw5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=t(require("../utils/InputCatcher"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){const u=t.game.redSquares.getFieldSize();return{x:e.default.mousePos.x-u.left,y:e.default.mousePos.y-u.top}}
},{"../utils/InputCatcher":"lBYR"}],"FAJH":[function(require,module,exports) {
"use strict";function e(e){return e.hero?{x:e.hero.x,y:e.hero.y}:{x:0,y:0}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"U3K9":[function(require,module,exports) {
"use strict";function e(e,t){return Math.random()*(e-2*t)+t}let t;function r(r){return(!t||r.hero.x===t.x&&r.hero.y===t.y)&&(t={x:e(r.game.fieldWidth,r.hero.size),y:e(r.game.fieldHeight,r.hero.size)}),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"YJhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNaNumber=t,exports.sign=o,exports.saveHighestScore=s,exports.getHighestScore=i,exports.removeHighestScore=n,exports.defaultHeroPosition=void 0;var e=require("../constants/game");function t(e){return Number.isNaN(parseFloat(e))}function o(e){return 0===e||t(e)?e:e>0?1:-1}const r=(e,t)=>({x:(e.fieldWidth-t)/2,y:(e.fieldHeight-t)/2});function s(t){localStorage.setItem(e.HIGHEST_BEATS,t)}function i(){const t=localStorage[e.HIGHEST_BEATS];return t?parseInt(t,10):0}function n(){localStorage.removeItem(e.HIGHEST_BEATS)}exports.defaultHeroPosition=r;
},{"../constants/game":"uZ7k"}],"U0O0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getScaryEdges=o,exports.getVariants=x,exports.getSafeInterval=exports.getNearest=exports.VARIANTS_QUANTITY=exports.SCARY_INTERVAL=void 0;const e=4/3;exports.SCARY_INTERVAL=4/3;const t=24;exports.VARIANTS_QUANTITY=t;const s=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=({x:e,y:t},r)=>r.reduce((r,a)=>{const o=s({x:e,y:t},a);return!r.threat||r.distance>o?{threat:a,distance:o}:r},{threat:null,distance:1/0});exports.getNearest=r;const a=(e,t)=>(e.size+t.size+e.maxSpeed+t.maxSpeed)*(4/3);function o(e,t,s,r){const a=[],{x:o,y:x}=e;return a.push({x:o,y:1.1*-t}),a.push({x:o,y:r+1.1*t}),a.push({x:1.1*-t,y:x}),a.push({x:s+1.1*t,y:x}),a}function x(e){const s=[];for(let r=0;r<2*Math.PI;r+=2*Math.PI/t)s.push({x:e.x+Math.cos(r)*e.maxSpeed,y:e.y+Math.sin(r)*e.maxSpeed});return s}exports.getSafeInterval=a;
},{}],"ZseN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=s(require("lodash")),t=require("../utils/funcs"),r=require("./common");function s(e){return e&&e.__esModule?e:{default:e}}function a({game:s,hero:a,threats:i}){const u=(0,r.getScaryEdges)(a,2*i.size,s.fieldWidth,s.fieldHeight),n=(0,r.getNearest)(a,e.default.extend(u,i.threats));if(!n.threat||n.distance>2*(0,r.getSafeInterval)(a,i))return(0,t.defaultHeroPosition)(s,a.size);const o=a.x-n.threat.x,d=a.y-n.threat.y;return{x:a.x+o,y:a.y+d}}
},{"../utils/funcs":"YJhK","./common":"U0O0"}],"GQJA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=s(require("lodash")),t=require("../utils/funcs"),r=require("./common");function s(e){return e&&e.__esModule?e:{default:e}}function a({game:s,hero:a,threats:i}){const n=(0,r.getScaryEdges)(a,2*i.size,s.fieldWidth,s.fieldHeight),d=i.threats.map(e=>({x:e.x+e.speed.x,y:e.y+e.speed.y})),u=e.default.extend(n,d),c=(0,r.getNearest)(a,u);if(!c.threat||c.distance>(0,r.getSafeInterval)(a,i))return(0,t.defaultHeroPosition)(s,a.size);const o=(0,r.getVariants)(a).reduce((e,t)=>{const{distance:s}=(0,r.getNearest)(t,u);return s>e.distance?{x:t.x,y:t.y,distance:s}:e},{x:a.x,y:a.y,distance:c.distance});return{x:o.x,y:o.y}}
},{"../utils/funcs":"YJhK","./common":"U0O0"}],"GFcx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=require("./common");const t=(t,r,n)=>({x:s,y:i},a)=>Math.min((0,e.getNearest)({x:s,y:i},a).distance,s+n,t+n-s,i+n,r+n-i);function r(e,r,n,s){let i,a,o=0;const c=t(r,n,e);for(let t=e;t<r-e;t+=e)for(let r=e;r<n-e;r+=e){const e=c({x:t,y:r},s);e>o&&(o=e,i=t,a=r)}return{x:i,y:a}}function n({game:n,hero:s,threats:i}){const a=i.threats.map(e=>({x:e.x+e.speed.x,y:e.y+e.speed.y})),o=s.size+i.size,c=t(n.fieldWidth,n.fieldHeight,o),d=c(s,a);if(d>(0,e.getSafeInterval)(s,i))return r(o,n.fieldWidth,n.fieldHeight,a);const x=(0,e.getVariants)(s).reduce((e,t)=>{const r=c(t,a);return r>e.distance?{x:t.x,y:t.y,distance:r}:e},{x:s.x,y:s.y,distance:d});return{x:x.x,y:x.y}}
},{"./common":"U0O0"}],"nM9j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Mouse",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Still",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Random",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Scared",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Stable",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Traveller",{enumerable:!0,get:function(){return l.default}});var e=o(require("./manual")),r=o(require("./still")),t=o(require("./random")),u=o(require("./scared")),n=o(require("./stable")),l=o(require("./traveller"));function o(e){return e&&e.__esModule?e:{default:e}}
},{"./manual":"xKw5","./still":"FAJH","./random":"U3K9","./scared":"ZseN","./stable":"GQJA","./traveller":"GFcx"}],"uZ7k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.KEY_CODES=exports.BUTTON_NAMES=exports.GAME_STATUS=exports.HIGHEST_BEATS=exports.IDS=exports.DEFAULTS=exports.SPEEDS=void 0;var e=a(require("lodash")),t=r(require("../controllers"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}const o={Normal:"Normal",Fast:"Fast",Faster:"Faster"};exports.SPEEDS=o;const s={frameLength:30,fieldWidth:800,fieldHeight:600,sideWidth:200,shadowPeriod:1,shadowQuantity:50,speed:o.Fast,manager:e.default.findKey(t,e=>e===t.Traveller),heroSize:25,heroSpeed:10,threatSize:15,threatSpeed:4,threatLimit:20,threatAddTimeout:1e3,threatRemoveProbability:5};exports.DEFAULTS=s;const i={autoRestart:"game.autoRestart",speed:"game.speed",manager:"game.manager",heroSize:"hero.size",heroSpeed:"hero.maxSpeed",threatSize:"threats.size",threatSpeed:"threats.maxSpeed",threatLimit:"threats.limit",threatAddTimeout:"threats.addTimeout",threatRemoveProbability:"threats.removeProbability"};exports.IDS=i;const p="highestBeats";exports.HIGHEST_BEATS=p;const d={play:"play",pause:"pause",stop:"stop"};exports.GAME_STATUS=d;const h={[d.play]:"Pause",[d.pause]:"Resume",[d.stop]:"Start"};exports.BUTTON_NAMES=h;const S={space:32};exports.KEY_CODES=S;
},{"../controllers":"nM9j"}],"ZBWc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=n(require("lodash")),t=a(require("../constants/actionTypes")),r=require("../constants/game");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}const s={redSquares:null,inputController:null,manager:r.DEFAULTS.manager,status:r.GAME_STATUS.stop,autoRestart:!0,beats:0,highestBeats:0,outs:0,frame:0,speed:r.DEFAULTS.speed,fieldWidth:r.DEFAULTS.fieldWidth,fieldHeight:r.DEFAULTS.fieldHeight,error:""};function u(r=s,a){switch(a.type){case t.INIT:return e.default.extend({},r,a.data);case t.SET_STATE:return e.default.extend({},r,a.data.game);default:return r}}
},{"../constants/actionTypes":"HeXt","../constants/game":"uZ7k"}],"jwZM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HERO_STATUSES=void 0;const e={normal:"normal",trouble:"trouble"};exports.HERO_STATUSES=e;
},{}],"2KQC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=c;var e=i(require("lodash")),t=s(require("../constants/actionTypes")),r=require("../constants/game"),o=require("../constants/hero"),a=require("../utils/funcs"),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e};function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}const u=n({},(0,a.defaultHeroPosition)(r.DEFAULTS,r.DEFAULTS.heroSize),{maxSpeed:r.DEFAULTS.heroSpeed,status:o.HERO_STATUSES.normal,size:r.DEFAULTS.heroSize,shadowPeriod:r.DEFAULTS.shadowPeriod,shadowQuantity:r.DEFAULTS.shadowQuantity,shadows:[],target:n({},(0,a.defaultHeroPosition)(r.DEFAULTS,r.DEFAULTS.heroSize),{save:""})});function c(r=u,o){switch(o.type){case t.SET_STATE:return e.default.extend({},r,o.data.hero);default:return r}}
},{"../constants/actionTypes":"HeXt","../constants/game":"uZ7k","../constants/hero":"jwZM","../utils/funcs":"YJhK"}],"/0Nx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;var e=i(require("lodash")),t=a(require("../constants/actionTypes")),r=require("../constants/game");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}const o={threats:[],size:r.DEFAULTS.threatSize,maxSpeed:r.DEFAULTS.threatSpeed,lastTime:0,addTimeout:r.DEFAULTS.threatAddTimeout,index:0,limit:r.DEFAULTS.threatLimit,removeProbability:r.DEFAULTS.threatRemoveProbability};function n(r=o,a){switch(a.type){case t.SET_STATE:return e.default.extend({},r,a.data.threats);default:return r}}
},{"../constants/actionTypes":"HeXt","../constants/game":"uZ7k"}],"/2YC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"game",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"hero",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"threats",{enumerable:!0,get:function(){return t.default}});var e=u(require("./game")),r=u(require("./hero")),t=u(require("./threats"));function u(e){return e&&e.__esModule?e:{default:e}}
},{"./game":"ZBWc","./hero":"2KQC","./threats":"/0Nx"}],"qXhM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moveHero=n;var e=require("../constants/game"),t=require("../constants/hero"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e};const r=(e,o,r,a,s)=>{const n=r+a;return s.some(t=>Math.abs(t.x-e)<n&&Math.abs(t.y-o)<n)?t.HERO_STATUSES.trouble:t.HERO_STATUSES.normal};function a(e,t){const o=t.x-e.x,r=t.y-e.y,a=Math.sqrt(Math.pow(o,2)+Math.pow(r,2));if(a<=e.maxSpeed)return{xMove:o,yMove:r};const s=a/e.maxSpeed;return{xMove:o/s,yMove:r/s}}function s({game:e,hero:{shadows:t,shadowPeriod:o,shadowQuantity:r,x:a,y:s}}){return e.frame%o||(t.length===r&&t.pop(),t.unshift({x:a,y:s,id:t.length?t[0].id+1:0})),t}function n(n){const{game:h,hero:i,threats:{threats:u}}=n,M=n.threats.size,{xMove:c,yMove:m}=a(i,i.target);let x=i.x+c;x=Math.max(x,i.size),x=Math.min(x,h.fieldWidth-i.size);let l=i.y+m;l=Math.max(l,i.size),l=Math.min(l,h.fieldHeight-i.size);const y=r(x,l,i.size,M,u);return o({},n,{game:o({},n.game,{status:y===t.HERO_STATUSES.normal?e.GAME_STATUS.play:e.GAME_STATUS.stop}),hero:o({},n.hero,{x:x,y:l,status:y,shadows:s(n)})})}
},{"../constants/game":"uZ7k","../constants/hero":"jwZM"}],"34p/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.controlThreats=l;var e=n(require("lodash")),t=require("../utils/funcs"),r=require("../constants/game"),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function n(e){return e&&e.__esModule?e:{default:e}}const s=(e,r,n)=>(s,i)=>{const d=a({},e);return d.isGoingOut=(0,t.sign)(i)===(0,t.sign)(d.speed[s]),d.isOut||(n&&d.isGoingOut?d.isOut=!0:d.speed[s]=(d.isGoingOut?-1:1)*(d.speed[s]||1)),Math.abs(i)>3*r&&(d.isAroundField=!1),d},i=(e,t,r,n)=>i=>{let d=a({},i);const o=Math.random()<1/e,h=s(d,t,o),u=t;d.x<u&&(d=h("x",d.x-u));const l=r-t;d.x>l&&(d=h("x",d.x-l));const m=t;d.y<m&&(d=h("y",d.y-m));const c=n-t;return d.y>c&&(d=h("y",d.y-c)),d},d=(e,t,r,a,n)=>{const s=2*e;let i=Math.round(Math.random()*(r-s)),d=0-s,o={x:Math.round((2*Math.random()-1)*n),y:Math.ceil(Math.random()*n)};return Math.random()<.5?(i=0-s,d=Math.round(Math.random()*(a-s)),o={x:Math.ceil(Math.random()*n),y:Math.round((2*Math.random()-1)*n)},Math.random()<.5&&(i=r,o.x*=-1)):Math.random()<.5&&(d=a,o.y*=-1),{id:t,x:i,y:d,speed:o,isOut:!1,isAroundField:!0}};function o({threats:e,removeProbability:t,size:r},n,s){return e.map(e=>a({},e,{x:e.x+e.speed.x,y:e.y+e.speed.y})).map(i(t,r,n,s)).filter(e=>e.isAroundField)}function h(e){let t=0;return{beatenThreats:e.map(e=>{const r=a({},e);return r.isGoingOut&&!r.isOut&&(t+=1,delete r.isGoingOut),r},0),beats:t}}function u({newThreats:e,threats:t,frame:r,fieldWidth:a,fieldHeight:n,frameLength:s}){const i=[...e];let o=!1;return e.length<t.limit&&r>=t.lastTime+t.addTimeout/s&&(i.push(d(t.size,t.index,a,n,t.maxSpeed)),o=!0),{addedThreats:i,isAdded:o}}function l(t){const{threats:a,game:{frame:n,fieldWidth:s,fieldHeight:i}}=t,{frameLength:d}=r.DEFAULTS;let l=o(a,s,i);const m=a.threats.length-l.length,{beatenThreats:c,beats:f}=h(l);l=c;const{addedThreats:g,isAdded:x}=u({newThreats:l,threats:a,frame:n,fieldWidth:s,fieldHeight:i,frameLength:d});l=g;const M=e.default.merge({},t,{game:{beats:t.game.beats+f,outs:t.game.outs+m},threats:x?{lastTime:n,index:a.index+1}:a});return M.threats.threats=l,M}
},{"../utils/funcs":"YJhK","../constants/game":"uZ7k"}],"guqg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.spacePress=g,exports.gameStateUpdater=h;var e=c(require("lodash")),r=require("redux"),t=i(require("../controllers")),a=require("../constants/game"),o=require("../utils/funcs"),s=require("./hero"),u=require("./threats"),n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};function i(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};a.get||a.set?Object.defineProperty(r,t,a):r[t]=e[t]}return r.default=e,r}function c(e){return e&&e.__esModule?e:{default:e}}const l=(r,t)=>e.default.merge({},r,{game:{status:t}});function g(e){switch(e.game.status){case a.GAME_STATUS.play:return l(e,a.GAME_STATUS.pause);case a.GAME_STATUS.pause:return l(e,a.GAME_STATUS.play);case a.GAME_STATUS.stop:default:return n({},e,{game:n({},e.game,{status:a.GAME_STATUS.play,beats:0,outs:0,frame:0,error:""}),hero:n({},e.hero,(0,o.defaultHeroPosition)(e.game,e.hero.size)),threats:n({},e.threats,{threats:[],lastTime:-e.threats.addTimeout/a.DEFAULTS.frameLength})})}}function p(r){const a=e.default.merge({},r,{hero:{target:t[r.game.manager](r)}});return((0,o.isNaNumber)(a.hero.target.x)||(0,o.isNaNumber)(a.hero.target.y))&&(a.game.error="Bad target",a.hero.target=n({},a.hero.target,{x:a.hero.x,y:a.hero.y})),a}function f(e){let r=n({},e);return r.game.status===a.GAME_STATUS.stop&&r.game.autoRestart?r=g(r=p(r)):r.game.inputController.reactToKeys({[a.KEY_CODES.space]:()=>{r=g(r)}}),r}const m=(0,r.compose)(u.controlThreats,p,s.moveHero);function h(e){let r=f(e);return r.game.status===a.GAME_STATUS.play&&((r=m(r)).game.frame+=1),r}
},{"../controllers":"nM9j","../constants/game":"uZ7k","../utils/funcs":"YJhK","./hero":"qXhM","./threats":"34p/"}],"W/ni":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./game");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./hero");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./threats");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});
},{"./game":"guqg","./hero":"qXhM","./threats":"34p/"}],"JaP3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.processSpacePress=i,exports.clearHighest=g,exports.init=l;var e=o(require("../constants/actionTypes")),t=require("../constants/game"),r=n(require("../utils/InputCatcher")),a=require("../game-logic"),s=require("../utils/funcs");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};a.get||a.set?Object.defineProperty(t,r,a):t[r]=e[r]}return t.default=e,t}function i(){return(t,r)=>{t({type:e.SET_STATE,data:(0,a.spacePress)(r())})}}const u=(e,r)=>Math.max(r+t.DEFAULTS.frameLength-performance.now(),0),c=e=>{const r=(0,a.gameStateUpdater)(e);return r.game.status===t.GAME_STATUS.stop&&e.game.status===t.GAME_STATUS.play&&(r.game.highestBeats=Math.max(r.game.beats,r.game.highestBeats),(0,s.saveHighestScore)(r.game.highestBeats)),r};function p(r,a,s){return()=>{const n=a();let o=c(n);if(o.game.speed===t.SPEEDS.Faster)for(let e=1;e<=100;e+=1)o=c(o);o.game.status!==t.GAME_STATUS.play&&n.game.status!==t.GAME_STATUS.play||r({type:e.SET_STATE,data:o}),setTimeout(p(r,a,performance.now()),o.game.speed===t.SPEEDS.Normal?u(o,s):0)}}function g(){return t=>{(0,s.removeHighestScore)(),t({type:e.INIT,data:{highestBeats:0}})}}function l(t){return(a,n)=>{a({type:e.INIT,data:{redSquares:t,inputController:new r.default,highestBeats:(0,s.getHighestScore)()}}),p(a,n)()}}
},{"../constants/actionTypes":"HeXt","../constants/game":"uZ7k","../utils/InputCatcher":"lBYR","../game-logic":"W/ni","../utils/funcs":"YJhK"}],"8T1C":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setState=void 0;var e=o(require("lodash")),t=r(require("../constants/actionTypes"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}const s=(r,o)=>({type:t.SET_STATE,data:e.default.set({},r,o)});exports.setState=s;
},{"../constants/actionTypes":"HeXt"}],"6aiX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.params=exports.game=void 0;var e=t(require("./game"));exports.game=e;var r=t(require("./params"));function t(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}exports.params=r;
},{"./game":"JaP3","./params":"8T1C"}],"wfOh":[function(require,module,exports) {
module.exports={wrapper:"_wrapper_03b62",fieldWrapper:"_fieldWrapper_03b62",field:"_field_03b62",error:"_error_03b62",side:"_side_03b62"};
},{}],"CByk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,r,t,s,a=l(require("react")),i=l(require("prop-types")),o=require("react-redux"),d=l(require("lodash")),h=require("../constants/hero"),u=l(require("./RedSquares.less"));function l(e){return e&&e.__esModule?e:{default:e}}const n={[h.HERO_STATUSES.normal]:"rgb(50, 205, 50)",[h.HERO_STATUSES.trouble]:"rgb(237, 20, 61)"};let p=(e=(0,o.connect)(e=>({fieldWidth:e.game.fieldWidth,fieldHeight:e.game.fieldHeight,heroStatus:e.hero.status,heroSize:e.hero.size,heroPos:{x:e.hero.x,y:e.hero.y},threatSize:e.threats.size,threats:e.threats.threats,shadows:e.hero.shadows,error:e.game.error})))((s=t=class extends a.default.PureComponent{constructor(...e){var r;return r=super(...e),this.canvas=null,this.clear=(()=>{this.canvas.clearRect(0,0,this.props.fieldWidth,this.props.fieldHeight)}),this.drawSquare=(({pos:e,size:r,color:t})=>{this.canvas.fillStyle=t,this.canvas.fillRect(Math.round(e.x-r),Math.round(e.y-r),2*r,2*r)}),this.paint=(()=>{this.clear(),this.props.shadows.forEach((e,r)=>this.drawSquare({pos:this.props.shadows[r],size:this.props.heroSize,color:`rgba(237, 20, 61, ${(this.props.shadows.length-r-1)/this.props.shadows.length*.2})`})),this.drawSquare({pos:this.props.heroPos,size:this.props.heroSize,color:n[this.props.heroStatus]}),this.props.threats.forEach(e=>this.drawSquare({pos:e,size:this.props.threatSize,color:"rgb(100, 149, 237)"}))}),this.handleRefCanvas=(e=>{this.canvas=e.getContext("2d"),this.props.refHandler(e)}),r}componentDidMount(){this.paint()}componentDidUpdate(){this.paint()}render(){return a.default.createElement("div",{className:u.default.fieldWrapper},a.default.createElement("canvas",{className:u.default.field,ref:this.handleRefCanvas,width:this.props.fieldWidth,height:this.props.fieldHeight},"You are using an outdated browser."),a.default.createElement("div",{className:u.default.error},this.props.error))}},t.propTypes={fieldWidth:i.default.number.isRequired,fieldHeight:i.default.number.isRequired,heroStatus:i.default.oneOf(d.default.values(h.HERO_STATUSES)).isRequired,heroSize:i.default.number.isRequired,heroPos:i.default.shape({x:i.default.number,y:i.default.number}).isRequired,threatSize:i.default.number.isRequired,threats:i.default.arrayOf(i.default.object).isRequired,shadows:i.default.arrayOf(i.default.object).isRequired,error:i.default.string.isRequired,refHandler:i.default.func.isRequired},r=s))||r;exports.default=p;
},{"../constants/hero":"jwZM","./RedSquares.less":"wfOh"}],"R79a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,a,r,s=m(require("react")),l=m(require("prop-types")),u=require("react-redux"),i=require("redux"),d=m(require("lodash")),n=require("state-control"),o=f(require("../actions")),p=f(require("../controllers")),c=require("../constants/game"),h=m(require("./RedSquares.less"));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,a):{};r.get||r.set?Object.defineProperty(t,a,r):t[a]=e[a]}return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}const S=(e,t)=>a=>d.default.extend(e(a),d.default.mapValues(t,e=>d.default.get(a,e))),g=(e,t)=>d.default.mapValues(d.default.invert(t),t=>e[t]);let b=(e=(0,u.connect)(S(e=>({status:e.game.status,beats:e.game.beats,highestBeats:e.game.highestBeats,outs:e.game.outs,threatsLength:e.threats.threats.length,manager:e.game.manager}),c.IDS),e=>(0,i.bindActionCreators)({processSpacePress:o.game.processSpacePress,setState:o.params.setState,clearHighest:o.game.clearHighest},e)))((r=a=class extends s.default.Component{constructor(...e){var t;return t=super(...e),this.changeHandler=this.props.setState,this.getS=((e,t)=>`${t||"No"} ${e}${1!==t?"s":""}`),t}render(){return s.default.createElement("div",{className:h.default.side,style:{width:`${c.DEFAULTS.sideWidth}px`}},s.default.createElement("button",{type:"button",onClick:this.props.processSpacePress},c.BUTTON_NAMES[this.props.status])," (Press Space)",s.default.createElement("h2",null,this.getS("beat",this.props.beats)),s.default.createElement("p",null,"Highest beats: ",this.props.highestBeats),s.default.createElement("p",null,this.getS("out",this.props.outs)),s.default.createElement("p",null,this.getS("threat",this.props.threatsLength)," on field"),s.default.createElement(n.Connector,{state:g(this.props,c.IDS),onChange:this.changeHandler,defaultNum:1},s.default.createElement(n.Check,{id:c.IDS.autoRestart,label:"Auto restart"}),s.default.createElement(n.Radio,{id:c.IDS.speed,label:"Speed",values:d.default.keys(c.SPEEDS)}),s.default.createElement(n.Radio,{id:c.IDS.manager,label:"Control",values:d.default.keys(p)}),s.default.createElement(n.Input,{id:c.IDS.heroSize,label:"Hero size (px)"}),s.default.createElement(n.Input,{id:c.IDS.heroSpeed,label:"Hero max speed (px/s)"}),s.default.createElement(n.Input,{id:c.IDS.threatSize,label:"Threat size (px)"}),s.default.createElement(n.Input,{id:c.IDS.threatSpeed,label:"Threat max speed (px/s)"}),s.default.createElement(n.Input,{id:c.IDS.threatLimit,label:"Threat limit"}),s.default.createElement(n.Input,{id:c.IDS.threatAddTimeout,label:"Threat add timeout (ms)"}),s.default.createElement(n.Input,{id:c.IDS.threatRemoveProbability,label:"Threat remove probability (1/x)"})),s.default.createElement("button",{type:"button",onClick:this.props.clearHighest},"Clear highest"))}},a.propTypes={status:l.default.oneOf(d.default.values(c.GAME_STATUS)).isRequired,beats:l.default.number.isRequired,highestBeats:l.default.number.isRequired,outs:l.default.number.isRequired,threatsLength:l.default.number.isRequired,processSpacePress:l.default.func.isRequired,setState:l.default.func.isRequired,clearHighest:l.default.func.isRequired},t=r))||t;exports.default=b;
},{"../actions":"6aiX","../controllers":"nM9j","../constants/game":"uZ7k","./RedSquares.less":"wfOh"}],"g984":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e,t,r,i,d=m(require("react")),n=m(require("prop-types")),l=require("redux"),o=require("react-redux"),s=m(require("lodash")),u=h(require("../actions")),a=require("../constants/game"),f=m(require("./RedSquares.less")),p=m(require("./CanvasField")),c=m(require("./Sidebar"));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}let q=(e=(0,o.connect)(e=>({fieldWidth:e.game.fieldWidth}),e=>(0,l.bindActionCreators)({init:u.game.init},e)))((i=r=class extends d.default.Component{constructor(...e){var t;return t=super(...e),this.getFieldSize=(()=>{const e=this.field;return{left:e.offsetLeft,top:e.offsetTop,right:e.offsetLeft+e.clientWidth,bottom:e.offsetTop+e.clientHeight}}),this.handleRefField=(e=>{this.field=e}),t}componentDidMount(){this.props.init(this)}render(){return d.default.createElement("div",{className:f.default.wrapper,style:{width:`${this.props.fieldWidth+a.DEFAULTS.sideWidth}px`}},d.default.createElement(p.default,{refHandler:this.handleRefField}),d.default.createElement(c.default,null))}},r.propTypes={fieldWidth:n.default.number,init:n.default.func},r.defaultProps={fieldWidth:800,init:s.default.noop},t=i))||t;exports.default=q;
},{"../actions":"6aiX","../constants/game":"uZ7k","./RedSquares.less":"wfOh","./CanvasField":"CByk","./Sidebar":"R79a"}],"0+DP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("react")),r=require("redux"),t=n(require("redux-thunk")),u=require("react-redux"),o=a(require("./reducers")),d=n(require("./components/RedSquares"));function a(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var u=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};u.get||u.set?Object.defineProperty(r,t,u):r[t]=e[t]}return r.default=e,r}function n(e){return e&&e.__esModule?e:{default:e}}const c=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||r.compose,i=(0,r.createStore)((0,r.combineReducers)(o),c((0,r.applyMiddleware)(t.default))),l=()=>e.default.createElement(u.Provider,{store:i},e.default.createElement(d.default,null));var s=l;exports.default=s;
},{"./reducers":"/2YC","./components/RedSquares":"g984"}],"vKFU":[function(require,module,exports) {
module.exports={};
},{}],"Focm":[function(require,module,exports) {
"use strict";var e=t(require("react")),r=require("react-dom"),u=t(require("./App"));function t(e){return e&&e.__esModule?e:{default:e}}require("./index.css"),(0,r.render)(e.default.createElement(u.default,null),document.querySelector("#app"));
},{"./App":"0+DP","./index.css":"vKFU"}]},{},["Focm"], null)
//# sourceMappingURL=src.afe6a84b.js.map